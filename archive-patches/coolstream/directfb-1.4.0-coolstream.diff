    directfb 1.4.0 from coolstream

 DirectFB-1.4.0/BUGS                                |   25 +
 DirectFB-1.4.0/CODING_STYLE                        |   69 +++
 DirectFB-1.4.0/README.COOLSTREAM                   |    4 +
 DirectFB-1.4.0/README.OSX                          |   41 ++
 DirectFB-1.4.0/autogen.sh                          |    5 +-
 DirectFB-1.4.0/configure.in                        |   14 +
 DirectFB-1.4.0/debian/changelog                    |   11 +
 DirectFB-1.4.0/debian/control                      |   61 +++
 DirectFB-1.4.0/debian/copyright                    |   30 ++
 DirectFB-1.4.0/debian/dirs                         |    2 +
 DirectFB-1.4.0/debian/docs                         |    5 +
 DirectFB-1.4.0/debian/libdirectfb-bin.files        |    6 +
 DirectFB-1.4.0/debian/libdirectfb-cvs.dirs         |    1 +
 DirectFB-1.4.0/debian/libdirectfb-cvs.files        |    3 +
 DirectFB-1.4.0/debian/libdirectfb-dev.dirs         |    2 +
 DirectFB-1.4.0/debian/libdirectfb-dev.files        |    8 +
 DirectFB-1.4.0/debian/libdirectfb-extra.files      |    2 +
 DirectFB-1.4.0/debian/rules                        |  100 ++++
 DirectFB-1.4.0/docs/DirectFB Core Architecture.pdf |  Bin 0 -> 109449 bytes
 DirectFB-1.4.0/docs/DirectFB Core Architecture.sxi |  Bin 0 -> 13921 bytes
 DirectFB-1.4.0/docs/GeneFX.odp                     |  Bin 0 -> 14497 bytes
 DirectFB-1.4.0/docs/GeneFX.pdf                     |  Bin 0 -> 36145 bytes
 DirectFB-1.4.0/docs/Makefile.in                    |   19 +-
 DirectFB-1.4.0/docs/README.mga-tv                  |  533 +++++++++++++++++++
 DirectFB-1.4.0/docs/ReferenceMaps.txt              |  131 +++++
 DirectFB-1.4.0/docs/direct/DirectList.eps          |  392 ++++++++++++++
 DirectFB-1.4.0/docs/direct/DirectList.pdf          |  Bin 0 -> 22734 bytes
 DirectFB-1.4.0/docs/direct/DirectList.sxd          |  Bin 0 -> 6733 bytes
 DirectFB-1.4.0/docs/html/Makefile.in               |    6 +-
 DirectFB-1.4.0/docs/initialization.txt             |   86 +++
 DirectFB-1.4.0/gfxdrivers/Makefile.am              |    8 +-
 DirectFB-1.4.0/gfxdrivers/ati128/.cvsignore        |    6 +
 DirectFB-1.4.0/gfxdrivers/cle266/Installation.txt  |   17 +
 DirectFB-1.4.0/gfxdrivers/cle266/Patching.txt      |   27 +
 DirectFB-1.4.0/gfxdrivers/cle266/Readme.txt        |  136 +++++
 DirectFB-1.4.0/gfxdrivers/cle266/changelog.txt     |   56 ++
 DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.c     |  291 +++++++++++
 DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.mk    |   45 ++
 DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.patch |   24 +
 DirectFB-1.4.0/gfxdrivers/cle266/hwdoc.txt         |  549 ++++++++++++++++++++
 DirectFB-1.4.0/gfxdrivers/cle266/rops.h            |  296 +++++++++++
 DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.c        |  209 ++++++++
 DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.h        |   34 ++
 DirectFB-1.4.0/gfxdrivers/cx2450x/Makefile.am      |   33 ++
 DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-accel.c  |  193 +++++++
 DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-state.c  |  351 +++++++++++++
 DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-tables.h |  191 +++++++
 DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.c        |  224 ++++++++
 DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.h        |   97 ++++
 DirectFB-1.4.0/gfxdrivers/unichrome/Readme.txt     |  101 ++++
 .../gfxdrivers/unichrome/find_revision.sh          |   26 +
 DirectFB-1.4.0/gfxdrivers/unichrome/ucio.c         |  424 +++++++++++++++
 DirectFB-1.4.0/gfxdrivers/unichrome/ucio.mk        |   46 ++
 DirectFB-1.4.0/hd1_config                          |   24 +
 DirectFB-1.4.0/include/directfb.h                  |   13 +
 DirectFB-1.4.0/inputdrivers/gunze/dfb-calib.c      |  469 +++++++++++++++++
 .../interfaces/IDirectFBFont/default_font.png      |  Bin 0 -> 3774 bytes
 DirectFB-1.4.0/mkchlog                             |   80 +++
 DirectFB-1.4.0/patches/README.radeonfb-r300fix     |    2 +
 .../patches/agpgart-noroot-2.6.10.patch.bz2        |  Bin 0 -> 359 bytes
 .../matroxfb-full-memory-linux-2.6.6.patch.bz2     |  Bin 0 -> 372 bytes
 .../patches/matroxfb-g400-clock-2.6.6.patch.bz2    |  Bin 0 -> 1999 bytes
 .../patches/radeonfb-r300fix-2.6.17.patch.bz2      |  Bin 0 -> 5930 bytes
 .../patches/radeonfb-r300fix-2.6.18.patch.bz2      |  Bin 0 -> 4124 bytes
 .../patches/radeonfb-r300fix-2.6.22.patch.bz2      |  Bin 0 -> 3858 bytes
 .../patches/rivafb-nv2030fix-2.6.10.patch.bz2      |  Bin 0 -> 1892 bytes
 .../patches/rivafb-nv2030fix-2.6.9.patch.bz2       |  Bin 0 -> 1876 bytes
 .../patches/rivafb-nv20fix-2.4.28.patch.bz2        |  Bin 0 -> 2066 bytes
 .../proxy/dispatcher/idirectfbfoo_dispatcher.c     |  178 +++++++
 .../proxy/dispatcher/idirectfbfoo_dispatcher.h     |   48 ++
 .../proxy/requestor/idirectfbfoo_requestor.c       |  129 +++++
 .../proxy/requestor/idirectfbfoo_requestor.h       |   45 ++
 DirectFB-1.4.0/rules/nmfile.make                   |    4 +-
 DirectFB-1.4.0/src/core/gfxcard.c                  |    5 +
 DirectFB-1.4.0/src/core/layer_context.c            |    9 +-
 DirectFB-1.4.0/src/core/surface.c                  |   15 +
 DirectFB-1.4.0/src/core/windows.c                  |   10 +-
 DirectFB-1.4.0/src/core/windows.h                  |    5 +-
 DirectFB-1.4.0/src/core/windows_internal.h         |    2 -
 DirectFB-1.4.0/src/gfx/generic/generic.c           |    4 +
 .../src/gfx/generic/stretch_up_down_16_indexed.h   |   82 +++
 DirectFB-1.4.0/src/idirectfb.c                     |   12 +-
 DirectFB-1.4.0/src/windows/idirectfbwindow.c       |   21 +-
 DirectFB-1.4.0/systems/fbdev/fb.h                  |    2 +
 DirectFB-1.4.0/systems/fbdev/fbdev.c               |    5 +
 DirectFB-1.4.0/tests/Makefile.am                   |    2 +-
 DirectFB-1.4.0/tests/dfbtest_window.c              |   32 +-
 DirectFB-1.4.0/tools/dfbsummon.c                   |  241 +++++++++
 DirectFB-1.4.0/wm/default/default.c                |    2 +-
 DirectFB-1.4.0/wm/unique/FLOW                      |   15 +
 DirectFB-1.4.0/wm/unique/IDEAS                     |   71 +++
 DirectFB-1.4.0/wm/unique/STRET                     |   34 ++
 92 files changed, 6453 insertions(+), 48 deletions(-)

diff --git a/DirectFB-1.4.0/BUGS b/DirectFB-1.4.0/BUGS
new file mode 100644
index 0000000..4f3ef3e
--- /dev/null
+++ b/DirectFB-1.4.0/BUGS
@@ -0,0 +1,25 @@
+different bugs and issues
+-------------------------
+- sometimes a deadlock occurs in deinitialization done by the signal handler
+- fix late software fallback for emulated triangles and clipping in some cases
+
+
+LSB violations
+--------------
+
+http://www.linuxbase.org/spec/gLSB/gLSB/libpthread.html
+
+- Applications must disconnect from the controlling tty before calling
+  pthread_create.
+
+- Threaded applications cannot use SIGUSR1 or SIGUSR2.
+
+
+demo problems
+-------------
+- some demos work incredible slower with hardware drivers that do not support
+  every blitting function (all except matrox) than with the generic driver. 
+  This is because the surfaces are loaded into offscreen video memory, but
+  cannot be blitted by hardware afterwards because of the non-supported
+  blitting effects (modulation etc). All demos should query the hardware
+  drivers' capabilities, and decide where the surfaces should go.
diff --git a/DirectFB-1.4.0/CODING_STYLE b/DirectFB-1.4.0/CODING_STYLE
new file mode 100644
index 0000000..b4319ee
--- /dev/null
+++ b/DirectFB-1.4.0/CODING_STYLE
@@ -0,0 +1,69 @@
+DirectFB Coding Style
+---------------------
+
+   The purpose of this document is to give developers a brief description
+   of the preferred coding style for the DirectFB source code.
+   
+   
+Indentation
+-----------
+
+   Each new level of code is indented by using 5 spaces, no tabulations at all.
+   Tabulations have a different meaning for different editors and we want to
+   keep uniformity.
+   
+   A line of code should not be longer than 120 columns.
+   
+ 
+Functions
+---------
+
+   Refer to the following prototypes:
+
+   type
+   function( args )
+   {
+        do_something( args );
+   }
+
+   type
+   function( very_long_argument1,
+             very_long_argument2,
+             very_long_argument3 )
+   {
+        do_something( very_long_argument1, 
+                      very_long_argument2,
+                      very_long_argument3 );
+   }
+
+   
+Braces
+------
+
+   We use a bracing style similar to K&R style:
+   
+   if (condition) {
+        do_this();
+        do_that();
+   }
+   else {
+        do_other();
+   }
+
+   if (condition_1 && condition_2 && condition_3 &&
+       condition_4 && condition_5 && condition_6)
+   {
+        do_this();
+        do_that();
+   }
+   else {
+        do_other();
+   }
+
+
+Final Recommendations
+---------------------
+
+   Do not take these hints as strict rules for coding, we rely on your
+   good taste.
+
diff --git a/DirectFB-1.4.0/README.COOLSTREAM b/DirectFB-1.4.0/README.COOLSTREAM
new file mode 100644
index 0000000..e9471dd
--- /dev/null
+++ b/DirectFB-1.4.0/README.COOLSTREAM
@@ -0,0 +1,4 @@
+This directory contains DirectFB 1.4.0 based on the DirectFB GIT from 2009/06/17.
+
+Before compiling please check the PREFIX in hd1_configure to fit your local requirements.
+To compile DirectFB for HD-1 just run autogen.sh, hd1_config make and make install.
diff --git a/DirectFB-1.4.0/README.OSX b/DirectFB-1.4.0/README.OSX
new file mode 100644
index 0000000..d5c8b1b
--- /dev/null
+++ b/DirectFB-1.4.0/README.OSX
@@ -0,0 +1,41 @@
+Contents
+--------
+1. Creating a build environment for DirectFB unter Mac OS X
+2. Compiling DirectFB and DirectFB-examples
+3. Running the examples
+
+
+1. Creating a build environment for DirectFB unter Mac OS X 10.3
+
+  - install the developer cd that came with Mac OS X 10.3 (newer versions may
+    also work), make sure to install the X11 developer package which is needed
+    for freetype)
+  - install fink 0.7.0 (http://fink.sourceforce.net), fink is a distribution
+    which contains precompiled packages of many open source projects and uses
+    debian package tools (apt-get, dselect, dpkg, etc).
+       - install the following fink packages:
+        * automake1.7
+        * autoconf2.5
+        * llbtool14
+        * pkgconfig
+        * libjpeg
+        * libpng3
+
+  - edit ~/.profile and add the follwing line:
+    export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig
+
+2. Compiling DirectFB
+      cd DirectFB
+      ./autogen.sh
+      make
+      sudo make install
+      cd ../DirectFB-examples
+      ./autogen.sh
+      make
+      sudo make install
+
+3. Running the examples
+      If your screen is garbled, try to specity your OSX desktop resolution
+      in /etc/directfbrc
+      eg.:
+       mode = 1280x1024
diff --git a/DirectFB-1.4.0/autogen.sh b/DirectFB-1.4.0/autogen.sh
index 456d565..4291f84 100755
--- a/DirectFB-1.4.0/autogen.sh
+++ b/DirectFB-1.4.0/autogen.sh
@@ -141,7 +141,4 @@ automake -Wno-portability --add-missing $am_opt
 
 cd $ORIGDIR
 
-echo Running configure --enable-maintainer-mode "$@" ...
-$srcdir/configure --enable-maintainer-mode "$@" || exit 1
-
-echo "Now type 'make' to compile $PROJECT."
+echo Now please run hd1_config
diff --git a/DirectFB-1.4.0/configure.in b/DirectFB-1.4.0/configure.in
index 9e7b6ed..fc2bd1b 100644
--- a/DirectFB-1.4.0/configure.in
+++ b/DirectFB-1.4.0/configure.in
@@ -693,6 +693,8 @@ if test "$enable_jpeg" = "yes"; then
       AC_MSG_WARN([
 *** JPEG library not found. JPEG image provider will not be built.])
     fi
+  else
+    JPEG=yes
   fi
 fi
 
@@ -884,6 +886,7 @@ sis315=no
 tdfx=no
 unichrome=no
 vmware=no
+cx2450x=no
 
 if test "$have_linux" = "yes"; then
 
@@ -919,6 +922,7 @@ if test "$gfxdrivers" = "all"; then
   checkfor_tdfx=yes
   checkfor_unichrome=yes
   checkfor_vmware=yes
+  checkfor_cx2450x=yes
 
   AC_MSG_RESULT(all)
 else 
@@ -990,6 +994,9 @@ else
           vmware)
                   checkfor_vmware=yes
                   ;;
+          cx2450x)
+            	  checkfor_cx2450x=yes
+		  ;;
           *)
                   echo "Unknown gfxdriver $gfxdriver, exiting!"
                   exit 1
@@ -1088,6 +1095,10 @@ if test "$checkfor_vmware" = "yes"; then
   vmware=yes
 fi
 
+if test "$checkfor_cx2450x" = "yes"; then
+  cx2450x=yes
+fi
+
 # lets check for input driver
 
 checkfor_dbox2remote=no
@@ -1460,6 +1471,7 @@ AM_CONDITIONAL(GFX_SIS315, test "$sis315" = "yes")
 AM_CONDITIONAL(GFX_TDFX, test "$tdfx" = "yes")
 AM_CONDITIONAL(GFX_UNICHROME, test "$unichrome" = "yes")
 AM_CONDITIONAL(GFX_VMWARE, test "$vmware" = "yes")
+AM_CONDITIONAL(GFX_CX2450X, test "$cx2450x" = "yes")
 
 AM_CONDITIONAL(DBOX2REMOTE, test "$enable_dbox2remote" = "yes")
 AM_CONDITIONAL(DREAMBOXREMOTE, test "$enable_dreamboxremote" = "yes")
@@ -1626,6 +1638,7 @@ gfxdrivers/sis315/Makefile
 gfxdrivers/tdfx/Makefile
 gfxdrivers/unichrome/Makefile
 gfxdrivers/vmware/Makefile
+gfxdrivers/cx2450x/Makefile
 
 inputdrivers/Makefile
 inputdrivers/dbox2remote/Makefile
@@ -1754,6 +1767,7 @@ Building Graphics Drivers:
   VIA CLE266                $cle266
   VIA UniChrome             $unichrome
   VMWare                    $vmware
+  NXP CX2450x               $cx2450x
   --
   OpenGL                    $gl (GLX: $glx)
 
diff --git a/DirectFB-1.4.0/debian/changelog b/DirectFB-1.4.0/debian/changelog
new file mode 100644
index 0000000..c9e9e90
--- /dev/null
+++ b/DirectFB-1.4.0/debian/changelog
@@ -0,0 +1,11 @@
+directfb (0.9.19+0.9.20WIP-1) unstable; urgency=low
+
+  * no changes to debian package, just changed version number.
+
+ -- Andreas Hundt <andi@fischlustig.de>  Tue,  29 Jul 2003 15:00:00 +0200
+
+directfb (0.9.18+0.9.19WIP-1) unstable; urgency=low
+
+  * unofficial debian packages
+
+ -- Andreas Hundt <andi@fischlustig.de>  Sun,  21 Apr 2003 08:33:49 +0200
diff --git a/DirectFB-1.4.0/debian/control b/DirectFB-1.4.0/debian/control
new file mode 100644
index 0000000..6905130
--- /dev/null
+++ b/DirectFB-1.4.0/debian/control
@@ -0,0 +1,61 @@
+Source: directfb
+Priority: optional
+Maintainer: Andreas Hundt <andi@fischlustig.de>
+Build-Depends: debhelper (>> 3.0.0), libflash-dev, libfreetype6-dev,
+	libjpeg62-dev, libpng3-dev, zlib1g-dev (>= 1:1.1.3), libmpeg3-dev, autoconf,
+	xlibs-dev, libflash-dev
+Standards-Version: 3.5.6
+
+Package: libdirectfb-cvs
+Section: libs
+Architecture: any
+Replaces: directfb0, libdirectfb8
+Conflicts: directfb0, libdirectfb8
+Depends: ${shlibs:Depends}
+Description: frame buffer graphics library (for 2.4+ kernels)
+ DirectFB is a graphics library which was designed with embedded systems
+ in mind. It offers maximum hardware accelerated performance at a minimum
+ of resource usage and overhead.
+
+Package: libdirectfb-bin
+Section: libs
+Architecture: any
+Conflicts: libdirectfb-0.9-15
+Depends: libdirectfb-cvs (= ${Source-Version}), ${shlibs:Depends}
+Description: binaries for libdirectfb
+ DirectFB is a graphics library which was designed with embedded systems
+ in mind. It offers maximum hardware accelerated performance at a minimum
+ of resource usage and overhead.
+ .
+ This packages contains the DirectFB background configuration tool
+ and the directfbrc man page.
+
+Package: libdirectfb-extra
+Section: libs
+Architecture: any
+Depends: libdirectfb-cvs (= ${Source-Version}), ${shlibs:Depends}
+Description: extra image/video providers for libdirectfb
+ DirectFB is a graphics library which was designed with embedded systems
+ in mind. It offers maximum hardware accelerated performance at a minimum
+ of resource usage and overhead.
+ .
+ This packages contains the following image/video providers:
+ .
+   * MPEG video
+   * Flash
+
+Package: libdirectfb-dev
+Section: libs
+Architecture: any
+Replaces: directfb-dev, libdirectfb8
+Conflicts: directfb-dev, libdirectfb8
+Depends: libdirectfb-cvs (= ${Source-Version}), libc6-dev, libflash-dev, libpng3-dev
+Section: devel
+Description: frame buffer graphics library, development files
+ DirectFB is a graphics library which was designed with embedded systems 
+ in mind. It offers maximum hardware accelerated performance at a minimum 
+ of resource usage and overhead. 
+ .
+ This package contains the files needed to compile and link 
+ programs which use DirectFB.
+
diff --git a/DirectFB-1.4.0/debian/copyright b/DirectFB-1.4.0/debian/copyright
new file mode 100644
index 0000000..8eb3aba
--- /dev/null
+++ b/DirectFB-1.4.0/debian/copyright
@@ -0,0 +1,30 @@
+This package was debianized by Fredrik Hallenberg <hallon@debian.org> on
+Tue, 17 Apr 2001 15:28:35 +0200.
+
+It was downloaded from http://www.directfb.org
+
+Upstream Authors:
+
+Denis Oliver Kropp <dok@convergence.de>
+Andreas Hundt <andi@convergence.de>
+Sven Neumann <sven@convergence.de>
+
+Copyright:
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Lesser General Public
+    License as published by the Free Software Foundation; either
+    version 2 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Lesser General Public License for more details.
+
+    You should have received a copy of the GNU Lesser General Public
+    License along with this library; if not, write to the Free Software
+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+On Debian GNU/Linux systems, the complete text of the GNU Lesser General
+Public License can be found in `/usr/share/common-licenses/LGPL'.
+
diff --git a/DirectFB-1.4.0/debian/dirs b/DirectFB-1.4.0/debian/dirs
new file mode 100644
index 0000000..ca882bb
--- /dev/null
+++ b/DirectFB-1.4.0/debian/dirs
@@ -0,0 +1,2 @@
+usr/bin
+usr/sbin
diff --git a/DirectFB-1.4.0/debian/docs b/DirectFB-1.4.0/debian/docs
new file mode 100644
index 0000000..8745af0
--- /dev/null
+++ b/DirectFB-1.4.0/debian/docs
@@ -0,0 +1,5 @@
+README
+TODO
+docs/README.screenshots
+docs/README.mga-tv
+docs/initialization.txt
diff --git a/DirectFB-1.4.0/debian/libdirectfb-bin.files b/DirectFB-1.4.0/debian/libdirectfb-bin.files
new file mode 100644
index 0000000..2633eef
--- /dev/null
+++ b/DirectFB-1.4.0/debian/libdirectfb-bin.files
@@ -0,0 +1,6 @@
+usr/share/man/man5/*
+usr/bin/dfbg
+usr/bin/dfbinfo
+usr/bin/dfbdump
+usr/bin/dfblayer
+usr/share/man/man1/dfbg*
diff --git a/DirectFB-1.4.0/debian/libdirectfb-cvs.dirs b/DirectFB-1.4.0/debian/libdirectfb-cvs.dirs
new file mode 100644
index 0000000..6845771
--- /dev/null
+++ b/DirectFB-1.4.0/debian/libdirectfb-cvs.dirs
@@ -0,0 +1 @@
+usr/lib
diff --git a/DirectFB-1.4.0/debian/libdirectfb-cvs.files b/DirectFB-1.4.0/debian/libdirectfb-cvs.files
new file mode 100644
index 0000000..f98b0cf
--- /dev/null
+++ b/DirectFB-1.4.0/debian/libdirectfb-cvs.files
@@ -0,0 +1,3 @@
+usr/lib/lib*.so.*
+usr/lib/directfb*
+usr/share/directfb*
diff --git a/DirectFB-1.4.0/debian/libdirectfb-dev.dirs b/DirectFB-1.4.0/debian/libdirectfb-dev.dirs
new file mode 100644
index 0000000..4418816
--- /dev/null
+++ b/DirectFB-1.4.0/debian/libdirectfb-dev.dirs
@@ -0,0 +1,2 @@
+usr/lib
+usr/include
diff --git a/DirectFB-1.4.0/debian/libdirectfb-dev.files b/DirectFB-1.4.0/debian/libdirectfb-dev.files
new file mode 100644
index 0000000..a0fca67
--- /dev/null
+++ b/DirectFB-1.4.0/debian/libdirectfb-dev.files
@@ -0,0 +1,8 @@
+usr/include/*
+usr/lib/lib*.a
+usr/lib/lib*.so
+usr/lib/lib*.la
+usr/bin/directfb-config
+usr/bin/directfb-csource
+usr/lib/pkgconfig
+usr/share/man/man1/directfb-csource*
diff --git a/DirectFB-1.4.0/debian/libdirectfb-extra.files b/DirectFB-1.4.0/debian/libdirectfb-extra.files
new file mode 100644
index 0000000..493c39f
--- /dev/null
+++ b/DirectFB-1.4.0/debian/libdirectfb-extra.files
@@ -0,0 +1,2 @@
+usr/lib/directfb-0.9.18cvs/interfaces/IDirectFBVideoProvider/*mpeg*
+usr/lib/directfb-0.9.18cvs/interfaces/IDirectFBVideoProvider/*swf*
diff --git a/DirectFB-1.4.0/debian/rules b/DirectFB-1.4.0/debian/rules
new file mode 100755
index 0000000..6ea77ec
--- /dev/null
+++ b/DirectFB-1.4.0/debian/rules
@@ -0,0 +1,100 @@
+#!/usr/bin/make -f
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+# This is the debhelper compatability version to use.
+export DH_COMPAT=3
+
+# shared library versions, option 1
+#version=2.0.5
+#major=2
+# option 2, assuming the library is created as src/.libs/libfoo.so.2.0.5 or so
+#version=`ls src/.libs/lib*.so.* | \
+# awk '{if (match($$0,/[0-9]+\.[0-9]+\.[0-9]+$$/)) print substr($$0,RSTART)}'`
+#major=`ls src/.libs/lib*.so.* | \
+# awk '{if (match($$0,/\.so\.[0-9]+$$/)) print substr($$0,RSTART+4)}'`
+
+DEVPACKAGE=$(shell dh_listpackages | grep -- -udeb.*dev$$)
+VERSION=$(shell dpkg-parsechangelog | grep ^Version: | cut -d ' ' -f 2)
+ARCH=$(shell dpkg --print-architecture)
+BUILD_DIST=directfb-build
+
+
+configure: configure-dist
+
+configure-dist: $(BUILD_DIST)/configure-stamp
+
+
+$(BUILD_DIST)/configure-stamp:
+	dh_testdir
+
+	mkdir -p $(BUILD_DIST)
+
+	cd $(BUILD_DIST) && \
+	../configure --prefix=/usr --mandir=\$${prefix}/share/man --infodir=\$${prefix}/share/info --disable-avifile
+
+	touch $@
+
+build: build-dist
+
+build-dist: configure-dist $(BUILD_DIST)/build-stamp
+
+$(BUILD_DIST)/build-stamp:
+	dh_testdir
+
+	$(MAKE) -C $(BUILD_DIST)
+
+	touch $@
+
+clean:
+	dh_testdir
+	dh_testroot
+
+	-$(MAKE) distclean
+	-rm -f install-test-stamp
+	-rm -rf $(BUILD_DIST)
+
+	dh_clean
+
+install: install-dist
+
+install-test: install-test-stamp
+install-test-stamp:
+	dh_testdir
+	dh_testroot
+	dh_clean -k
+	dh_installdirs
+
+	touch $@
+
+install-dist: build-dist install-test
+
+	$(MAKE) -C $(BUILD_DIST) install prefix=$(CURDIR)/debian/tmp/usr
+
+# Build architecture-independent files here.
+binary-indep: build install
+# We have nothing to do by default.
+
+# Build architecture-dependent files here.
+binary-arch: build install
+	dh_testdir
+	dh_testroot
+
+	dh_movefiles -plibdirectfb-extra
+	dh_movefiles
+	dh_installdocs
+	dh_installchangelogs ChangeLog
+	dh_link
+	dh_strip 
+	dh_compress
+	dh_fixperms
+	dh_makeshlibs
+	dh_installdeb
+	dh_shlibdeps -Xdfbg
+	dh_gencontrol
+	dh_md5sums
+	dh_builddeb
+
+binary: binary-indep binary-arch
+.PHONY: build clean binary-indep binary-arch binary install configure
diff --git a/DirectFB-1.4.0/docs/DirectFB Core Architecture.pdf b/DirectFB-1.4.0/docs/DirectFB Core Architecture.pdf
new file mode 100644
index 0000000..3c5fbc4
Binary files /dev/null and b/DirectFB-1.4.0/docs/DirectFB Core Architecture.pdf differ
diff --git a/DirectFB-1.4.0/docs/DirectFB Core Architecture.sxi b/DirectFB-1.4.0/docs/DirectFB Core Architecture.sxi
new file mode 100644
index 0000000..22ed034
Binary files /dev/null and b/DirectFB-1.4.0/docs/DirectFB Core Architecture.sxi differ
diff --git a/DirectFB-1.4.0/docs/GeneFX.odp b/DirectFB-1.4.0/docs/GeneFX.odp
new file mode 100644
index 0000000..550cff6
Binary files /dev/null and b/DirectFB-1.4.0/docs/GeneFX.odp differ
diff --git a/DirectFB-1.4.0/docs/GeneFX.pdf b/DirectFB-1.4.0/docs/GeneFX.pdf
new file mode 100644
index 0000000..6d16812
Binary files /dev/null and b/DirectFB-1.4.0/docs/GeneFX.pdf differ
diff --git a/DirectFB-1.4.0/docs/Makefile.in b/DirectFB-1.4.0/docs/Makefile.in
index e139797..653a931 100644
--- a/DirectFB-1.4.0/docs/Makefile.in
+++ b/DirectFB-1.4.0/docs/Makefile.in
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.10.1 from Makefile.am.
+# Makefile.in generated by automake 1.10 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
+# 2003, 2004, 2005, 2006  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -107,7 +107,6 @@ DIRECT_BUILD_NETWORK = @DIRECT_BUILD_NETWORK@
 DIRECT_BUILD_STDBOOL = @DIRECT_BUILD_STDBOOL@
 DIRECT_BUILD_TEXT = @DIRECT_BUILD_TEXT@
 DIRECT_BUILD_TRACE = @DIRECT_BUILD_TRACE@
-DSYMUTIL = @DSYMUTIL@
 DYNLIB = @DYNLIB@
 ECHO = @ECHO@
 ECHO_C = @ECHO_C@
@@ -155,7 +154,6 @@ MAN2HTML = @MAN2HTML@
 MKDIR_P = @MKDIR_P@
 MODULEDIR = @MODULEDIR@
 MODULEDIRNAME = @MODULEDIRNAME@
-NMEDIT = @NMEDIT@
 OBJEXT = @OBJEXT@
 OSX_LIBS = @OSX_LIBS@
 PACKAGE = @PACKAGE@
@@ -469,8 +467,8 @@ ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
 	unique=`for i in $$list; do \
 	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
 	  done | \
-	  $(AWK) '{ files[$$0] = 1; nonemtpy = 1; } \
-	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
 	mkid -fID $$unique
 tags: TAGS
 
@@ -495,8 +493,8 @@ TAGS: tags-recursive $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
 	unique=`for i in $$list; do \
 	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
 	  done | \
-	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
-	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
 	if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
 	  test -n "$$unique" || unique=$$empty_fix; \
 	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
@@ -506,12 +504,13 @@ ctags: CTAGS
 CTAGS: ctags-recursive $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
 		$(TAGS_FILES) $(LISP)
 	tags=; \
+	here=`pwd`; \
 	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
 	unique=`for i in $$list; do \
 	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
 	  done | \
-	  $(AWK) '{ files[$$0] = 1; nonempty = 1; } \
-	      END { if (nonempty) { for (i in files) print i; }; }'`; \
+	  $(AWK) '    { files[$$0] = 1; } \
+	       END { for (i in files) print i; }'`; \
 	test -z "$(CTAGS_ARGS)$$tags$$unique" \
 	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
 	     $$tags $$unique
diff --git a/DirectFB-1.4.0/docs/README.mga-tv b/DirectFB-1.4.0/docs/README.mga-tv
new file mode 100644
index 0000000..ec81b6a
--- /dev/null
+++ b/DirectFB-1.4.0/docs/README.mga-tv
@@ -0,0 +1,533 @@
+	DIRECTFB MATROX G400/G450/G550 TV-OUT -HOWTO
+
+	Pekka Tiittanen, peti at kauhajoki.fi
+
+	Ville Syrjälä, syrjala at sci.fi
+
+  	v0.1, 5 April 2003
+
+  	This document describes how to set up tv-output with DirectFB when using
+  	Matrox Dualhead hardware. It tries to be an easy guide to set up DirectFB and
+	possible software alongside it.
+	
+  	-----------------------------------------------------------------------------
+
+	Table of Contents
+
+
+
+	1.	Introduction
+	
+		1.1 Copyright of this document
+	  	1.2 Where to get this document
+	  		1.2.1 Version history
+		1.3 Acknowledgments
+	  	1.4 Disclaimer
+		
+  	2. Hardware requirements
+
+  	3. Software requirements
+
+  	4. System configuration
+
+	  	4.1 Unpacking sources and patching the kernel
+	  	4.2 Configuring and compiling the kernel
+	  	4.3 Installing new kernel and modules
+	  	4.4 Installing DirectFB
+	
+  	5. Applications
+	
+	  	5.1 Compiling MPlayer
+
+	6. How to make it even better.
+
+  	-----------------------------------------------------------------------------
+
+  	1. Introduction
+
+	If you own a Matrox G400/450/550 video card with dualhead, you
+	probably know the feature Matrox calls "DVDMax". The main purpose 
+	of this feature is to display a videofile that is playing to a television.
+	That videofile can be almost anything mpeg, avi or a DVD (but not
+	Quicktime or RealMedia AFAIK).
+
+	Hre's the  part you may know if you're reading this document. Matrox 
+	has been  reluctant of giving information how to use this feature in 
+	other OS's,  for example they have given information on how to use 
+	this feature with a G400 card but not with G450 or G550. Luckily we
+	have people who are capable to figure these things out. I'm refering 
+	to Ville Syrjälä who has contributed to the DirectFB project with
+	code that enables the use of tv-out with these cards. Some of the 
+	main benefits of DirectFB include:
+	
+	- interlaced picture
+	- 720x576 50Hz PAL and 720x480 60Hz NTSC
+	- ARGB1555, RGB16, RGB32, ARGB, YUY2, UYVY, I420, YV12 pixel formats
+	- hardware blended sub-picure in I420 and YV12 modes
+	- brightness, contrast, hue, saturation adjustments
+	- no more tweaking sessions with fbset to get the image centered :)
+
+	On the downside is that you are not able to use your console while
+	watching movies. And probably your X Window System is not going
+	to work properly when booting to kernel with all the patches. (atleast
+	i'm not able to do that, but when I'm watching a movie, I don't need
+	X.)
+	
+	This document is intended to people with atleast some knowledge on 
+	how to configure and compile the Linux kernel and other 	software. I
+	do not recommend it to newbies or people who are not comfortable
+	and sure of what they are doing. If you feel uncertain about your skills, 
+	please do not continue further. But if you feel that you are able to do
+	things described above, you can continue reading.
+	
+	Please read this document fully through before actually doing anything.
+	
+	Also note that I won't always say should you do some operations as
+	root or not. Some operations do need root privileges.
+	
+	All notes, complaints, corrections, money, hardware or broadband
+	Internet connection donations are welcome.
+	
+	
+	1.1 Copyright of this document
+	
+	This HOWTO is copyrighted 2003 Pekka Tiittanen, Ville Syrjälä.
+	
+	Unless otherwise stated, Linux HOWTO documents are copyrighted by
+  	their respective authors. Linux HOWTO documents may be reproduced 
+	and distributed in whole or in part, in any medium physical or electronic,
+  	as long as this copyright notice is retained on all copies. Commercial
+  	redistribution is allowed and encouraged; however, the author would
+  	like to be notified of any such distributions.
+
+  	All translations, derivative works, or aggregate works incorporating any 
+	Linux HOWTO documents must be covered under this copyright notice.
+  	That is, you may not produce a derivative work from a HOWTO and impose
+  	additional restrictions on its distribution. Exceptions to these rules
+  	may be granted under certain conditions; please contact the Linux
+  	HOWTO co-ordinator at the address given below.
+  	In short, we wish to promote dissemination of this information through
+  	as many channels as possible. However, we do wish to retain copyright
+  	on the HOWTO documents, and would like to be notified of any plans to
+  	redistribute the HOWTOs.
+
+
+	1.2 Where to get this document
+	
+	The most recent official document can be obtained from here:
+	
+	plain-text:
+	
+		http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto
+	
+		http://www.kauhajoki.fi/~peti/directfb/matrox-tv-out-howto
+
+	gzipped, plain text:
+
+		http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto.gz
+
+		http://www.kauhajoki.fi/~peti/directfb/matrox-tv-out-howto.gz
+	
+	
+	1.2.1 Version history
+	
+	v0.1, 5 April 2003
+		
+	o Initial release. May contain a LOT of mistakes and errors.
+
+
+	1.3 Acknowledgements
+	
+	All copyrights are owned by their owners, unless specifically noted
+  	otherwise.  Use of a term in this document should not be regarded 
+	as affecting the validity of any trademark or service mark.
+		
+	Thank you for Ville Syrjälä for making this possible and for writing 
+	the  original document. Thanks also go to all the people behind the
+	DirectFB project and to everyone who have contributed making this
+	possible.
+	
+	MPlayer team needs also a big thank you, without them we wouldn't
+	have MPlayer.
+	
+	
+	1.4 Disclaimer
+	
+	Use the information in this document at your own risk. I disavow any
+  	potential liability for the contents of this document. Use of the
+  	concepts, examples, and/or other content of this document is entirely
+  	at your own risk. This document most likely has some serious errors
+  	but I think that it is better than nothing.
+  	
+  	  	
+  	2. Hardware requirements
+  	
+	You obviously need a Matrox G400, G450 or G550 with DualHead capability, 
+	all proper cables and a television :-) to take full advantage of this HOWTO.
+	
+	
+	3. Software requirements
+	
+	The Linux kernel source, preferably most recent one or atleast 2.4.20.
+
+	DirectFB version 0.9.16 or later. (NOTE! version 0.9.17 has a serious 
+	bug and you probably can't use the tv-out -feature in that version. 
+	DO NOT USE IT). Or you can use it and get the patches from Ville's site
+		
+	MPlayer 0.90*, if you're planning to watch movies. Which you obviously are
+	trying to do.
+	
+	
+	4. System configuration
+	
+	4.1 Unpacking sources and patching kernel
+	
+	I strongly recommend that you use a different kernel source tree for 
+	this, because you have to apply couple of patches to the kernel and
+	that may interfere with other patches that you've earlier applied. 
+	
+	It isn't necessary to patch the kernel, but it's recommended, because you
+	get many features that otherwise won't be available.
+	
+	Unpack the kernel-package and DirectFB source package where ever you 
+	like. After unpacking, there's a subdirectory in the DirectFB named 'patches',
+	there you'll find three patches.
+	
+		fusion-full-linux-2.4.20.patch.bz2
+		matroxfb-32mb.diff.bz2
+		matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2
+	
+	Apply these patches, while you are in the root of the kernel sources (eg.
+	/usr/src/linux-directfb/linux-2.4.20/). There are a couple of ways to do this,
+	either by first copying these files to the root of kernel sources or just
+	going there and applying from there. You can do like this:
+	
+	--------------------------------------------------------------------------------------------
+	NOTE! At the moment of writing it seems that the patchfile 
+	'matroxfb-32mb.diff.bz2' that is delivered with the DirectFB 0.9.17
+	has a bug in it and it requires a bit of  tweaking to get it to apply. 
+	Here are the instructions: (Or go and get a working one from Ville's site.)
+	
+		'bunzip2 matroxfb-32mb.diff.bz2'
+		
+	now edit the file 'matroxfb-32mb.diff' with your favorite editor and replace the
+	following two lines at the top of the file:
+	
+	--- matroxfb_base.c.old 2002-11-14 20:52:42.000000000 +0100
+	+++ matroxfb_base.c     2002-11-14 20:53:00.000000000 +0100
+
+	with these two lines:
+	
+	--- linux/drivers/video/matrox/matroxfb_base.c.old      2002-11-14 20:52:42.000000000 +0100
+	+++ linux/drivers/video/matrox/matroxfb_base.c  2002-11-14 20:53:00.000000000 +0100
+
+	And apply the patch with this command:
+	
+		patch -p1 < matroxfb-32mb.diff 
+		
+	and it should say 'patching file drivers/video/matrox/matroxfb_base.c'
+	--------------------------------------------------------------------------------------------
+
+	To apply the other two patches do this:
+	
+		'bzcat fusion-full-linux-2.4.20.patch.bz2 | patch -p1'
+		'bzcat matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2 | patch -p1'		
+	
+	Patch-command outputs some lines saying 'patching file ...', if 
+	everything worked fine.
+
+	Here's a short description of what these patches do.
+	
+	fusion-full-linux-2.4.20.patch.bz2:
+	Enables the use of multiple DirectFB applications.
+	
+	matroxfb-32mb.diff.bz2:
+	Use this patch if you have a 32MB card and you want DirectFB to use
+	all the memory instead of just 16MB. It won't hurt anything with a
+	16MB card either.
+	
+	matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2:
+	This patch enables IRQ based vblank waiting. Make sure your card has
+	an IRQ assigned to it. You may have an option in the BIOS setup for
+	this.
+		
+
+	4.2 Configuring and compiling kernel
+	
+	Here I will only tell you what options to compile to get the framebuffer
+	and directfb working, you must also select many other things depending 
+	on your system. IDE-support, etc. Remember to select them also.
+	
+	I like to use 'make menuconfig' when selecting what to compile, I 
+	recommend you also use it.
+	
+	If not otherwise mentioned, these options are for all the cards (G400, 
+	G450 and G550). Also these options can be either modules or compiled 
+	directly in your kernel.
+	
+	Enable these:
+	
+	Processor type and features  --->
+		[*] MTRR (Memory Type Range Register) support
+	
+	Code maturity level options  --->
+		Prompt for development and/or incomplete code/drivers
+		
+	Character devices  --->
+		Fusion Kernel Device (NEW)
+	
+	-------------------------------------------------------------
+	For G400 only:
+
+	Character devices  --->
+		I2C support  --->
+			I2C support
+			I2C bit-banging interfaces (NEW)
+			I2C device interface (NEW)
+			I2C /proc interface (required for hardware sensors) (NEW)	
+	-------------------------------------------------------------
+	
+	Console drivers  --->
+		Frame-buffer support  --->
+			Support for frame buffer devices (EXPERIMENTAL) (NEW)
+			Matrox acceleration (EXPERIMENTAL) (NEW)
+			G100/G200/G400/G450/G550 support (NEW)
+			
+	This is only for G450/G550:
+			G450/G550 second head support (mandatory for G550)		
+			
+	This is only for G400:
+			Matrox I2C support (NEW)
+			
+	And you _must_ enable this:
+	
+		File systems  --->
+			Virtual memory file system support (former shm fs)
+			
+	NOTE! Some of these options aren't available until you have enabled
+	some other options. For example 'Matrox I2C support (NEW)' is  available 
+	after you've enabled all the options under the 'I2C support  --->'.
+	
+	NOTE! Do not build 'G400 second head support' into the kernel. It 
+	will prevent DirectFB from controlling the TV-out. If you really need
+	it make it a module so you can remove it before using DirectFB.
+	
+	NOTE! You must also create the fusion device file:
+
+		'mknod /dev/fusion c 10 23'
+	
+	After you've enable all the options you need, you can compile the kernel
+	(Do this in '/usr/src/linux-direcfb/linux-x.x.xx/'):
+	
+		'make dep; make bzImage modules'
+	
+	Depending on the speed of your machine this can take from a few minutes 
+	to about 30 minutes. Now it's a good time to go and make some coffee or 
+	tea (or whaterver you prefer to drink).
+	
+	
+	4.3 Installing new kernel and modules
+	
+	After kernel has compiled, you can go ahead and install it (On my 
+	system I copy it to /boot, your system may differ. x.x.xx represents 
+	the kernel version number):
+
+		'cp /usr/src/linux-directfb/linux-x.x.xx/arch/i386/boot/bzImage /boot/vmlinuz-directfb-1'
+			
+	Make a backup of your existing modules:
+	
+		'cp -a /lib/modules/x.x.xx/ /lib/modules/x.x.xx-backup'
+			
+	After that install modules (Do this in '/usr/src/linux-direcfb/linux-x.x.xx/'):
+	
+		'make modules_install'
+			
+	Now it's time to edit '/etc/lilo.conf' and add the new kernel there:
+	
+		image=/boot/vmlinuz-directfb-1
+		label=DirectFB
+		read-only						# read-only for ext2/3, read-write for reiserfs
+
+	Remember to run command 'lilo' after editing lilo.conf.
+	
+	Also add this row to '/etc/fstab' if it isn't there already:
+	
+		tmpfs           /dev/shm        tmpfs   defaults                                0       0
+		
+	Make sure you have the proper /dev/i2c-N device file in place. After 
+	loading i2c-matroxfb module you should see MAVEN in /proc/bus/i2c. 
+	You must have the corresponding device file. To create these files 
+	use:
+   	
+		'mknod /dev/i2c-N c 89 N' where N is 0,1,2...
+   	
+	The number might change depending on the order you load i2c modules
+   	so you may want to create some extra files.
+	
+	Now everything should be in order, so boot to the framebuffer enabled
+	kernel.
+	
+	
+	4.4 Installing DirectFB
+	
+	Compiling DirectFB should be very straight-forward operation.
+	
+		'cd /usr/src/DirectFB-x.x.xx'
+		
+		'./configure --enable-multi'
+		
+		'make'
+		
+		'make install'
+		
+	Use the option '--enable-multi' if you applied the fusion-patch.
+	
+	After installing, edit the file '/etc/directfbrc' or '~/.directfbrc' and
+	add these options:
+	
+		matrox-crtc2
+		matrox-tv-standard=pal
+		or
+		matrox-tv-standard=ntsc
+		
+
+	Pal is used in many european countries and ntsc in USA, Canada
+	and Japan, if I remember corretcly. Newer pal-televisions accept
+	also ntsc, but IMO pal gives you better image.
+	
+	You may want to also do a 'ldconfig'.
+	
+	
+	5. Applications
+	
+	5.1 MPlayer
+	
+	First You probably want to have w32codecs and other codecs installed, so
+	take all the packages you want, and install them under '/usr/local' or
+	where ever you want to put them. I recommend that you download
+	w32codecs, rp9codecs and qtcodecs, so you can also view RealMedia
+	and Quicktime formats.
+	
+	When configuring MPlayer, use the DVD specific options if you're planning
+	to watch DVDs.
+	
+	Unpack MPlayer somewhere, go there and use this:
+	
+		'./configure --enable-dvdnav --with-win32libdir=/usr/local/w32libdir \
+		--with-reallibdir=/usr/local/rp9codecs --enable-gui --enable-menu'
+		
+	These are probably the options you want to have. If you want any other
+	options you can get a list of all options with './configure --help'.
+	
+	After configure has finished, you might want to check a couple of things
+	from it's output (this is what it outputs on my machine, you might get
+	different output):
+	
+		Enabled optional drivers:
+    	Input: edl dvdnav mpdvdkit2 vcd
+    	Codecs: qtx libavcodec real dshow/dmo win32 libvorbis libmad liblzo gif
+    	Audio output: esd oss mpegpes(file)
+    	Video output: xvidix vesa gif89a jpeg png mpegpes(file) fbdev aa xmga mga dfbmga directfb
+
+		Disabled optional drivers:
+    	Input: streaming tv-v4l tv-bsdbt848 tv cdda dvdread dvdcss
+    	Codecs: opendivx xvid libdv xanim
+    	Audio output: sgi sun alsa arts dxr2 nas win32 sdl
+    	Video output: bl zr dxr3 dxr2 directx sdl svga ggi tdfxfb 3dfx
+
+	From this output we clearly see, that it has found the qtx, win32 and 
+	real dshow/dmo codecs
+	
+	Now take a closer look at the 'Video output:' at the end of that line
+	it says 'dfbmga direcfb' which means that it has found the DirectFB 
+	installation we did earlier. Good. Also notice that you have to compile
+	mplayer after you've installed new version of DirectFB, but there might
+	be a possibility, that mplayer doesn't always work with the newest
+	version of DirectFB. So you might want to consider the benefits of the
+	new version.
+	
+	If everything is fine:
+	
+		'make'
+		
+	This takes also a while to compile, so do something useful, perhaps
+	you could make your partner (if you have one) happy by washing 
+	the dishes. Who knows, maybe you'll get lucky later... ;)
+	
+	After it has compiled:
+	
+		'make install'
+	
+		'cp etc/input.conf ~/.mplayer/'
+		'cp etc/menu.conf ~/.mplayer/'
+		
+	Remember to create '.mplayer' first if it doesn't exist. MPlayer
+	creates it when you run it for the first time.
+	
+	Now we can give it a go, connect all the cables you want, turn 
+	on your television select the correct channel and type this:
+	
+	(file.avi is the file you want to play.)
+	
+		'mplayer file.avi -vo dfbmga -ao oss -fs' 
+		
+	It should change the resolution on your monitor and output the
+	video to your tv. Now the file should be playing on your tv. If
+	it worked congratulations! If not, you probably missed something.
+	
+	If you want to play a dvd, use this command:
+	
+		'mplayer -dvd 1 -vo dfbmga -ao oss -fs'
+		
+	'-fs' is optional, use it if seems that mplayer is playing the dvd, but
+	the tv is just black. You can also use these options:
+	
+		'mplayer -dvd 1 -vo dfbmga -ao oss -fs -autosync 30 -cache 16384'
+		'mplayer -dvd 1 -vo dfbmga -ao oss -fs -autosync 30 -cache 16384 -framedrop'
+		
+	'-framedrop' does just what it says, it drops frames if playback slows too much.
+	This option is on by default if you use the Matrox DVD Player, so it probably
+	isn't a bad idea to use it also here.
+	
+	'man mplayer' tells you more about it's options.
+	
+	If you play a video file with a small resolution, you may want to use this:
+	
+		'mplayer file.avi -vo dfbmga -ao oss -fs -vsync'
+		
+	And that's it. Hopefully you got it working and this document was any
+	help to you. If you have problems you can always ask me or Ville about
+	them. Just email us and we'll try to help you out.
+	
+	And now if it didn't work out or you noticed that i've done something
+	horribly wrong, please let me know, so I can correct those errors.
+	
+	
+	6. How to make it even better.
+	
+	If you tried out the above, here's something you might like to try. It
+	improves the video playback a LOT and you don't have to use the 
+	-vsync switch anymore. 
+	
+	Go get the CVS-version of DirectFB. Instructions on how to get the
+	CVS-version of DirectFB are at www.directfb.org, developers-section.
+	
+	Go grab these files from Ville Syrjälä's website:
+	
+		dfbmga_update.patch
+		mplayer_triple_option.patch
+		
+	And apply these patches to mplayer 0.90rc5.
+	
+	Compile the CVS-version of DirectFB and MPlayer, use the same options
+	as mentioned above, install and try this:
+	
+		'mplayer -vo dfbmga -ao oss -triple -fs file.avi'
+	
+	You should see a perfect, triple-buffered video file playing on your TV,
+	without any vsync-problems. You don't need to use the -vsync switch
+	anymore, because if you use -triple -vsync, it acts like -double -vsync,
+	but uses a lot more memory.
+	
+	If you don't like messing with CVS-versions of software, you can always
+	wait for the 0.9.18-version of DirectFB scheduled somewhere in the future.
diff --git a/DirectFB-1.4.0/docs/ReferenceMaps.txt b/DirectFB-1.4.0/docs/ReferenceMaps.txt
new file mode 100644
index 0000000..d450c2d
--- /dev/null
+++ b/DirectFB-1.4.0/docs/ReferenceMaps.txt
@@ -0,0 +1,131 @@
+
+This file contains visualizations of the references used
+for life cycle determination.
+
+The job of a reference is to keep a relevant object alive
+as long as it's required to implement a certain functionality.
+
+There are different types of references:
+
+*      Global reference, for Objects using other Objects
+|      (removed during destruction of the using object)
+
+--{    Local reference, for Applications using Objects
+       (removed by the application or by release() in the kernel)
+
+|      Inherit locals, e.g. for "Extensions" to other Objects
+^      (added/removed by adding/removing to/from the other object)
+
+One requirement is that local references should be removable in
+any order without disturbing "functional groups". However, such
+an object group should be destroyed if the last local reference to
+any object of the group is removed.
+
+Cyclic global references are not detected! Inheritance has been
+introduced to solve problems that would have required cyclic globals.
+
+
+
+With Default WM
+----------------
+
+
+  1. DirectFBCreate()
+
+---------{  Layer Context (primary)
+
+
+  2. GetDisplayLayer()
+
+--------{{  Layer Context (primary)
+                     *
+                     |
+                   Layer Region  }---------
+
+
+  3a. EnableCursor()
+
+--------{{  Layer Context (primary)
+              |      *
+              |      |
+              |    Layer Region  }---------
+              |      *
+              ^      |
+            Cursor Window
+
+
+  3b. CreateWindow()
+
+--------{{  Layer Context (primary)
+                     *
+                     |
+                   Layer Region  }---------
+                            *
+                            |
+                          Window  }---------
+
+
+
+
+With Unique WM
+---------------
+
+
+  1. DirectFBCreate()
+
+---------{  Layer Context (primary)
+              |      *
+              |      |
+              |    Layer Region
+              |      *
+              ^      |
+            Unique Context
+
+
+  2. GetDisplayLayer()
+
+--------{{  Layer Context (primary)
+              |      *
+              |      |
+              |    Layer Region  }---------
+              |      *
+              ^      |
+            Unique Context
+
+
+  3a. EnableCursor()
+
+--------{{  Layer Context (primary)
+              |      *       |........
+              |      |               |
+              |    Layer Region  }-- | -------
+              |      *      *        |
+              |      |      |        ^
+              |      |    Cursor Window
+              |      |      *
+              ^      |      |
+            Unique Context  |
+                     *      |
+                     |      ^
+                   Unique Window
+
+
+  3b. CreateWindow()
+
+--------{{  Layer Context (primary)
+              |      *
+              |      |
+              |    Layer Region  }---------
+              |      *      *
+              |      |      |
+              |      |    Window  }---------
+              |      |      *
+              ^      |      |
+            Unique Context  |
+                     *      |
+                     |      ^
+                   Unique Window
+                            *
+                            |
+                            ^
+                   Unique Decoration
diff --git a/DirectFB-1.4.0/docs/direct/DirectList.eps b/DirectFB-1.4.0/docs/direct/DirectList.eps
new file mode 100644
index 0000000..7d9f863
--- /dev/null
+++ b/DirectFB-1.4.0/docs/direct/DirectList.eps
@@ -0,0 +1,392 @@
+%!PS-Adobe-3.0 EPSF-3.0 
+%%BoundingBox: 0 0 575 755
+%%Pages: 0
+%%Creator: Sun Microsystems, Inc.
+%%Title: none
+%%CreationDate: none
+%%LanguageLevel: 2
+%%EndComments
+%%BeginProlog
+%%BeginResource: SDRes
+/b4_inc_state save def
+/dict_count countdictstack def
+/op_count count 1 sub def
+userdict begin
+0 setgray 0 setlinecap 1 setlinewidth 0 setlinejoin 10 setmiterlimit[] 0 setdash newpath
+/languagelevel where {pop languagelevel 1 ne {false setstrokeadjust false setoverprint} if} if
+/bdef {bind def} bind def
+/c {setrgbcolor} bdef
+/l {neg lineto} bdef
+/rl {neg rlineto} bdef
+/lc {setlinecap} bdef
+/lj {setlinejoin} bdef
+/lw {setlinewidth} bdef
+/ml {setmiterlimit} bdef
+/ld {setdash} bdef
+/m {neg moveto} bdef
+/ct {6 2 roll neg 6 2 roll neg 6 2 roll neg curveto} bdef
+/r {rotate} bdef
+/t {neg translate} bdef
+/s {scale} bdef
+/sw {show} bdef
+/gs {gsave} bdef
+/gr {grestore} bdef
+/f {findfont dup length dict begin
+{1 index /FID ne {def} {pop pop} ifelse} forall /Encoding ISOLatin1Encoding def
+currentdict end /NFont exch definefont pop /NFont findfont} bdef
+/p {closepath} bdef
+/sf {scalefont setfont} bdef
+/ef {eofill}bdef
+/pc {closepath stroke}bdef
+/ps {stroke}bdef
+/pum {matrix currentmatrix}bdef
+/pom {setmatrix}bdef
+/bs {/aString exch def /nXOfs exch def /nWidth exch def currentpoint nXOfs 0 rmoveto pum nWidth aString stringwidth pop div 1 scale aString show pom moveto} bdef
+%%EndResource
+%%EndProlog
+%%BeginSetup
+%%EndSetup
+%%Page: 1 1
+%%BeginPageSetup
+%%EndPageSetup
+pum
+0.02833 0.02834 s 
+0 -26640 t
+/tm matrix currentmatrix def
+gs
+tm setmatrix
+-635 -635 t 
+1 1 s 
+635 635 m 20924 635 l 20924 27274 l 635 27274 l 635 635 l eoclip newpath
+1.000 0.601 0.402 c 10795 8255 m  10094 8255 9525 7686 9525 6985 ct 9525 6284 10094 5715 10795 5715 ct 
+11496 5715 12065 6284 12065 6985 ct 12065 7686 11496 8255 10795 8255 ct 10795 8255 l 
+p ef
+0 lw 1 lj 0.003 0.003 0.003 c 10795 8255 m  10094 8255 9525 7686 9525 6985 ct 
+9525 6284 10094 5715 10795 5715 ct 11496 5715 12065 6284 12065 6985 ct 12065 7686 11496 8255 10795 8255 ct 
+10795 8255 l  pc
+gs
+pum
+10134 7263 t
+174 -348 m  174 -99 l  174 -64 178 -42 185 -33 ct 196 -20 209 -14 226 -14 ct 
+261 -14 l  261 0 l  35 0 l  35 -14 l  52 -14 l  63 -14 73 -17 82 -23 ct 91 -28 97 -36 101 -45 ct 
+104 -54 106 -72 106 -99 ct 106 -348 l  32 -348 l  32 -378 l  106 -378 l  106 -403 l 
+106 -440 112 -472 124 -499 ct 136 -525 154 -546 179 -562 ct 204 -578 232 -586 263 -586 ct 
+292 -586 319 -577 343 -558 ct 359 -546 367 -532 367 -516 ct 367 -508 364 -500 356 -493 ct 
+349 -486 342 -482 333 -482 ct 327 -482 320 -484 313 -489 ct 306 -493 298 -503 287 -518 ct 
+277 -533 268 -543 259 -548 ct 251 -554 241 -556 231 -556 ct 218 -556 207 -553 199 -546 ct 
+190 -539 183 -529 180 -515 ct 176 -501 174 -464 174 -405 ct 174 -378 l  271 -378 l 
+271 -348 l  p ef
+401 -587 m  413 -587 423 -583 431 -575 ct 439 -567 443 -557 443 -545 ct 443 -534 439 -524 431 -515 ct 
+423 -507 413 -503 401 -503 ct 390 -503 380 -507 371 -515 ct 363 -524 359 -534 359 -545 ct 
+359 -557 363 -567 371 -575 ct 379 -583 l  389 -587 l  p
+435 -389 m  435 -85 l  435 -61 437 -46 441 -38 ct 444 -30 449 -24 456 -20 ct 
+463 -16 475 -14 493 -14 ct 493 0 l  309 0 l  309 -14 l  328 -14 340 -16 346 -20 ct 
+353 -23 358 -29 361 -38 ct 365 -46 367 -62 367 -85 ct 367 -231 l  367 -272 366 -298 363 -311 ct 
+361 -319 358 -325 354 -329 ct 350 -332 344 -334 337 -334 ct 329 -334 320 -332 309 -328 ct 
+303 -343 l  417 -389 l  p ef
+645 -389 m  645 -304 l  676 -361 709 -389 742 -389 ct 757 -389 770 -384 780 -375 ct 
+790 -366 795 -355 795 -343 ct 795 -332 791 -323 784 -316 ct 777 -308 768 -305 758 -305 ct 
+749 -305 738 -310 726 -319 ct 714 -329 705 -333 699 -333 ct 694 -333 689 -331 683 -325 ct 
+671 -314 658 -295 645 -269 ct 645 -88 l  645 -67 647 -51 653 -40 ct 656 -33 662 -27 671 -22 ct 
+681 -17 694 -14 711 -14 ct 711 0 l  517 0 l  517 -14 l  536 -14 551 -17 560 -23 ct 
+567 -28 572 -35 574 -45 ct 576 -49 576 -63 576 -85 ct 576 -231 l  576 -275 576 -302 574 -310 ct 
+572 -318 569 -324 564 -328 ct 559 -332 553 -334 546 -334 ct 537 -334 528 -332 517 -328 ct 
+513 -343 l  627 -389 l  p ef
+1053 -389 m  1053 -260 l  1040 -260 l  1029 -301 1016 -328 1000 -343 ct 983 -357 962 -365 937 -365 ct 
+918 -365 902 -360 890 -349 ct 878 -339 873 -328 873 -316 ct 873 -300 877 -287 886 -276 ct 
+894 -265 912 -253 938 -240 ct 998 -211 l  1054 -183 1082 -147 1082 -103 ct 1082 -68 1069 -41 1043 -20 ct 
+1017 1 988 11 956 11 ct 932 11 906 7 876 0 ct 867 -3 860 -4 854 -4 ct 848 -4 843 -1 839 5 ct 
+825 5 l  825 -129 l  839 -129 l  847 -90 862 -61 883 -42 ct 905 -22 929 -12 956 -12 ct 
+975 -12 991 -18 1003 -29 ct 1015 -40 1021 -54 1021 -69 ct 1021 -88 1014 -104 1001 -117 ct 
+987 -130 961 -147 921 -166 ct 881 -186 855 -204 842 -220 ct 830 -236 824 -256 824 -280 ct 
+824 -311 834 -337 856 -358 ct 877 -379 905 -389 939 -389 ct 954 -389 972 -386 993 -380 ct 
+1007 -375 1016 -373 1021 -373 ct 1025 -373 1029 -374 1031 -376 ct 1034 -378 1037 -382 1040 -389 ct 
+p ef
+1245 -502 m  1245 -378 l  1333 -378 l  1333 -349 l  1245 -349 l  1245 -104 l 
+1245 -79 1248 -63 1255 -54 ct 1262 -45 1271 -41 1282 -41 ct 1292 -41 1300 -44 1309 -50 ct 
+1317 -55 1324 -64 1329 -75 ct 1345 -75 l  1335 -48 1322 -27 1304 -14 ct 1286 0 1268 6 1249 6 ct 
+1237 6 1224 2 1212 -4 ct 1200 -11 1191 -21 1185 -34 ct 1180 -47 1177 -67 1177 -95 ct 
+1177 -349 l  1117 -349 l  1117 -363 l  1132 -369 1147 -379 1163 -393 ct 1179 -408 1193 -425 1206 -445 ct 
+1212 -455 1221 -474 1232 -502 ct p ef
+pom
+gr
+1.000 0.601 0.402 c 15875 13335 m  15174 13335 14605 12766 14605 12065 ct 
+14605 11364 15174 10795 15875 10795 ct 16576 10795 17145 11364 17145 12065 ct 
+17145 12766 16576 13335 15875 13335 ct 15875 13335 l  p ef
+0.003 0.003 0.003 c 15875 13335 m  15174 13335 14605 12766 14605 12065 ct 14605 11364 15174 10795 15875 10795 ct 
+16576 10795 17145 11364 17145 12065 ct 17145 12766 16576 13335 15875 13335 ct 
+15875 13335 l  pc
+gs
+pum
+14896 12299 t
+225 -324 m  225 -217 l  214 -217 l  205 -250 194 -273 180 -286 ct 167 -298 149 -304 128 -304 ct 
+112 -304 99 -300 89 -291 ct 79 -283 75 -273 75 -263 ct 75 -250 78 -239 86 -230 ct 
+93 -220 107 -210 129 -200 ct 179 -175 l  226 -153 249 -123 249 -86 ct 249 -57 238 -34 217 -16 ct 
+195 0 171 9 144 9 ct 124 9 102 6 78 0 ct 70 -2 64 -4 59 -4 ct 54 -4 50 -1 47 4 ct 
+35 4 l  35 -107 l  47 -107 l  53 -75 65 -51 83 -35 ct 102 -18 122 -10 144 -10 ct 
+160 -10 173 -15 183 -24 ct 193 -33 198 -45 198 -58 ct 198 -74 193 -87 181 -98 ct 
+170 -108 148 -122 115 -139 ct 82 -155 60 -170 49 -183 ct 39 -196 34 -213 34 -233 ct 
+34 -259 43 -281 61 -298 ct 78 -315 101 -324 130 -324 ct 142 -324 157 -321 175 -316 ct 
+186 -313 194 -311 198 -311 ct 202 -311 205 -312 207 -313 ct 209 -315 211 -319 214 -324 ct 
+p ef
+350 -196 m  349 -149 361 -113 384 -86 ct 407 -59 434 -46 465 -46 ct 485 -46 503 -52 518 -63 ct 
+534 -74 546 -94 557 -121 ct 567 -114 l  563 -83 549 -54 525 -29 ct 502 -3 473 9 438 9 ct 
+401 9 368 -5 341 -34 ct 314 -64 301 -103 301 -153 ct 301 -207 314 -249 342 -279 ct 
+370 -309 405 -324 446 -324 ct 482 -324 511 -313 533 -290 ct 556 -266 567 -235 567 -196 ct 
+p
+350 -216 m  496 -216 l  494 -236 492 -250 488 -259 ct 483 -272 474 -282 463 -289 ct 
+451 -296 439 -300 427 -300 ct 408 -300 391 -293 376 -278 ct 361 -263 l  352 -242 l 
+p ef
+877 -119 m  869 -78 852 -46 827 -23 ct 803 -1 775 9 745 9 ct 709 9 678 -5 652 -35 ct 
+625 -65 612 -106 612 -157 ct 612 -206 626 -247 656 -278 ct 685 -309 721 -324 762 -324 ct 
+793 -324 818 -316 838 -300 ct 858 -283 868 -266 868 -248 ct 868 -240 866 -233 860 -227 ct 
+854 -222 846 -219 836 -219 ct 823 -219 813 -223 806 -232 ct 802 -237 799 -246 798 -260 ct 
+797 -273 792 -284 784 -291 ct 776 -298 765 -301 751 -301 ct 728 -301 709 -293 695 -276 ct 
+677 -253 667 -223 667 -186 ct 667 -149 677 -116 695 -87 ct 714 -58 739 -44 770 -44 ct 
+792 -44 813 -51 831 -67 ct 843 -77 855 -96 867 -124 ct p ef
+1082 -324 m  1129 -324 1168 -306 1197 -270 ct 1221 -239 1234 -203 1234 -163 ct 
+1234 -135 1227 -106 1213 -77 ct 1200 -48 1181 -27 1157 -12 ct 1134 2 1107 9 1078 9 ct 
+1030 9 993 -9 965 -47 ct 941 -79 929 -114 929 -154 ct 929 -183 936 -212 951 -240 ct 
+965 -269 984 -290 1007 -304 ct 1031 -317 l  1056 -324 l  p
+1071 -302 m  1059 -302 1047 -298 1034 -291 ct 1022 -284 1012 -271 1005 -253 ct 
+997 -235 993 -211 993 -183 ct 993 -137 1002 -97 1021 -64 ct 1039 -31 1063 -14 1093 -14 ct 
+1115 -14 1133 -23 1148 -42 ct 1162 -60 1170 -92 1170 -137 ct 1170 -193 1157 -237 1133 -269 ct 
+1117 -291 l  1096 -302 l  p ef
+1375 -257 m  1412 -302 1448 -324 1481 -324 ct 1498 -324 1513 -320 1526 -311 ct 
+1538 -303 1548 -288 1555 -269 ct 1560 -255 1563 -234 1563 -205 ct 1563 -71 l 
+1563 -51 1564 -37 1568 -30 ct 1570 -24 1574 -20 1580 -17 ct 1585 -14 1596 -12 1611 -12 ct 
+1611 0 l  1455 0 l  1455 -12 l  1462 -12 l  1476 -12 1486 -14 1492 -19 ct 
+1498 -23 1502 -30 1505 -38 ct 1505 -42 1506 -53 1506 -71 ct 1506 -200 l  1506 -229 1502 -249 1495 -262 ct 
+1487 -275 1475 -282 1457 -282 ct 1430 -282 1403 -267 1375 -237 ct 1375 -71 l 
+1375 -49 1377 -36 1379 -31 ct 1382 -25 1387 -20 1392 -17 ct 1398 -13 1410 -12 1427 -12 ct 
+1427 0 l  1271 0 l  1271 -12 l  1278 -12 l  1294 -12 1305 -16 1310 -24 ct 
+1316 -32 1319 -48 1319 -71 ct 1319 -188 l  1319 -226 1318 -249 1316 -257 ct 
+1314 -265 1312 -271 1308 -274 ct 1305 -277 1300 -278 1294 -278 ct 1287 -278 1280 -277 1271 -273 ct 
+1266 -286 l  1361 -324 l  1375 -324 l  p ef
+1861 -35 m  1846 -19 1831 -7 1816 0 ct 1801 6 1786 9 1769 9 ct 1734 9 1704 -4 1678 -33 ct 
+1653 -62 1640 -99 1640 -144 ct 1640 -189 1654 -231 1683 -268 ct 1711 -306 1748 -324 1792 -324 ct 
+1820 -324 1843 -316 1861 -298 ct 1861 -356 l  1861 -392 1860 -414 1859 -423 ct 
+1857 -431 1854 -436 1851 -439 ct 1847 -442 1842 -444 1837 -444 ct 1831 -444 1823 -442 1813 -438 ct 
+1809 -450 l  1903 -489 l  1918 -489 l  1918 -124 l  1918 -88 1919 -65 1921 -57 ct 
+1922 -49 1925 -43 1929 -40 ct 1933 -37 1937 -35 1942 -35 ct 1948 -35 1957 -37 1967 -41 ct 
+1971 -29 l  1877 9 l  1861 9 l  p
+1861 -59 m  1861 -222 l  1860 -237 1856 -251 1849 -264 ct 1842 -277 1833 -287 1821 -293 ct 
+1810 -300 1799 -303 1788 -303 ct 1768 -303 1750 -294 1734 -276 ct 1713 -252 1703 -217 1703 -171 ct 
+1703 -125 1713 -89 1733 -65 ct 1753 -40 1776 -28 1801 -28 ct 1822 -28 l  1842 -38 l 
+p ef
+pom
+gr
+0.003 0.503 0.003 c 12700 6985 m  12965 7516 l  13231 7250 l  12700 6985 l 
+p ef
+15856 10178 m  13001 7322 l  13037 7286 l  15893 10141 l  15856 10178 l 
+p ef
+1.000 0.003 0.003 c 13970 11430 m  13704 10898 l  13438 11164 l  13970 11430 l 
+p ef
+11448 8871 m  13668 11092 l  13632 11128 l  11411 8908 l  11448 8871 l 
+p ef
+1.000 0.601 0.402 c 10795 18415 m  10094 18415 9525 17846 9525 17145 ct 9525 16444 10094 15875 10795 15875 ct 
+11496 15875 12065 16444 12065 17145 ct 12065 17846 11496 18415 10795 18415 ct 
+10795 18415 l  p ef
+0.003 0.003 0.003 c 10795 18415 m  10094 18415 9525 17846 9525 17145 ct 9525 16444 10094 15875 10795 15875 ct 
+11496 15875 12065 16444 12065 17145 ct 12065 17846 11496 18415 10795 18415 ct 
+10795 18415 l  pc
+gs
+pum
+10134 17379 t
+113 -418 m  113 -315 l  187 -315 l  187 -291 l  113 -291 l  113 -86 l 
+113 -66 116 -52 122 -45 ct 128 -38 135 -34 144 -34 ct 152 -34 159 -37 166 -41 ct 
+174 -46 179 -53 183 -62 ct 196 -62 l  188 -40 177 -23 162 -11 ct 148 0 133 5 117 5 ct 
+106 5 96 2 86 -3 ct 76 -9 68 -17 64 -28 ct 59 -39 56 -56 56 -79 ct 56 -291 l  6 -291 l 
+6 -302 l  19 -307 32 -316 45 -328 ct 58 -340 70 -354 80 -371 ct 86 -379 93 -395 102 -418 ct 
+p ef
+313 -489 m  313 -258 l  339 -286 359 -304 374 -312 ct 389 -320 404 -324 418 -324 ct 
+436 -324 452 -319 465 -309 ct 477 -299 487 -284 493 -263 ct 498 -248 500 -221 500 -182 ct 
+500 -71 l  500 -51 501 -37 505 -30 ct 507 -24 511 -20 516 -17 ct 522 -14 532 -12 547 -12 ct 
+547 0 l  392 0 l  392 -12 l  399 -12 l  414 -12 424 -14 429 -19 ct 435 -23 439 -30 442 -38 ct 
+442 -42 443 -53 443 -71 ct 443 -182 l  443 -217 441 -239 437 -250 ct 434 -261 428 -269 420 -274 ct 
+412 -280 403 -282 392 -282 ct 381 -282 369 -279 357 -274 ct 345 -268 330 -256 313 -237 ct 
+313 -71 l  313 -49 314 -36 317 -30 ct 319 -25 324 -21 330 -17 ct 337 -14 348 -12 364 -12 ct 
+364 0 l  208 0 l  208 -12 l  222 -12 233 -14 241 -18 ct 245 -21 249 -25 252 -32 ct 
+255 -38 256 -51 256 -71 ct 256 -356 l  256 -392 255 -414 253 -423 ct 252 -431 249 -436 245 -439 ct 
+242 -442 237 -444 231 -444 ct 226 -444 219 -442 208 -438 ct 203 -450 l  297 -489 l 
+p ef
+652 -489 m  661 -489 670 -486 676 -479 ct 683 -472 687 -464 687 -454 ct 687 -445 683 -436 676 -429 ct 
+670 -423 661 -419 652 -419 ct 642 -419 634 -423 627 -429 ct 620 -436 617 -445 617 -454 ct 
+617 -464 620 -472 627 -479 ct 634 -486 l  642 -489 l  p
+680 -324 m  680 -71 l  680 -51 682 -38 685 -31 ct 687 -25 692 -20 697 -17 ct 
+703 -14 713 -12 728 -12 ct 728 0 l  575 0 l  575 -12 l  590 -12 601 -13 606 -16 ct 
+611 -19 615 -24 619 -31 ct 622 -38 623 -51 623 -71 ct 623 -192 l  623 -226 622 -249 620 -259 ct 
+618 -266 616 -271 612 -274 ct 609 -277 604 -278 598 -278 ct 592 -278 584 -277 575 -273 ct 
+570 -286 l  665 -324 l  p ef
+859 -324 m  859 -253 l  885 -300 912 -324 940 -324 ct 953 -324 963 -320 971 -313 ct 
+980 -305 984 -296 984 -286 ct 984 -277 981 -269 975 -263 ct 969 -257 962 -254 953 -254 ct 
+945 -254 936 -258 926 -266 ct 916 -274 909 -278 904 -278 ct 900 -278 896 -275 891 -271 ct 
+880 -261 870 -246 859 -224 ct 859 -73 l  859 -56 861 -43 865 -34 ct 868 -27 874 -22 881 -18 ct 
+889 -14 900 -12 914 -12 ct 914 0 l  752 0 l  752 -12 l  768 -12 780 -14 788 -19 ct 
+794 -23 798 -29 800 -37 ct 801 -41 802 -52 802 -70 ct 802 -193 l  802 -229 801 -251 800 -258 ct 
+798 -265 796 -270 791 -274 ct 787 -277 782 -278 777 -278 ct 769 -278 761 -277 752 -273 ct 
+749 -286 l  844 -324 l  p ef
+1226 -35 m  1211 -19 1196 -7 1181 0 ct 1166 6 1151 9 1134 9 ct 1099 9 1069 -4 1043 -33 ct 
+1018 -62 1005 -99 1005 -144 ct 1005 -189 1019 -231 1048 -268 ct 1076 -306 1113 -324 1157 -324 ct 
+1185 -324 1208 -316 1226 -298 ct 1226 -356 l  1226 -392 1225 -414 1224 -423 ct 
+1222 -431 1219 -436 1216 -439 ct 1212 -442 1207 -444 1202 -444 ct 1196 -444 1188 -442 1178 -438 ct 
+1174 -450 l  1268 -489 l  1283 -489 l  1283 -124 l  1283 -88 1284 -65 1286 -57 ct 
+1287 -49 1290 -43 1294 -40 ct 1298 -37 1302 -35 1307 -35 ct 1313 -35 1322 -37 1332 -41 ct 
+1336 -29 l  1242 9 l  1226 9 l  p
+1226 -59 m  1226 -222 l  1225 -237 1221 -251 1214 -264 ct 1207 -277 1198 -287 1186 -293 ct 
+1175 -300 1164 -303 1153 -303 ct 1133 -303 1115 -294 1099 -276 ct 1078 -252 1068 -217 1068 -171 ct 
+1068 -125 1078 -89 1098 -65 ct 1118 -40 1141 -28 1166 -28 ct 1187 -28 l  1207 -38 l 
+p ef
+pom
+gr
+1.000 0.601 0.402 c 5715 13335 m  5014 13335 4445 12766 4445 12065 ct 4445 11364 5014 10795 5715 10795 ct 
+6416 10795 6985 11364 6985 12065 ct 6985 12766 6416 13335 5715 13335 ct 5715 13335 l 
+p ef
+0.003 0.003 0.003 c 5715 13335 m  5014 13335 4445 12766 4445 12065 ct 4445 11364 5014 10795 5715 10795 ct 
+6416 10795 6985 11364 6985 12065 ct 6985 12766 6416 13335 5715 13335 ct 5715 13335 l 
+pc
+gs
+pum
+5133 12343 t
+156 -587 m  156 -85 l  156 -61 158 -46 161 -38 ct 165 -30 170 -24 177 -20 ct 
+184 -16 198 -14 217 -14 ct 217 0 l  32 0 l  32 -14 l  49 -14 61 -16 67 -20 ct 
+74 -23 79 -29 82 -38 ct 86 -46 87 -62 87 -85 ct 87 -429 l  87 -471 87 -498 85 -507 ct 
+83 -517 80 -524 75 -527 ct 71 -531 66 -533 59 -533 ct 52 -533 43 -531 32 -526 ct 
+25 -541 l  137 -587 l  p ef
+469 -54 m  431 -24 406 -7 396 -2 ct 381 4 366 7 349 7 ct 323 7 301 -1 284 -19 ct 
+267 -36 259 -60 259 -89 ct 259 -108 263 -124 271 -137 ct 282 -156 302 -173 330 -190 ct 
+358 -206 404 -227 469 -250 ct 469 -265 l  469 -303 463 -329 451 -343 ct 439 -357 422 -364 399 -364 ct 
+382 -364 368 -359 358 -350 ct 347 -340 342 -330 342 -318 ct 343 -294 l  343 -281 340 -271 333 -264 ct 
+327 -257 318 -254 308 -254 ct 298 -254 289 -258 283 -265 ct 276 -272 273 -282 273 -294 ct 
+273 -318 285 -339 309 -359 ct 334 -379 368 -389 412 -389 ct 445 -389 473 -383 494 -372 ct 
+510 -364 522 -350 530 -332 ct 535 -320 537 -296 537 -259 ct 537 -131 l  537 -95 538 -73 540 -65 ct 
+541 -56 543 -51 546 -48 ct 550 -45 553 -44 557 -44 ct 562 -44 566 -45 569 -47 ct 
+575 -51 586 -61 602 -77 ct 602 -54 l  572 -13 542 7 514 7 ct 500 7 490 2 482 -6 ct 
+474 -15 l  470 -31 l  p
+469 -81 m  469 -225 l  428 -209 401 -197 389 -190 ct 367 -178 351 -165 342 -152 ct 
+333 -139 328 -124 328 -109 ct 328 -89 334 -72 346 -59 ct 358 -46 371 -40 387 -40 ct 
+408 -40 l  435 -53 l  p ef
+867 -389 m  867 -260 l  854 -260 l  843 -301 830 -328 814 -343 ct 797 -357 776 -365 751 -365 ct 
+732 -365 716 -360 704 -349 ct 692 -339 687 -328 687 -316 ct 687 -300 691 -287 700 -276 ct 
+708 -265 726 -253 752 -240 ct 812 -211 l  868 -183 896 -147 896 -103 ct 896 -68 883 -41 857 -20 ct 
+831 1 802 11 770 11 ct 746 11 720 7 690 0 ct 681 -3 674 -4 668 -4 ct 662 -4 657 -1 653 5 ct 
+639 5 l  639 -129 l  653 -129 l  661 -90 676 -61 697 -42 ct 719 -22 743 -12 770 -12 ct 
+789 -12 805 -18 817 -29 ct 829 -40 835 -54 835 -69 ct 835 -88 828 -104 815 -117 ct 
+801 -130 775 -147 735 -166 ct 695 -186 669 -204 656 -220 ct 644 -236 638 -256 638 -280 ct 
+638 -311 648 -337 670 -358 ct 691 -379 719 -389 753 -389 ct 768 -389 786 -386 807 -380 ct 
+821 -375 830 -373 835 -373 ct 839 -373 843 -374 845 -376 ct 848 -378 851 -382 854 -389 ct 
+p ef
+1059 -502 m  1059 -378 l  1147 -378 l  1147 -349 l  1059 -349 l  1059 -104 l 
+1059 -79 1062 -63 1069 -54 ct 1076 -45 1085 -41 1096 -41 ct 1106 -41 1114 -44 1123 -50 ct 
+1131 -55 1138 -64 1143 -75 ct 1159 -75 l  1149 -48 1136 -27 1118 -14 ct 1100 0 1082 6 1063 6 ct 
+1051 6 1038 2 1026 -4 ct 1014 -11 1005 -21 999 -34 ct 994 -47 991 -67 991 -95 ct 
+991 -349 l  931 -349 l  931 -363 l  946 -369 961 -379 977 -393 ct 993 -408 1007 -425 1020 -445 ct 
+1026 -455 1035 -474 1046 -502 ct p ef
+pom
+gr
+0.003 0.503 0.003 c 15875 13970 m  15343 14235 l  15609 14501 l  15875 13970 l 
+p ef
+12681 17126 m  15537 14271 l  15573 14307 l  12718 17163 l  12681 17126 l 
+p ef
+8889 17145 m  8624 16613 l  8358 16879 l  8889 17145 l  p ef
+5733 13951 m  8588 16807 l  8552 16843 l  5696 13988 l  5733 13951 l  p ef
+5715 10160 m  6246 9894 l  5980 9628 l  5715 10160 l  p ef
+8908 7003 m  6052 9858 l  6016 9822 l  8871 6966 l  8908 7003 l  p ef
+1.000 0.003 0.003 c 11430 15240 m  11961 14974 l  11695 14708 l  11430 15240 l 
+p ef
+13988 12718 m  11767 14938 l  11731 14902 l  13951 12681 l  13988 12718 l 
+p ef
+7620 12700 m  7885 13231 l  8151 12965 l  7620 12700 l  p ef
+10141 15258 m  7921 13037 l  7957 13001 l  10178 15221 l  10141 15258 l 
+p ef
+gs
+pum
+7428 3412 t
+0.003 0.003 0.003 c 28 0 m  28 -30 l  71 -30 l  118 -30 152 -45 171 -76 ct 184 -94 190 -135 190 -198 ct 
+190 -922 l  190 -992 182 -1036 166 -1053 ct 145 -1078 113 -1090 71 -1090 ct 
+28 -1090 l  28 -1120 l  485 -1120 l  652 -1120 780 -1101 867 -1063 ct 954 -1025 1025 -962 1078 -873 ct 
+1131 -785 1158 -682 1158 -566 ct 1158 -410 1110 -279 1015 -175 ct 909 -58 747 0 529 0 ct 
+p
+348 -81 m  418 -65 477 -57 524 -57 ct 652 -57 758 -102 843 -192 ct 927 -282 969 -404 969 -558 ct 
+969 -712 927 -834 843 -924 ct 758 -1013 650 -1058 518 -1058 ct 468 -1058 412 -1050 348 -1034 ct 
+p ef
+1443 -1175 m  1466 -1175 1486 -1167 1502 -1151 ct 1518 -1134 1527 -1115 1527 -1092 ct 
+1527 -1068 1518 -1049 1502 -1032 ct 1486 -1015 1466 -1007 1443 -1007 ct 1420 -1007 1400 -1015 1384 -1032 ct 
+1367 -1049 1359 -1068 1359 -1092 ct 1359 -1115 1367 -1134 1383 -1151 ct 1399 -1167 l 
+1419 -1175 l  p
+1512 -779 m  1512 -171 l  1512 -123 1515 -92 1522 -76 ct 1529 -60 1539 -49 1553 -41 ct 
+1566 -33 1591 -29 1627 -29 ct 1627 0 l  1259 0 l  1259 -29 l  1296 -29 1320 -33 1333 -40 ct 
+1346 -47 1356 -59 1363 -76 ct 1371 -92 1374 -124 1374 -171 ct 1374 -462 l  1374 -545 1372 -598 1367 -622 ct 
+1363 -640 1357 -652 1349 -659 ct 1341 -666 1329 -669 1315 -669 ct 1299 -669 1281 -665 1259 -657 ct 
+1247 -686 l  1475 -779 l  p ef
+1933 -779 m  1933 -609 l  1996 -722 2061 -779 2128 -779 ct 2158 -779 2183 -770 2203 -751 ct 
+2223 -733 2233 -712 2233 -687 ct 2233 -666 2226 -648 2212 -633 ct 2197 -618 2180 -610 2160 -610 ct 
+2141 -610 2119 -620 2095 -639 ct 2071 -658 2054 -667 2042 -667 ct 2032 -667 2021 -662 2010 -651 ct 
+1985 -628 1959 -591 1933 -539 ct 1933 -176 l  1933 -135 1938 -103 1949 -81 ct 
+1956 -66 1969 -54 1987 -44 ct 2005 -34 2031 -29 2065 -29 ct 2065 0 l  1678 0 l 
+1678 -29 l  1716 -29 1745 -35 1763 -47 ct 1777 -56 1787 -70 1792 -90 ct 1795 -99 1797 -126 1797 -170 ct 
+1797 -463 l  1797 -551 1795 -604 1791 -621 ct 1788 -638 1781 -650 1771 -658 ct 
+1762 -665 1750 -669 1735 -669 ct 1718 -669 1699 -665 1678 -657 ct 1669 -686 l 
+1898 -779 l  p ef
+2394 -472 m  2393 -359 2420 -271 2476 -207 ct 2531 -143 2595 -111 2670 -111 ct 
+2719 -111 2763 -125 2799 -152 ct 2836 -179 2867 -226 2891 -292 ct 2917 -276 l 
+2905 -200 2872 -131 2816 -69 ct 2760 -7 2691 23 2607 23 ct 2516 23 2438 -12 2373 -83 ct 
+2309 -153 2276 -249 2276 -368 ct 2276 -498 2310 -599 2376 -671 ct 2442 -744 2526 -780 2626 -780 ct 
+2711 -780 2781 -752 2835 -696 ct 2890 -640 2917 -565 2917 -472 ct p
+2394 -519 m  2744 -519 l  2741 -568 2736 -602 2727 -622 ct 2713 -653 2693 -677 2665 -695 ct 
+2638 -712 2609 -721 2580 -721 ct 2534 -721 2493 -703 2457 -668 ct 2421 -632 l 
+2400 -583 l  p ef
+3651 -287 m  3630 -187 3590 -111 3531 -57 ct 3471 -3 3405 23 3333 23 ct 3247 23 3172 -12 3108 -85 ct 
+3044 -157 3012 -254 3012 -377 ct 3012 -496 3048 -593 3119 -667 ct 3189 -742 3274 -779 3374 -779 ct 
+3448 -779 3509 -759 3557 -720 ct 3605 -681 3629 -640 3629 -597 ct 3629 -576 3622 -559 3609 -546 ct 
+3595 -533 3576 -527 3552 -527 ct 3520 -527 3495 -537 3479 -558 ct 3469 -570 3463 -592 3460 -624 ct 
+3457 -657 3446 -682 3427 -699 ct 3407 -715 3381 -724 3346 -724 ct 3291 -724 3247 -703 3213 -662 ct 
+3169 -608 3146 -537 3146 -448 ct 3146 -358 3168 -278 3213 -209 ct 3257 -140 3317 -105 3393 -105 ct 
+3447 -105 3495 -124 3538 -161 ct 3568 -186 3598 -232 3627 -299 ct p ef
+3963 -1006 m  3963 -757 l  4140 -757 l  4140 -699 l  3963 -699 l  3963 -208 l 
+3963 -159 3970 -126 3984 -109 ct 3998 -92 4016 -83 4039 -83 ct 4057 -83 4074 -89 4091 -100 ct 
+4109 -111 4122 -128 4131 -150 ct 4163 -150 l  4144 -96 4117 -55 4082 -28 ct 
+4046 -1 4010 12 3972 12 ct 3947 12 3922 5 3898 -8 ct 3874 -22 3856 -42 3844 -69 ct 
+3833 -95 3827 -135 3827 -190 ct 3827 -699 l  3707 -699 l  3707 -726 l  3737 -738 3768 -759 3800 -788 ct 
+3832 -817 3860 -851 3885 -891 ct 3897 -912 3915 -950 3938 -1006 ct p ef
+5123 -310 m  5150 -304 l  5054 0 l  4186 0 l  4186 -30 l  4229 -30 l  4276 -30 4310 -46 4330 -76 ct 
+4342 -94 4348 -135 4348 -199 ct 4348 -922 l  4348 -992 4340 -1036 4324 -1053 ct 
+4303 -1078 4271 -1090 4229 -1090 ct 4186 -1090 l  4186 -1120 l  4694 -1120 l 
+4694 -1090 l  4634 -1090 4593 -1085 4569 -1073 ct 4545 -1062 4528 -1047 4520 -1030 ct 
+4511 -1012 4506 -970 4506 -903 ct 4506 -199 l  4506 -153 4511 -122 4520 -104 ct 
+4526 -93 4536 -84 4550 -79 ct 4564 -73 4607 -71 4679 -71 ct 4761 -71 l  4847 -71 4907 -77 4942 -90 ct 
+4977 -102 5008 -125 5037 -157 ct 5066 -189 l  5094 -240 l  p ef
+5414 -1175 m  5437 -1175 5457 -1167 5473 -1151 ct 5489 -1134 5498 -1115 5498 -1092 ct 
+5498 -1068 5489 -1049 5473 -1032 ct 5457 -1015 5437 -1007 5414 -1007 ct 5391 -1007 5371 -1015 5355 -1032 ct 
+5338 -1049 5330 -1068 5330 -1092 ct 5330 -1115 5338 -1134 5354 -1151 ct 5370 -1167 l 
+5390 -1175 l  p
+5483 -779 m  5483 -171 l  5483 -123 5486 -92 5493 -76 ct 5500 -60 5510 -49 5524 -41 ct 
+5537 -33 5562 -29 5598 -29 ct 5598 0 l  5230 0 l  5230 -29 l  5267 -29 5291 -33 5304 -40 ct 
+5317 -47 5327 -59 5334 -76 ct 5342 -92 5345 -124 5345 -171 ct 5345 -462 l  5345 -545 5343 -598 5338 -622 ct 
+5334 -640 5328 -652 5320 -659 ct 5312 -666 5300 -669 5286 -669 ct 5270 -669 5252 -665 5230 -657 ct 
+5218 -686 l  5446 -779 l  p ef
+6172 -779 m  6172 -521 l  6145 -521 l  6124 -602 6097 -657 6064 -686 ct 6031 -716 5989 -730 5939 -730 ct 
+5900 -730 5869 -720 5845 -700 ct 5822 -679 5810 -657 5810 -632 ct 5810 -601 5819 -575 5836 -553 ct 
+5853 -530 5888 -506 5940 -481 ct 6061 -422 l  6173 -367 6229 -295 6229 -206 ct 
+6229 -137 6203 -82 6151 -40 ct 6099 2 6040 23 5976 23 ct 5930 23 5877 14 5817 -1 ct 
+5799 -7 5784 -9 5773 -9 ct 5760 -9 5750 -2 5743 11 ct 5715 11 l  5715 -258 l 
+5743 -258 l  5758 -181 5788 -123 5831 -84 ct 5875 -45 5924 -25 5978 -25 ct 6016 -25 6047 -36 6071 -59 ct 
+6095 -81 6106 -108 6106 -139 ct 6106 -177 6093 -209 6066 -235 ct 6040 -261 5986 -294 5906 -333 ct 
+5827 -373 5774 -409 5749 -441 ct 5725 -472 5712 -512 5712 -560 ct 5712 -622 5734 -674 5776 -716 ct 
+5819 -758 5874 -779 5942 -779 ct 5972 -779 6008 -773 6050 -760 ct 6078 -752 6097 -748 6106 -748 ct 
+6115 -748 6122 -750 6127 -753 ct 6132 -757 6138 -766 6145 -779 ct p ef
+6546 -1006 m  6546 -757 l  6723 -757 l  6723 -699 l  6546 -699 l  6546 -208 l 
+6546 -159 6553 -126 6567 -109 ct 6581 -92 6599 -83 6622 -83 ct 6640 -83 6657 -89 6674 -100 ct 
+6692 -111 6705 -128 6714 -150 ct 6746 -150 l  6727 -96 6700 -55 6665 -28 ct 
+6629 -1 6593 12 6555 12 ct 6530 12 6505 5 6481 -8 ct 6457 -22 6439 -42 6427 -69 ct 
+6416 -95 6410 -135 6410 -190 ct 6410 -699 l  6290 -699 l  6290 -726 l  6320 -738 6351 -759 6383 -788 ct 
+6415 -817 6443 -851 6468 -891 ct 6480 -912 6498 -950 6521 -1006 ct p ef
+pom
+gr
+gr
+0 26640 t 
+pom
+count op_count sub {pop} repeat countdictstack dict_count sub {end} repeat b4_inc_state restore
+%%PageTrailer
+%%Trailer
+%%EOF
diff --git a/DirectFB-1.4.0/docs/direct/DirectList.pdf b/DirectFB-1.4.0/docs/direct/DirectList.pdf
new file mode 100644
index 0000000..3dd7576
Binary files /dev/null and b/DirectFB-1.4.0/docs/direct/DirectList.pdf differ
diff --git a/DirectFB-1.4.0/docs/direct/DirectList.sxd b/DirectFB-1.4.0/docs/direct/DirectList.sxd
new file mode 100644
index 0000000..a5c2b34
Binary files /dev/null and b/DirectFB-1.4.0/docs/direct/DirectList.sxd differ
diff --git a/DirectFB-1.4.0/docs/html/Makefile.in b/DirectFB-1.4.0/docs/html/Makefile.in
index e6ec491..c7ff9a4 100644
--- a/DirectFB-1.4.0/docs/html/Makefile.in
+++ b/DirectFB-1.4.0/docs/html/Makefile.in
@@ -1,8 +1,8 @@
-# Makefile.in generated by automake 1.10.1 from Makefile.am.
+# Makefile.in generated by automake 1.10 from Makefile.am.
 # @configure_input@
 
 # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
+# 2003, 2004, 2005, 2006  Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -88,7 +88,6 @@ DIRECT_BUILD_NETWORK = @DIRECT_BUILD_NETWORK@
 DIRECT_BUILD_STDBOOL = @DIRECT_BUILD_STDBOOL@
 DIRECT_BUILD_TEXT = @DIRECT_BUILD_TEXT@
 DIRECT_BUILD_TRACE = @DIRECT_BUILD_TRACE@
-DSYMUTIL = @DSYMUTIL@
 DYNLIB = @DYNLIB@
 ECHO = @ECHO@
 ECHO_C = @ECHO_C@
@@ -136,7 +135,6 @@ MAN2HTML = @MAN2HTML@
 MKDIR_P = @MKDIR_P@
 MODULEDIR = @MODULEDIR@
 MODULEDIRNAME = @MODULEDIRNAME@
-NMEDIT = @NMEDIT@
 OBJEXT = @OBJEXT@
 OSX_LIBS = @OSX_LIBS@
 PACKAGE = @PACKAGE@
diff --git a/DirectFB-1.4.0/docs/initialization.txt b/DirectFB-1.4.0/docs/initialization.txt
new file mode 100644
index 0000000..f7970ea
--- /dev/null
+++ b/DirectFB-1.4.0/docs/initialization.txt
@@ -0,0 +1,86 @@
+Initialization map  (outdated !!)
+----------------------------------
+
+- normal entry
+- (optional entry)
+* function call
+= loop (generally for each like)
+X entering arena (like switch)
+: possible way of entering (like case)
++ new arena field allocated
+# reactor related
+O object pool related
+$ property related
+
+
+DirectFBInit
+  * dfb_config_init
+    - allocate config
+    - read config from files and command line
+  * dfb_core_init
+    - dlopen ourself if linked dynamically
+    * dfb_system_lookup
+
+DirectFBCreate
+  * dfb_core_ref
+    - (atexit)
+    - (sync)
+    - (block all signals)
+    * dfb_system_thread_init if multi app
+    * dfb_find_best_memcpy
+    * fusion_init
+    - init local core data
+    X arena_enter
+      : dfb_core_initialize
+        - (install signal handlers)
+        + core clip field
+        * dfb_colorhash_initialize
+          + color hash field
+        * dfb_system_initialize (fbdev)
+          + fbdev field
+          - open framebuffer device
+          * dfb_vt_initialize
+            - open /dev/tty0
+            - (switch to new vt)
+            - open /dev/ttyN
+            - (set graphics mode)
+          - get fixed screen info
+          - mmap framebuffer
+          - get variable screen info
+          - get color map
+          # new/attach to rpc reactor
+          * dfb_layers_register
+            - add to local layer list
+            - initialize local state for drawing
+        * dfb_input_initialize
+          + input field
+          - explore driver module directory
+          * init_devices
+            - ask each driver for devices
+            - unload unused driver modules
+            = for each device
+              - init local and shared data
+              # new input device reactor
+              * OpenDevice
+              - (allocate device keymap)
+              - add to local and shared input device list
+        * dfb_gfxcard_initialize
+          + card field
+          - explore driver module directory
+          - (load/init graphics driver)
+          - create surface manager
+          O palette pool
+          O surface pool
+        * dfb_layers_initialize
+          + layers field
+          = for each registered layer
+            - init shared data
+            $ layer property
+            * InitLayer
+          * dfb_layer_enable (primary layer)
+            - ... (TODO)
+  * apply_configuration
+    - set buffer mode of primary layer
+    - set background color of primary layer
+    - (set background image of primary layer)
+    - (enable mouse cursor)
diff --git a/DirectFB-1.4.0/gfxdrivers/Makefile.am b/DirectFB-1.4.0/gfxdrivers/Makefile.am
index 270cf31..9cfdeee 100644
--- a/DirectFB-1.4.0/gfxdrivers/Makefile.am
+++ b/DirectFB-1.4.0/gfxdrivers/Makefile.am
@@ -126,6 +126,11 @@ else
 EP9X_DIR =
 endif
 
+if GFX_CX2450X
+CX2450X_DIR = cx2450x
+else
+CX2450X_DIR =
+endif
 
 SUBDIRS = \
 	$(ATI128_DIR)	\
@@ -148,4 +153,5 @@ SUBDIRS = \
 	$(SIS315_DIR)	\
 	$(TDFX_DIR)	\
 	$(UNICHROME_DIR) \
-	$(VMWARE_DIR)
+	$(VMWARE_DIR)	\
+	$(CX2450X_DIR)
diff --git a/DirectFB-1.4.0/gfxdrivers/ati128/.cvsignore b/DirectFB-1.4.0/gfxdrivers/ati128/.cvsignore
new file mode 100644
index 0000000..6e5ca7e
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/ati128/.cvsignore
@@ -0,0 +1,6 @@
+Makefile
+Makefile.in
+.deps
+.libs
+*.lo
+*.la
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/Installation.txt b/DirectFB-1.4.0/gfxdrivers/cle266/Installation.txt
new file mode 100644
index 0000000..5070d23
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/Installation.txt
@@ -0,0 +1,17 @@
+# How to compile the cle266 driver:
+
+# 1a. Build the kernel module. You will have to install it
+# (with insmod) before you run a directfb application.
+# Your kernel must also use devfs.
+# The module file is named cle266vgaio.o (or .ko on 2.6 kernels)
+
+# If you use a 2.4 kernel, write
+
+make -f cle266vgaio.mk v24 
+
+# If you use a 2.6 kernel, write
+
+make -f cle266vgaio.mk v26
+
+# 1b. Optionally, you can patch your 2.4 kernel. (Sorry, I have no patch
+for 2.6) See Patching.txt
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/Patching.txt b/DirectFB-1.4.0/gfxdrivers/cle266/Patching.txt
new file mode 100644
index 0000000..1aae3a4
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/Patching.txt
@@ -0,0 +1,27 @@
+#Patching instructions for the cle266vgaio module and the 2.4 kernel
+#This procedure is optional. It is only for those who want to make the
+#module a part of the kernel. See Installation.txt.
+
+# 1. Copy the files into your kernel source tree
+
+cp cle266vgaio.c /usr/src/linux/drivers/char/
+cp cle266vgaio.patch /usr/src/linux
+cd /usr/src/linux
+
+# 2. Test the patch without applying it (optional)
+#2.4.21 should work without warnings, 2.4.20 may print some messages,
+#but otherwise work. Later versions should/may work as well...
+
+patch -p1 --dry-run < cle266vgaio.patch
+
+# 3. Do the actual patching
+
+patch -p1 < ../cle266dfb.patch
+
+# 4. Run make menuconfig and enable the module.
+
+#You find it under "Character devices", right before
+#the AGP support settings. It is labeled
+#"DirectFB CLE266 Support (EXPERIMENTAL)"
+
+# 5. Build the kernel as usual, eg write: make dep bzImage
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/Readme.txt b/DirectFB-1.4.0/gfxdrivers/cle266/Readme.txt
new file mode 100644
index 0000000..6c49683
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/Readme.txt
@@ -0,0 +1,136 @@
+How to use it
+-------------
+
+Note:
+This is for Linux 2.4 only, for now. v2.6 and BSD patches are welcome.
+
+1. Configure the kernel for the VESA framebuffer.
+This is done by adding parameters to the kernel command line.
+Here is one example:
+
+vga=789 video=vesa:ywrap,vram:32
+
+vga=789 sets 800x600 pixels, 32 bits per pixel.
+vesa:ywrap is makes it possible to flip the primary surface.
+vram:32 forces the VESA framebuffer to use 32Mb video RAM.
+Adjust 32 to match your BIOS settings, eg 64 or 128.
+
+(Note: VIA's viafb also works. See its documentation for more info.)
+
+2. Configure the kernel for the device file system (devfs)
+This is now optional. Read cle266vgaio.c for more information.
+
+3. Install the cle266vgaio module.
+
+Compilation: Locate cle266vgaio.mk and cle266vgaio.c then read cle266vgaio.c
+for more information.
+
+Installation: The module probes the PCI subsystem and won't install itself
+unless it finds the right hardware device. Either dmesg or lsmod will tell
+you if it worked.
+
+Then, the DirectFB driver simply makes sure that /dev/cle266vgaio exists and
+asks it to mmap the IO registers to user space.
+
+This way, we avoid all the trouble of writing a whole framebuffer driver or
+patching the kernel.  And, if you want to go back to software-only rendering,
+simply uninstall the cle266vgaio module.
+
+Reporting bugs
+--------------
+
+If you want to report any problem, please make an effort to figure
+out what is going on. Please also provide a small code example that
+reliably replicates your problem and only relies on DirectFB.
+
+A single .c file + makefile is preferred, so that it can be built and
+tested easily.
+
+Just stating that "this or that doesn't work" is a way of giving the
+developer a load of work, beyond fixing the actual problem.
+
+Implemented features
+--------------------
+
+* Drawing and blitting in opaque and blended surfaces.
+  Supported surface formats are roughly as follows:
+  Source: 8-bit (indexed), 16 or 32-bit (A)RGB
+  Destination: 16 or 32-bit (A)RGB
+* One video overlay surface.
+* Special feature: Video underlay mode. Enable it by moving the video
+  layer below the primary layer (e.g SetLayer(-1)).
+  In this mode, the primary layer's alpha channel controls what parts
+  of the video that will be visible, on a per-pixel basis.
+  Note: There is a hardware bug see "known bugs and quirks" below.
+
+Unimplemented features (TODOs)
+------------------------------
+
+* Hardware revision check. The revision number is currently hardcoded.
+  Yes, this is bad! If you get strange looking video, try changing the
+  revision number to 0x10 in unichrome.c, driver_init_driver().
+
+* 2.4 and 2.6 kernel patches for cle266vgaio, for people who don't want
+  to use modules.
+
+* Blitting into overlay surfaces.
+* Colorkeyed stretch blits.
+* Support for interlaced surfaces.
+* Video surface color keying.
+* DVD subsurface (subtitling) layer.
+* Video alpha layer.
+* Second video overlay (for picture-in-picture video)
+* HQV video blitter support.
+
+* System->Video RAM blits. (AGPGART support)
+(* Drawing and blitting into 8-bit (indexed color) surfaces.)
+
+Limitations (of the hardware)
+-----------------------------
+
+* These drawing and blitting flags are not supported:
+  DSDRAW_DST_PREMULTIPLY, DSDRAW_DEMULTIPLY
+  DSBLIT_SRC_PREMULTIPLY, DSBLIT_DST_PREMULTIPLY, DSBLIT_DEMULTIPLY
+
+* You can not combine source and destination color keying when
+  blitting opaque surfaces. Both functions work, just not at the
+  same time.
+  
+* The hardware does not support 24-bit (3 bytes/pixel) surfaces. 
+
+* The blitter does not support YUV->RGB pixel-format conversion.
+  Video surfaces does the conversion automatically.
+
+Known bugs and quirks
+---------------------
+
+* In underlay mode (see "implemented features", above), the video
+  is fully visible where the primary layer's alpha is 255, and
+  invisible (= graphics visible) where the alpha is 0.
+
+  In other words: the video layer using the primary layer's alpha
+  channel as its own alpha channel, and that is not very practical.
+
+  Fortunately, there is an easy workaround. The following function
+  XOR's the alpha channel of a surface. Use it just before flipping
+  the primary surface, for example.
+
+  void InvertSurfaceAlpha(IDirectFBSurface* surface)
+  {
+      int w,h;
+
+      surface->SetColor(surface, 0, 0, 0, 0xff);
+      surface->SetDrawingFlags(surface, DSDRAW_XOR);
+      surface->GetSize(surface, &w, &h);
+      surface->FillRectangle(surface, 0, 0, w, h);
+  }
+
+* Do not use the CPU to write into VRAM surfaces, unless where
+  absolutely needed (ie system -> video blits). CPU accesses
+  into VRAM run at 1/4 speed.
+
+* Colorkeyed stretched blits are not supported => will be software
+  rendered => will be very slow, if the source surface is in VRAM.
+
+* Blitting outside the screen is buggy (e.g with negative surface
+  coordinates). The result is clipped, but does not look right.
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/changelog.txt b/DirectFB-1.4.0/gfxdrivers/cle266/changelog.txt
new file mode 100644
index 0000000..5632f50
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/changelog.txt
@@ -0,0 +1,56 @@
+v0.3.0 - changes from v0.2.1
+----------------------------
+This release is mostly bugfixes.
+
+* Bugfix: Made the driver work with VIA drivers. Needs testing. (Andreas)
+* Bugfix: Numerous state handling bugs. (Andi)
+* Bugfix: Surface pitch and offset alignments were incorrect. (Andi)
+* Bugfix: 3D-engine blit problem. Only 2^n by 2^m sizes worked. (Andreas)
+* Bugfix: Off-by-one rectangle and surface sizes. (Andi)
+* Bugfix: Video overlay: YUV planar mode. (Andreas)
+* Bugfix: Incorrect color handling during blended operations. (Andi)
+* Bugfix: LUT8->LUT8 stretch blits unsupported - removed (Andreas)
+* Bugfix: Blended FillRectangle(), DrawRectangle() and DrawLine()
+  in non 32-bit modes. (Andi)
+* Bugfix: DSBLIT_COLORIZE and DSBLIT_BLEND_COLORALPHA. (Andreas)
+* Bugfix: Workaround for font rendering in some applications. (Andi)
+* Bugfix: Fixed problems with gcc 2.95, and a missing header file. (dok)
+
+* Change: Added "void *device_data" to InitDriver() (dok)
+* Change: Added multi-application support, by allowing the cle266vgaio
+  device to be opened more than once and moving around some code. (Andi)
+* Change: Added new function EmitCommands() (Andreas)
+
+
+v0.2.1 - changes from v0.2.0
+----------------------------
+
+* Bugfix: 2D/3D engine synchronization.
+  Operations performed by the DirectFB software renderer weren't
+  always written to VRAM, because the GPU was still working.
+
+* Bugfix: Added graphics device name (VIA/S3G UniChrome).
+
+* André Kriehn contributed 2.6 kernel support for the cle266vgaio
+  module. Thanks!
+
+* Added cle266vgaio module kernel 2.4 patch. Works without warnings
+  on 2.4.21 - with warnings on 2.4.20. Other versions untested.
+  
+* Added DirectFB 0.9.19 configure.in
+
+
+v0.2.0 - changes from v0.1.0
+----------------------------
+
+* Got the 3D GPU working
+
+* Added a video overlay layer
+
+
+v0.1.0 - changes from v0.0.1
+----------------------------
+
+* Added color-keying for opaque blitting and drawing.
+
+* Added code for blended blitting and drawing etc.
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.c b/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.c
new file mode 100644
index 0000000..dfe6269
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.c
@@ -0,0 +1,291 @@
+/*
+   Copyright (c) 2003 Andreas Robinson, All rights reserved.
+   Kernel v2.6 code by André Kriehn.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+*/
+
+/* Standalone CLE266 IO-registers mmap driver.
+ * Tested on Linux 2.4.20 and 2.6.0-test3.
+ * 
+ * Compilation:
+ *
+ * make -f cle266vgaio.mk v24
+ * make -f cle266vgaio.mk v24-static
+ * make -f cle266vgaio.mk v26
+ * make -f cle266vgaio.mk v26-static
+ *
+ * Explanation
+ *
+ * v24 compiles for a 2.4 kernel, relying on devfs.
+ * v24-static compiles for a 2.4 kernel, without relying on devfs.
+ * v26 compiles for a 2.6 kernel, relying on devfs.
+ * v26-static compiles for a 2.6 kernel, without relying on devfs.
+ *
+ * If in doubt use v24-static or v26-static.
+ * Devfs is not a standard kernel feature.
+ *
+ * If you select v24-static or v26 static, you must create a
+ * device node in your /dev directory, by executing the following
+ * command: (If you have devfs and select v24 or v26, you should
+ * not do this.)
+ *
+ * mknod -m 666 /dev/cle266vgaio c 245 0
+ * (You need to have root privileges)
+ *
+ * IMPORTANT: If you forget to do this, DirectFB programs will
+ * run, but won't be accelerated, even if you install the module
+ * properly.
+ *
+ * All but the v24 option allocates a major device number, 245.
+ * This number is for experimental use only, and can possibly conflict
+ * with something else if you have other experimental drivers installed.
+ * If you need to change it, edit VIADEV_MAJOR below and adjust your
+ * mknod command if you use it.
+ */
+
+#include <linux/init.h>
+#include <linux/module.h>
+#include <linux/major.h>
+#include <linux/pci.h>
+#include <linux/devfs_fs_kernel.h>
+#include <linux/version.h>
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+#include <linux/vermagic.h>
+#endif
+
+// Module configuration ------------------------------------------------------
+
+#define VIADEV_MAJOR 245
+
+// VIA register declarations -------------------------------------------------
+
+/* defines for VIA 3D registers */
+#define VIA_REG_STATUS          0x400
+
+/* VIA_REG_STATUS(0x400): Engine Status */
+#define VIA_CMD_RGTR_BUSY       0x00000080  /* Command Regulator is busy */
+#define VIA_2D_ENG_BUSY         0x00000001  /* 2D Engine is busy */
+#define VIA_3D_ENG_BUSY         0x00000002  /* 3D Engine is busy */
+#define VIA_VR_QUEUE_BUSY       0x00020000 /* Virtual Queue is busy */
+
+#define VIA_IN(hwregs, reg)  *(volatile u32 *)((hwregs) + (reg))
+#define MAXLOOP 0xffffff
+
+// Private declarations ------------------------------------------------------
+
+#define MODULE_NAME "cle266vgaio"
+#define _PCI_DEVICE_ID_VIA_CLE3122  0x3122
+#define MY_ASSERT(test, msg, exitcode) if (!test) { printk(msg); return exitcode; }
+
+
+struct via_devinfo
+{
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0)
+#ifndef CLE266_STATIC_DEVNUM
+    devfs_handle_t devhnd;
+#endif
+#endif
+    struct pci_dev* pcidev;     // PCI device (see linux/pci.h)
+    u32 io_base_phy;            // Physical IO register address
+    u8* iobase;                 // Kernel-mapped IO register address
+    u32 size;                   // IO memory size in bytes
+};
+
+// ----------------------------------------------------------------------------
+
+/// Global device info
+static struct via_devinfo di;
+
+/// Get chipset revision
+
+static int via_get_revision(void)
+{
+    u8 rev;
+    struct pci_dev* dev;
+
+    dev = pci_find_slot(0,0);
+    if (dev == NULL) return 0;
+
+    pci_read_config_byte(dev, 0xf6, &rev);
+
+    return rev;
+}
+
+static void via_enable_mmio(void)
+{
+    // in/out only works when the CLE266 VGA is the primary device.
+    // Refer to the XFree86 VIA driver for info on how to set it up
+    // when used as secondary driver.
+
+    //outb(inb(0x3c3) | 0x01, 0x3c3);
+    //outb(inb(0x3cc) | 0x01, 0x3c2);
+
+    // Unlock Extended IO Space
+
+    outb(0x10, 0x3c4);
+    outb(0x01, 0x3c5);
+
+    // Enable MMIO
+
+    outb(0x1a, 0x3c4);
+    //outb(inb(0x3c5) | 0x68, 0x3c5);
+}
+
+static int via_wait_idle(void)
+{
+    int loop = 0;
+
+    while (!(VIA_IN(di.iobase, VIA_REG_STATUS) 
+        & VIA_VR_QUEUE_BUSY) && 
+        (loop++ < MAXLOOP));
+
+    while ((VIA_IN(di.iobase, VIA_REG_STATUS) &
+      (VIA_CMD_RGTR_BUSY | VIA_2D_ENG_BUSY | VIA_3D_ENG_BUSY)) &&
+      (loop++ < MAXLOOP));
+
+    return loop >= MAXLOOP;
+}
+
+// Module and device file I/O functions --------------------------------------
+
+static int viadev_open(struct inode *inode, struct file *filp)
+{
+    return 0; 
+}
+        
+static int viadev_release(struct inode *inode, struct file *filp)
+{
+    return 0;
+}   
+
+static int viadev_mmap(struct file* filp, struct vm_area_struct* vma)
+{
+    unsigned long off = vma->vm_pgoff << PAGE_SHIFT;
+    unsigned long phy = di.io_base_phy + off;
+    unsigned long vsize = vma->vm_end - vma->vm_start;
+    unsigned long psize = di.size - off;
+
+    if (vsize > psize) return -EINVAL;
+
+    vma->vm_pgoff = phy >> PAGE_SHIFT;
+
+    if (boot_cpu_data.x86 > 3)
+        pgprot_val(vma->vm_page_prot) |= _PAGE_PCD;
+
+    vma->vm_flags |= VM_IO | VM_RESERVED | VM_DONTEXPAND;
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+    if (io_remap_page_range(vma,vma->vm_start, phy, vsize, vma->vm_page_prot))
+       return -EAGAIN;
+#else
+    if (io_remap_page_range(vma->vm_start, phy, vsize, vma->vm_page_prot))
+       return -EAGAIN;
+#endif
+
+    return 0;
+}
+
+static struct file_operations viadev_fops = {
+    .owner = THIS_MODULE,
+    .mmap = viadev_mmap,
+    .open = viadev_open,
+    .release = viadev_release,
+};
+
+static int __init viadev_init(void)
+{
+    // Find the device
+
+    di.pcidev = pci_find_device(PCI_VENDOR_ID_VIA,
+        _PCI_DEVICE_ID_VIA_CLE3122, NULL);
+    MY_ASSERT(di.pcidev,
+        MODULE_NAME ": VIA CLE266 graphics device not found.", -ENODEV);
+    MY_ASSERT(!di.pcidev->driver,
+        MODULE_NAME ": There is already a driver installed.", -EBUSY);
+
+    // Map physical IO memory address into kernel space.
+
+    di.io_base_phy = pci_resource_start(di.pcidev, 1);
+    di.size = pci_resource_len(di.pcidev, 1);
+    MY_ASSERT(request_mem_region(di.io_base_phy, di.size, MODULE_NAME),
+        MODULE_NAME ": Memory mapping failed (1).", -EBUSY);
+
+    di.iobase = ioremap(di.io_base_phy, di.size);
+    MY_ASSERT(di.iobase, MODULE_NAME ": Memory mapping failed (2).", -EBUSY);
+
+    // TODO: Register PCI device driver. Or not. We don't really need to.
+
+    // Register a character device. Uses devfs
+
+#if CLE266_STATIC_DEVNUM
+    int result;
+    result = register_chrdev(VIADEV_MAJOR, MODULE_NAME, &viadev_fops);
+    MY_ASSERT(!result, MODULE_NAME " Unable to register driver\n", result);
+#else
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+    int result;
+    result = register_chrdev(VIADEV_MAJOR, MODULE_NAME, &viadev_fops);
+    MY_ASSERT(!result, MODULE_NAME " Unable to register driver\n", result);
+	devfs_mk_cdev(MKDEV(VIADEV_MAJOR, 0), S_IFCHR | S_IRUSR | S_IWUSR, MODULE_NAME);
+#else
+    di.devhnd = devfs_register(NULL, MODULE_NAME, DEVFS_FL_AUTO_DEVNUM,
+        0, 0, S_IFCHR | S_IRUGO | S_IWUGO, &viadev_fops, &di);
+    MY_ASSERT(di.devhnd, MODULE_NAME ": Could not register a /dev entry.", -EAGAIN);
+#endif
+
+#endif // CLE266_STATIC_DEVNUM
+
+	printk(MODULE_NAME " installed. Hardware rev %d detected.\n",
+		via_get_revision());
+
+	via_enable_mmio();
+    
+    return 0;
+}
+
+static void __exit viadev_exit(void)
+{
+
+#if CLE266_STATIC_DEVNUM
+	unregister_chrdev(VIADEV_MAJOR, MODULE_NAME);
+#else
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+    unregister_chrdev(VIADEV_MAJOR, MODULE_NAME);
+    devfs_remove(MODULE_NAME);
+#else
+    devfs_unregister(di.devhnd);
+#endif
+
+#endif // CLE266_STATIC_DEVNUM
+
+    via_wait_idle();
+    iounmap(di.iobase);
+    release_mem_region(di.io_base_phy, di.size);
+
+    printk(MODULE_NAME " removed.\n");
+}
+
+module_init(viadev_init);
+module_exit(viadev_exit);
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+static const char __module_depends[]
+__attribute_used__
+__attribute__((section(".modinfo"))) =
+"depends=";
+
+#endif
+
+MODULE_AUTHOR("Andreas Robinson");
+MODULE_DESCRIPTION("VIA UniChrome Driver");
+MODULE_LICENSE("GPL");
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.mk b/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.mk
new file mode 100644
index 0000000..a756bf5
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.mk
@@ -0,0 +1,45 @@
+# The makefile for the cle266 VGA IO module.
+# Build-command: make -f cle266vgaio.mk
+
+.SILENT:
+
+all:
+	echo Usage:
+	echo     make -f cle266vgaio.mk v24
+	echo     make -f cle266vgaio.mk v24-static
+	echo     make -f cle266vgaio.mk v26
+	echo     make -f cle266vgaio.mk v26-static
+	echo
+	echo v24: Compile for a 2.4 kernel.
+	echo v26: Compile for a 2.6 kernel.
+	echo
+	echo -static suffix: Module will not depend on devfs
+	echo   You will need to manually create a /dev device entry if you use it.
+	echo
+	echo See cle266vgaio.c for more details.
+	echo
+	echo You need to have kernel header files matching the version you
+	echo are trying to compile to, in /usr/src/linux/include.
+	echo
+	echo ... the kernel driver has not been built.
+
+v24:
+	echo Compiling v2.4 kernel module.
+	gcc -D__KERNEL__  -DMODULE -O2 -Wall -I/usr/src/linux/include -c cle266vgaio.c
+
+v24-static:
+	echo Compiling v2.4 kernel module not depending on devfs.
+	gcc -D__KERNEL__  -DMODULE -DCLE266_STATIC_DEVNUM -O2 -Wall -I/usr/src/linux/include -c cle266vgaio.c
+
+v26:
+	echo Compiling v2.6 kernel module.
+	gcc -Wall -Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -pipe -mpreferred-stack-boundary=2 -march=i486 -falign-functions=0 -falign-jumps=0 -falign-loops=0 -D__KERNEL__  -DMODULE -DKBUILD_MODNAME=cle266vgaio -DKBUILD_BASENAME=cle266vgaio -I/usr/src/linux/include -c cle266vgaio.c -o cle266vgaio.o
+	ld -m elf_i386 -r -o cle266vgaio.ko cle266vgaio.o
+
+v26-static:
+	echo Compiling v2.6 kernel module.
+	gcc -Wall -Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -pipe -mpreferred-stack-boundary=2 -march=i486 -falign-functions=0 -falign-jumps=0 -falign-loops=0 -DCLE266_STATIC_DEVNUM -D__KERNEL__  -DMODULE -DKBUILD_MODNAME=cle266vgaio -DKBUILD_BASENAME=cle266vgaio -I/usr/src/linux/include -c cle266vgaio.c -o cle266vgaio.o
+	ld -m elf_i386 -r -o cle266vgaio.ko cle266vgaio.o
+
+clean:
+	rm -f cle266vgaio.o cle266vgaio.ko
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.patch b/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.patch
new file mode 100644
index 0000000..8e7573d
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/cle266vgaio.patch
@@ -0,0 +1,24 @@
+diff -urP linux-2.4.21/drivers/char/Config.in linux-2.4.21-cle266/drivers/char/Config.in
+--- linux-2.4.21/drivers/char/Config.in	2003-08-14 11:04:16.000000000 +0200
++++ linux-2.4.21-cle266/drivers/char/Config.in	2003-09-07 00:30:30.000000000 +0200
+@@ -289,6 +289,8 @@
+ fi
+ endmenu
+ 
++dep_tristate 'DirectFB CLE266 Support (EXPERIMENTAL)' CONFIG_CLE266VGAIO $CONFIG_DEVFS_FS
++
+ if [ "$CONFIG_GART_IOMMU" = "y" ]; then
+ 	bool '/dev/agpgart (AGP Support)' CONFIG_AGP
+ 	define_bool CONFIG_AGP_AMD_8151 y
+
+diff -urP linux-2.4.21/drivers/char/Makefile linux-2.4.21-cle266/drivers/char/Makefile
+--- linux-2.4.21/drivers/char/Makefile	2003-08-14 11:04:16.000000000 +0200
++++ linux-2.4.21-cle266/drivers/char/Makefile	2003-09-06 23:45:45.000000000 +0200
+@@ -265,6 +265,7 @@
+ obj-y       += ftape/ftape.o
+ endif
+ 
++obj-$(CONFIG_CLE266VGAIO) += cle266vgaio.o
+ obj-$(CONFIG_H8) += h8.o
+ obj-$(CONFIG_PPDEV) += ppdev.o
+ obj-$(CONFIG_DZ) += dz.o
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/hwdoc.txt b/DirectFB-1.4.0/gfxdrivers/cle266/hwdoc.txt
new file mode 100644
index 0000000..ab49eab
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/hwdoc.txt
@@ -0,0 +1,549 @@
+// Misc. reverse-engineered hardware information.
+
+Open GL man pages: http://www.3dlabs.com/support/developer/index.htm
+
+/* Supported alpha-test operations
+ *
+ * If the result of a test is true, a pixel is passed
+ * to the destination, otherwise it is discarded.
+ *
+ * This may or may not come in handy for some DirectFB operations...
+ * Is alpha-keying supported in DFB?
+ *
+ * OpenGL -> Unichrome-register mapping is done by (x - GL_NEVER) << 8
+ * The value goes into regHATMD. HC_HenAT_MASK must be set in regEnable.
+ * The default should be GL_ALWAYS...
+ *
+ * GL name				Passes if
+ *
+ * GL_NEVER				Never
+ * GL_LESS				alpha < ref
+ * GL_EQUAL				alpha = ref
+ * GL_LEQUAL			alpha <= ref
+ * GL_GREATER			alpha > ref
+ * GL_NOTEQUAL			alpha != ref
+ * GL_GEQUAL			alpha >= ref
+ * GL_ALWAYS			Always (default)
+ */
+ 
+ /* GL -> UC ROP mapping
+const u32 UC_ROP[16] =
+{
+	HC_HROP_BLACK,    // GL_CLEAR           0
+	HC_HROP_DPa,      // GL_AND             s & d
+	HC_HROP_PDna,     // GL_AND_REVERSE     s & ~d
+	HC_HROP_P,        // GL_COPY            s
+	HC_HROP_DPna,     // GL_AND_INVERTED    ~s & d
+	HC_HROP_D,        // GL_NOOP            d
+	HC_HROP_DPx,      // GL_XOR             s ^ d
+	HC_HROP_DPo,      // GL_OR              s | d
+	HC_HROP_DPon,     // GL_NOR             ~(s | d)
+	HC_HROP_DPxn,     // GL_EQUIV           ~(s ^ d)
+	HC_HROP_Dn,       // GL_INVERT          ~d
+	HC_HROP_PDno,     // GL_OR_REVERSE      s | ~d
+	HC_HROP_Pn,       // GL_COPY_INVERTED   ~s
+	HC_HROP_DPno,     // GL_OR_INVERTED     ~s | d
+	HC_HROP_DPan,     // GL_NAND            ~(s & d)
+	HC_HROP_WHITE     // GL_SET             1
+};
+*/
+
+/* Using the texture environment
+
+// The following is based on a lot of guesses and is probably partly wrong.
+
+// Texture unit 0 or 1, generic blending function:
+//
+// C = (Ca * Op(Cb, Cc) + Cbias) << Cshift
+// A = (Aa * Op(Ab, Ac) + Abias) << Ashift
+// Op() is addition, subtraction, max or min
+//
+// Cx (where x = {a, b, c}) can in turn have one of three functions;
+//
+// Cx = src, Cx = 1 - src and a third named "p5", whatever that is
+// The same applies to Ax = src, Ax = 1 - src, Ax = p5(src)
+//
+// src is one of several sources:
+//
+// 0:			zero
+// Dif:			diffuse vertex color
+// Spec:		specular vertex color                         
+// Tex:			texture color (i.e a pixel in a texture)
+// Cur:			Guess: Color from tex unit 0, if using unit 1.
+// Adif:		diffuse vertex alpha
+// Fog:			fog color
+// Atex:		texture alpha
+// Acur:		Same as cur (only the alpha part)
+// HTXnBLRC:	A constant stored in HC_SubA_HTXnTBLRCa, *Cb, *Cc, *Aa or, *Fog
+// Ctexnext:	--- Unknown --- 
+//
+// Not all sources can be used for all parameters, e.g Cbias.
+// See the register listing from where it says "Define the input texture"
+// and onwards.
+//
+// Finally, the Cshift/Ashift operation has a number of settings
+// either shift_1, shift_2, shift_No or shift_DotP
+//
+// Guessing: shift_1 and shift_2 = multiply by two and four
+// shift_No = disable
+// shift_DotP = --- Unknown --- Maybe DotP = Dot product, but with
+// what? Itself or another parameter? Anyway, we're not doing
+// bump mapping in DirectFB, so it's not needed here.
+//
+// As is indicated above, you can (probably) chain together the texture
+// blending functions for the two texture units by using the Cur and Acur
+// sources, allowing more complex shading.
+
+*/
+
+Unichrome partial register map
+
+Register: Command A
+
+Section HC_HCmdHeader_MASK      0xfe000000
+==========================================
+
+Section HC_HE3Fire_MASK         0x00100000
+
+Section HC_HPMType_MASK         0x000f0000
+==========================================
+        HC_HPMType_Point        0x00000000		Draw point
+        HC_HPMType_Line         0x00010000		Draw line
+        HC_HPMType_Tri          0x00020000		Draw triangle
+        HC_HPMType_TriWF        0x00040000		????
+
+Section HC_HEFlag_MASK          0x0000e000
+==========================================
+        HC_HEFlag_NoAA          0x00000000		No anti-aliasing
+        HC_HEFlag_ab            0x00008000		Guess: Enable AA on triangle line ab
+        HC_HEFlag_bc            0x00004000		Guess: Enable AA on triangle line bc
+        HC_HEFlag_ca            0x00002000		Guess: Enable AA on triangle line ca
+
+Section HC_HShading_MASK        0x00001c00
+==========================================
+        HC_HShading_Solid       0x00000000
+        HC_HShading_FlatA       0x00000400		No shading: Use vertex A color	
+		HC_HShading_FlatB       0x00000800		No shading: Use vertex B color
+        HC_HShading_FlatC       0x00000c00		No shading: Use vertex C color
+        HC_HShading_Gouraud     0x00001000		Enable Gouraud shading
+        
+Notes on HC_HShading:
+
+The _Flat[A,B,C] options select what vertex has the color when you draw
+flat shaded objects
+
+Section HC_HPMValidN_MASK       0x00000200
+Section HC_HPLEND_MASK          0x00000100
+
+Section HC_HVCycle_MASK         0x000000ff	These settings control how vertices
+==========================================	are handled and let you draw several
+Section HC_HVCycle_Style_MASK   0x000000c0	primitives (eg a triangle fan) with
+------------------------------------------	only one command.
+        HC_HVCycle_Full         0x00000000
+        HC_HVCycle_AFP          0x00000040
+        HC_HVCycle_One          0x000000c0
+										
+										
+Section HC_HVCycle_ChgA_MASK    0x00000030
+------------------------------------------
+        HC_HVCycle_NewA         0x00000000	Replace vertex A
+        HC_HVCycle_AA           0x00000010	Old vertex A is new vertex A
+        HC_HVCycle_AB           0x00000020	Old vertex A is new vertex B
+        HC_HVCycle_AC           0x00000030	Old vertex A is new vertex C
+
+Section HC_HVCycle_ChgB_MASK    0x0000000c
+------------------------------------------
+        HC_HVCycle_NewB         0x00000000	...
+        HC_HVCycle_BA           0x00000004
+        HC_HVCycle_BB           0x00000008
+        HC_HVCycle_BC           0x0000000c
+
+Section HC_HVCycle_ChgC_MASK    0x00000003
+------------------------------------------
+        HC_HVCycle_NewC         0x00000000	...
+        HC_HVCycle_CA           0x00000001
+        HC_HVCycle_CB           0x00000002
+        HC_HVCycle_CC           0x00000003
+
+***********************************************************
+
+Register: Command B
+
+Section HC_HLPrst_MASK          0x00010000
+Section HC_HLLastP_MASK         0x00008000
+
+Section HC_HVPMSK_MASK          0x00007f80	Marks what data fields are present in a vertex.
+==========================================	
+        HC_HVPMSK_X             0x00004000	Vertex has X coordinate
+        HC_HVPMSK_Y             0x00002000	Vertex has Y coordinate
+        HC_HVPMSK_Z             0x00001000	Vertex has Z coordinate
+        HC_HVPMSK_W             0x00000800	Vertex has W coordinate
+        HC_HVPMSK_Cd            0x00000400	Vertex has diffuse color
+        HC_HVPMSK_Cs            0x00000200	Vertex has specular/fog color
+        HC_HVPMSK_S             0x00000100	Vertex has S (hor.) texture coordinate
+        HC_HVPMSK_T             0x00000080	Vertex has T (vert.) texture coordinate
+
+Section HC_HBFace_MASK          0x00000040
+Section HC_H2nd1VT_MASK         0x0000003f
+
+***********************************************************
+
+Register: Enable (HC_SubA_HEnable)
+
+==========================================
+
+        HC_HenTXEnvMap_MASK     0x00200000		????
+        HC_HenVertexCNT_MASK    0x00100000		????
+        HC_HenCPUDAZ_MASK       0x00080000		????
+        HC_HenDASZWC_MASK       0x00040000		????
+        HC_HenFBCull_MASK       0x00020000		Polygon culling
+        HC_HenCW_MASK           0x00010000		???? Is always on in the DRI code.
+        HC_HenAA_MASK           0x00008000		Drawing anti-aliasing
+        HC_HenST_MASK           0x00004000		Stencil test
+        HC_HenZT_MASK           0x00002000		Z test
+        HC_HenZW_MASK           0x00001000		Z buffer
+        HC_HenAT_MASK           0x00000800		Alpha test
+        HC_HenAW_MASK           0x00000400		Alpha buffer
+        HC_HenSP_MASK           0x00000200		Polygon stipple
+        HC_HenLP_MASK           0x00000100		Line stipple
+        HC_HenTXCH_MASK         0x00000080		???? Texture related ...
+        HC_HenTXMP_MASK         0x00000040		???? Texture related ...
+        HC_HenTXPP_MASK         0x00000020		???? Texture related ...
+        HC_HenTXTR_MASK         0x00000010		???? Texture related ...
+        HC_HenCS_MASK           0x00000008		????
+        HC_HenFOG_MASK          0x00000004		Fog
+        HC_HenABL_MASK          0x00000002		Alpha blending
+        HC_HenDT_MASK           0x00000001		Color dithering
+
+***********************************************************
+
+Stencil function
+
+Reg.	HC_SubA_HSBBasL			????			Should exist...
+Reg.	HC_SubA_HSBBasH			????			Should exist...
+
+Reg.	HC_SubA_HSBFM			????
+==========================================
+Section HC_HSBFM_MASK           0x00030000		Buffer data format
+------------------------------------------
+???
+
+Section HC_HSBLoc_MASK          0x0000c000		Buffer memory type
+------------------------------------------		(agp, or video etc)
+????
+
+Section HC_HSBPit_MASK          0x00003fff		Buffer row pitch
+
+Reg.    HC_SubA_HSTREF          0x0023
+==========================================
+        HC_HSTREF_MASK          0x00ff0000		???? Reference value
+
+Section HC_HSTOPMSK_MASK        0x0000ff00		???? Operation?
+------------------------------------------
+????
+
+Section HC_HSTBMSK_MASK         0x000000ff		???? Destination bitmask
+------------------------------------------
+????
+
+Reg.    HC_SubA_HSTMD           0x0024
+==========================================
+Section HC_HSTMD_MASK           0x00070000		Test function
+------------------------------------------
+        HC_HSTMD_NeverPass      0x00000000
+        HC_HSTMD_LT             0x00010000
+        HC_HSTMD_EQ             0x00020000
+        HC_HSTMD_LE             0x00030000
+        HC_HSTMD_GT             0x00040000
+        HC_HSTMD_NE             0x00050000
+        HC_HSTMD_GE             0x00060000
+        HC_HSTMD_AllPass        0x00070000
+
+Section HC_HSTOPSF_MASK         0x000001c0		Fail operation
+------------------------------------------
+        HC_HSTOPSF_KEEP         0x00000000
+        HC_HSTOPSF_ZERO         0x00000040
+        HC_HSTOPSF_REPLACE      0x00000080
+        HC_HSTOPSF_INCRSAT      0x000000c0
+        HC_HSTOPSF_DECRSAT      0x00000100
+        HC_HSTOPSF_INVERT       0x00000140
+        HC_HSTOPSF_INCR         0x00000180
+        HC_HSTOPSF_DECR         0x000001c0
+
+Section HC_HSTOPSPZF_MASK       0x00000038		Z-fail operation
+------------------------------------------
+        HC_HSTOPSPZF_KEEP       0x00000000
+        HC_HSTOPSPZF_ZERO       0x00000008
+        HC_HSTOPSPZF_REPLACE    0x00000010
+        HC_HSTOPSPZF_INCRSAT    0x00000018
+        HC_HSTOPSPZF_DECRSAT    0x00000020
+        HC_HSTOPSPZF_INVERT     0x00000028
+        HC_HSTOPSPZF_INCR       0x00000030
+        HC_HSTOPSPZF_DECR       0x00000038
+
+Section HC_HSTOPSPZP_MASK       0x00000007		Z-pass operation 
+------------------------------------------
+        HC_HSTOPSPZP_KEEP       0x00000000
+        HC_HSTOPSPZP_ZERO       0x00000001
+        HC_HSTOPSPZP_REPLACE    0x00000002
+        HC_HSTOPSPZP_INCRSAT    0x00000003
+        HC_HSTOPSPZP_DECRSAT    0x00000004
+        HC_HSTOPSPZP_INVERT     0x00000005
+        HC_HSTOPSPZP_INCR       0x00000006
+        HC_HSTOPSPZP_DECR       0x00000007
+
+***********************************************************
+
+Destination buffer (e.g the frame buffer)
+
+Reg.    HC_SubA_HDBBasL         0x0040			Physical address, low 24 bits
+Reg.    HC_SubA_HDBBasH         0x0041			Physical address, high 8 bits
+
+Reg.    HC_SubA_HDBFM           0x0042			Pixel format and row pitch
+==========================================
+Section HC_HDBFM_MASK           0x001f0000		Pixel format
+------------------------------------------
+        HC_HDBFM_RGB555         0x00000000
+        HC_HDBFM_RGB565         0x00010000
+        HC_HDBFM_ARGB4444       0x00020000
+        HC_HDBFM_ARGB1555       0x00030000
+        HC_HDBFM_BGR555         0x00040000
+        HC_HDBFM_BGR565         0x00050000
+        HC_HDBFM_ABGR4444       0x00060000
+        HC_HDBFM_ABGR1555       0x00070000
+        HC_HDBFM_ARGB0888       0x00080000
+        HC_HDBFM_ARGB8888       0x00090000
+        HC_HDBFM_ABGR0888       0x000a0000
+        HC_HDBFM_ABGR8888       0x000b0000
+
+Section HC_HDBLoc_MASK          0x0000c000
+------------------------------------------
+        HC_HDBLoc_Local         0x00000000
+        HC_HDBLoc_Sys           0x00004000
+
+Section HC_HDBPit_MASK          0x00003fff		Row pitch
+
+Reg.    HC_SubA_HFBBMSKL        0x0043			Bitmask, low 24 bits.
+												Pixels are ANDed with this
+												value before being written.
+
+Reg.    HC_SubA_HROP            0x0044
+==========================================
+Section HC_HROP_MASK            0x00000f00		Raster operation
+------------------------------------------
+        HC_HROP_BLACK           0x00000000
+        HC_HROP_DPon            0x00000100
+        HC_HROP_DPna            0x00000200
+        HC_HROP_Pn              0x00000300
+        HC_HROP_PDna            0x00000400
+        HC_HROP_Dn              0x00000500
+        HC_HROP_DPx             0x00000600
+        HC_HROP_DPan            0x00000700
+        HC_HROP_DPa             0x00000800
+        HC_HROP_DPxn            0x00000900
+        HC_HROP_D               0x00000a00
+        HC_HROP_DPno            0x00000b00
+        HC_HROP_P               0x00000c00
+        HC_HROP_PDno            0x00000d00
+        HC_HROP_DPo             0x00000e00
+        HC_HROP_WHITE           0x00000f00
+
+Section HC_HFBBMSKH_MASK        0x000000ff		High 8 bits of HFBBMSKL
+
+***********************************************************
+
+Alpha buffer
+
+Reg.    HC_SubA_HABBasL         0x0030			Physical address, low 24 bits
+Reg.    HC_SubA_HABBasH         0x0031			Physical address, high 8 bits
+Reg.    HC_SubA_HABFM           0x0032			Pixel format and row pitch
+==========================================
+Section HC_HABFM_MASK           0x00030000
+Section HC_HABLoc_MASK          0x0000c000
+Section HC_HABPit_MASK          0x000007ff
+
+Alpha test
+
+Reg.    HC_SubA_HATMD           0x0033			Alpha test function and reference
+==========================================
+Section HC_HATMD_MASK           0x00000700		Alpha-test function
+------------------------------------------
+        HC_HATMD_NeverPass      0x00000000
+        HC_HATMD_LT             0x00000100
+        HC_HATMD_EQ             0x00000200
+        HC_HATMD_LE             0x00000300
+        HC_HATMD_GT             0x00000400
+        HC_HATMD_NE             0x00000500
+        HC_HATMD_GE             0x00000600
+        HC_HATMD_AllPass        0x00000700
+
+Section HC_HATREF_MASK          0x000000ff		Reference value to compare with.
+------------------------------------------
+
+Alpha blend
+
+Reg.    HC_SubA_HABLCsat        0x0034
+==========================================
+#define HC_HABLCsat_MASK        0x00010000
+#define HC_HABLCa_MASK          0x0000fc00
+#define HC_HABLCa_C_MASK        0x0000c000
+#define HC_HABLCa_OPC_MASK      0x00003c00
+#define HC_HABLFCa_MASK         0x000003f0
+#define HC_HABLFCa_C_MASK       0x00000300
+#define HC_HABLFCa_OPC_MASK     0x000000f0
+#define HC_HABLCbias_MASK       0x0000000f
+#define HC_HABLCbias_C_MASK     0x00000008
+#define HC_HABLCbias_OPC_MASK   0x00000007
+
+Reg.    HC_SubA_HABLCop         0x0035
+==========================================
+#define HC_HABLdot_MASK         0x00010000
+#define HC_HABLCop_MASK         0x00004000
+#define HC_HABLCb_MASK          0x00003f00
+#define HC_HABLCb_C_MASK        0x00003000
+#define HC_HABLCb_OPC_MASK      0x00000f00
+#define HC_HABLFCb_MASK         0x000000fc
+#define HC_HABLFCb_C_MASK       0x000000c0
+#define HC_HABLFCb_OPC_MASK     0x0000003c
+#define HC_HABLCshift_MASK      0x00000003
+
+Reg.    HC_SubA_HABLAsat        0x0036
+==========================================
+#define HC_HABLAsat_MASK        0x00010000
+#define HC_HABLAa_MASK          0x0000fc00
+#define HC_HABLAa_A_MASK        0x0000c000
+#define HC_HABLAa_OPA_MASK      0x00003c00
+#define HC_HABLFAa_MASK         0x000003f0
+#define HC_HABLFAa_A_MASK       0x00000300
+#define HC_HABLFAa_OPA_MASK     0x000000f0
+#define HC_HABLAbias_MASK       0x0000000f
+#define HC_HABLAbias_A_MASK     0x00000008
+#define HC_HABLAbias_OPA_MASK   0x00000007
+
+Reg.    HC_SubA_HABLAop         0x0037
+==========================================
+#define HC_HABLAop_MASK         0x00004000
+#define HC_HABLAb_MASK          0x00003f00
+#define HC_HABLAb_OPA_MASK      0x00000f00
+#define HC_HABLFAb_MASK         0x000000fc
+#define HC_HABLFAb_OPA_MASK     0x0000003c
+#define HC_HABLAshift_MASK      0x00000003
+
+Reg.    HC_SubA_HABLRCa         0x0038
+Reg.    HC_SubA_HABLRFCa        0x0039
+Reg.    HC_SubA_HABLRCbias      0x003a
+Reg.    HC_SubA_HABLRCb         0x003b
+Reg.    HC_SubA_HABLRFCb        0x003c
+
+Reg.    HC_SubA_HABLRAa         0x003d
+==========================================
+#define HC_HABLRAa_MASK         0x00ff0000
+#define HC_HABLRFAa_MASK        0x0000ff00
+#define HC_HABLRAbias_MASK      0x000000ff
+
+Reg.    HC_SubA_HABLRAb         0x003e
+==========================================
+#define HC_HABLRAb_MASK         0x0000ff00
+#define HC_HABLRFAb_MASK        0x000000ff
+
+
+***********************************************************
+
+Texture engine
+
+/* Attribute of texture n
+ */
+
+Reg.    HC_SubA_HTXnLiBasL      0x0000+i	Low 24-bits of base address i
+======================================
+There are 18 registers. Replace i with a value i = [0, 11] hex.
+
+MSB 8 bits of texture addresses
+
+Reg.    HC_SubA_HTXnL012BasH    0x0020	Map 0 - 2
+Reg.    HC_SubA_HTXnL345BasH    0x0021	Map 3 - 5
+Reg.    HC_SubA_HTXnL678BasH    0x0022	Map 6 - 8
+Reg.    HC_SubA_HTXnL9abBasH    0x0023	Map 9 - b
+Reg.    HC_SubA_HTXnLcdeBasH    0x0024	Map c - e
+Reg.    HC_SubA_HTXnLf1011BasH  0x0025	Map f - 11
+
+Reg.    HC_SubA_HTXnL0Pit       0x002b + i
+==========================================
+There are 18 registers. Replace i with a value i = [0, 11] hex.
+
+Section HC_HTXnLnPit_MASK       0x00003fff	Byte-pitch (map 0 only)
+Section HC_HTXnEnPit_MASK       0x00080000	Enable byte-pitch
+Section HC_HTXnLnPitE_MASK      0x00f00000	Log2 pitch
+
+Width exponents (log2 of texture width)
+
+Reg.    HC_SubA_HTXnL0_5WE      0x004b		Map 0 - 5
+Reg.    HC_SubA_HTXnL6_bWE      0x004c		Map 6 - b
+Reg.    HC_SubA_HTXnLc_11WE     0x004d		Map c - 11
+
+Height exponents (log2 of texture width)
+
+Reg.    HC_SubA_HTXnL0_5HE      0x0051		Map 0 - 5
+Reg.    HC_SubA_HTXnL6_bHE      0x0052		Map 6 - b
+Reg.    HC_SubA_HTXnLc_11HE     0x0053		Map c - 11
+
+
+
+Reg.    HC_SubA_HTXnL0OS        0x0077
+Reg.    HC_SubA_HTXnTB          0x0078
+Reg.    HC_SubA_HTXnMPMD        0x0079		Texture mapping params
+==========================================
+Section HC_HTXnMPMD_SMASK       0x00070000	S axis wrapping function
+------------------------------------------
+        HC_HTXnMPMD_Ssingle     0x00000000
+        HC_HTXnMPMD_Sclamp      0x00010000
+        HC_HTXnMPMD_Srepeat     0x00020000
+        HC_HTXnMPMD_Smirror     0x00030000
+        HC_HTXnMPMD_Swrap       0x00040000
+
+Section HC_HTXnMPMD_TMASK       0x00380000	T axis wrapping function
+------------------------------------------
+        HC_HTXnMPMD_Tsingle     0x00000000
+        HC_HTXnMPMD_Tclamp      0x00080000
+        HC_HTXnMPMD_Trepeat     0x00100000
+        HC_HTXnMPMD_Tmirror     0x00180000
+        HC_HTXnMPMD_Twrap       0x00200000
+
+Section HC_HTXnLODDTf_MASK      0x00000007	????
+Section HC_HTXnXY2ST_MASK       0x00000008	????
+
+Reg.    HC_SubA_HTXnCLODu       0x007a
+
+Reg.    HC_SubA_HTXnFM          0x007b		Texture pixel format and mem type
+==========================================
+Section HC_HTXnFM_MASK          0x00ff0000	Texture pixel format, see HC_HTXnFM_MASK
+											in regs3d.h for a list of formats.
+Section HC_HTXnLoc_MASK         0x00000003
+------------------------------------------
+        HC_HTXnLoc_Local        0x00000000
+        HC_HTXnLoc_Sys          0x00000002
+        HC_HTXnLoc_AGP          0x00000003
+
+Reg.    HC_SubA_HTXnTRCH        0x007c
+Reg.    HC_SubA_HTXnTRCL        0x007d
+Reg.    HC_SubA_HTXnTBC         0x007e
+Reg.    HC_SubA_HTXnTRAH        0x007f
+
+Blending, fog etc.
+
+Reg.    HC_SubA_HTXnTBLCsat     0x0080
+Reg.    HC_SubA_HTXnTBLCop      0x0081
+Reg.    HC_SubA_HTXnTBLMPfog    0x0082
+Reg.    HC_SubA_HTXnTBLAsat     0x0083
+Reg.    HC_SubA_HTXnTBLRCa      0x0085
+Reg.    HC_SubA_HTXnTBLRCb      0x0086
+Reg.    HC_SubA_HTXnTBLRCc      0x0087
+Reg.    HC_SubA_HTXnTBLRCbias   0x0088
+Reg.    HC_SubA_HTXnTBLRAa      0x0089
+Reg.    HC_SubA_HTXnTBLRFog     0x008a
+Reg.    HC_SubA_HTXnBumpM00     0x0090
+Reg.    HC_SubA_HTXnBumpM01     0x0091
+Reg.    HC_SubA_HTXnBumpM10     0x0092
+Reg.    HC_SubA_HTXnBumpM11     0x0093
+Reg.    HC_SubA_HTXnLScale      0x0094
+Reg.    HC_SubA_HTXSMD          0x0000
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/rops.h b/DirectFB-1.4.0/gfxdrivers/cle266/rops.h
new file mode 100644
index 0000000..fcc55e7
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/rops.h
@@ -0,0 +1,296 @@
+/* Adapted version of xc/programs/Xserver/hw/xfree86/xaa/xaarop.h v1.1
+
+Copyright (c) The XFree86 Project, Inc 199?
+No copyright is given in the original file...
+
+-----------------
+
+Key for raster operation names:
+
+This is based on guesswork, so it may be inaccurate and incomplete. :-)
+
+D = Destination, S = Source, P = Pattern
+n = logical not, o = logical or, a = logical and, x = logical exclusive or
+0 = all zeros (black), 1 = all ones (white)
+
+When forming a ROP name, the data sources and destination preceeds the operations.
+
+Example: ROP_DSPDSanaxxn 
+
+It can be decoded as follows:
+DSPDSanaxxn => D an S a P x D xn S =>
+Destination (and not) Source (and) Pattern (xor) Destination (xor not) Source.
+
+When blitting or drawing, the result of the raster operation will copied to
+the destination.
+
+Common examples:
+
+ROP_P => destination = pattern, i.e drawing.
+ROP_S => destination = source, i.e copying.
+ROP_DSx => destination = source (xor) destination
+ROP_D => destination = destination, i.e does nothing.
+
+*/
+
+#ifndef _XFREE86_ROPS_H
+#define _XFREE86_ROPS_H
+
+#define ROP_0           0x00
+#define ROP_DPSoon      0x01
+#define ROP_DPSona      0x02
+#define ROP_PSon        0x03
+#define ROP_SDPona      0x04
+#define ROP_DPon        0x05
+#define ROP_PDSxnon     0x06
+#define ROP_PDSaon      0x07
+#define ROP_SDPnaa      0x08
+#define ROP_PDSxon      0x09
+#define ROP_DPna        0x0A
+#define ROP_PSDnaon     0x0B
+#define ROP_SPna        0x0C
+#define ROP_PDSnaon     0x0D
+#define ROP_PDSonon     0x0E
+#define ROP_Pn          0x0F
+#define ROP_PDSona      0x10
+#define ROP_DSon        0x11
+#define ROP_SDPxnon     0x12
+#define ROP_SDPaon      0x13
+#define ROP_DPSxnon     0x14
+#define ROP_DPSaon      0x15
+#define ROP_PSDPSanaxx  0x16
+#define ROP_SSPxDSxaxn  0x17
+#define ROP_SPxPDxa     0x18
+#define ROP_SDPSanaxn   0x19
+#define ROP_PDSPaox     0x1A
+#define ROP_SDPSxaxn    0x1B
+#define ROP_PSDPaox     0x1C
+#define ROP_DSPDxaxn    0x1D
+#define ROP_PDSox       0x1E
+#define ROP_PDSoan      0x1F
+#define ROP_DPSnaa      0x20
+#define ROP_SDPxon      0x21
+#define ROP_DSna        0x22
+#define ROP_SPDnaon     0x23
+#define ROP_SPxDSxa     0x24
+#define ROP_PDSPanaxn   0x25
+#define ROP_SDPSaox     0x26
+#define ROP_SDPSxnox    0x27
+#define ROP_DPSxa       0x28
+#define ROP_PSDPSaoxxn  0x29
+#define ROP_DPSana      0x2A
+#define ROP_SSPxPDxaxn  0x2B
+#define ROP_SPDSoax     0x2C
+#define ROP_PSDnox      0x2D
+#define ROP_PSDPxox     0x2E
+#define ROP_PSDnoan     0x2F
+#define ROP_PSna        0x30
+#define ROP_SDPnaon     0x31
+#define ROP_SDPSoox     0x32
+#define ROP_Sn          0x33
+#define ROP_SPDSaox     0x34
+#define ROP_SPDSxnox    0x35
+#define ROP_SDPox       0x36
+#define ROP_SDPoan      0x37
+#define ROP_PSDPoax     0x38
+#define ROP_SPDnox      0x39
+#define ROP_SPDSxox     0x3A
+#define ROP_SPDnoan     0x3B
+#define ROP_PSx         0x3C
+#define ROP_SPDSonox    0x3D
+#define ROP_SPDSnaox    0x3E
+#define ROP_PSan        0x3F
+#define ROP_PSDnaa      0x40
+#define ROP_DPSxon      0x41
+#define ROP_SDxPDxa     0x42
+#define ROP_SPDSanaxn   0x43
+#define ROP_SDna        0x44
+#define ROP_DPSnaon     0x45
+#define ROP_DSPDaox     0x46
+#define ROP_PSDPxaxn    0x47
+#define ROP_SDPxa       0x48
+#define ROP_PDSPDaoxxn  0x49
+#define ROP_DPSDoax     0x4A
+#define ROP_PDSnox      0x4B
+#define ROP_SDPana      0x4C
+#define ROP_SSPxDSxoxn  0x4D
+#define ROP_PDSPxox     0x4E
+#define ROP_PDSnoan     0x4F
+#define ROP_PDna        0x50
+#define ROP_DSPnaon     0x51
+#define ROP_DPSDaox     0x52
+#define ROP_SPDSxaxn    0x53
+#define ROP_DPSonon     0x54
+#define ROP_Dn          0x55
+#define ROP_DPSox       0x56
+#define ROP_DPSoan      0x57
+#define ROP_PDSPoax     0x58
+#define ROP_DPSnox      0x59
+#define ROP_DPx         0x5A
+#define ROP_DPSDonox    0x5B
+#define ROP_DPSDxox     0x5C
+#define ROP_DPSnoan     0x5D
+#define ROP_DPSDnaox    0x5E
+#define ROP_DPan        0x5F
+#define ROP_PDSxa       0x60
+#define ROP_DSPDSaoxxn  0x61
+#define ROP_DSPDoax     0x62
+#define ROP_SDPnox      0x63
+#define ROP_SDPSoax     0x64
+#define ROP_DSPnox      0x65
+#define ROP_DSx         0x66
+#define ROP_SDPSonox    0x67
+#define ROP_DSPDSonoxxn 0x68
+#define ROP_PDSxxn      0x69
+#define ROP_DPSax       0x6A
+#define ROP_PSDPSoaxxn  0x6B
+#define ROP_SDPax       0x6C
+#define ROP_PDSPDoaxxn  0x6D
+#define ROP_SDPSnoax    0x6E
+#define ROP_PDSxnan     0x6F
+#define ROP_PDSana      0x70
+#define ROP_SSDxPDxaxn  0x71
+#define ROP_SDPSxox     0x72
+#define ROP_SDPnoan     0x73
+#define ROP_DSPDxox     0x74
+#define ROP_DSPnoan     0x75
+#define ROP_SDPSnaox    0x76
+#define ROP_DSan        0x77
+#define ROP_PDSax       0x78
+#define ROP_DSPDSoaxxn  0x79
+#define ROP_DPSDnoax    0x7A
+#define ROP_SDPxnan     0x7B
+#define ROP_SPDSnoax    0x7C
+#define ROP_DPSxnan     0x7D
+#define ROP_SPxDSxo     0x7E
+#define ROP_DPSaan      0x7F
+#define ROP_DPSaa       0x80
+#define ROP_SPxDSxon    0x81
+#define ROP_DPSxna      0x82
+#define ROP_SPDSnoaxn   0x83
+#define ROP_SDPxna      0x84
+#define ROP_PDSPnoaxn   0x85
+#define ROP_DSPDSoaxx   0x86
+#define ROP_PDSaxn      0x87
+#define ROP_DSa         0x88
+#define ROP_SDPSnaoxn   0x89
+#define ROP_DSPnoa      0x8A
+#define ROP_DSPDxoxn    0x8B
+#define ROP_SDPnoa      0x8C
+#define ROP_SDPSxoxn    0x8D
+#define ROP_SSDxPDxax   0x8E
+#define ROP_PDSanan     0x8F
+#define ROP_PDSxna      0x90
+#define ROP_SDPSnoaxn   0x91
+#define ROP_DPSDPoaxx   0x92
+#define ROP_SPDaxn      0x93
+#define ROP_PSDPSoaxx   0x94
+#define ROP_DPSaxn      0x95
+#define ROP_DPSxx       0x96
+#define ROP_PSDPSonoxx  0x97
+#define ROP_SDPSonoxn   0x98
+#define ROP_DSxn        0x99
+#define ROP_DPSnax      0x9A
+#define ROP_SDPSoaxn    0x9B
+#define ROP_SPDnax      0x9C
+#define ROP_DSPDoaxn    0x9D
+#define ROP_DSPDSaoxx   0x9E
+#define ROP_PDSxan      0x9F
+#define ROP_DPa         0xA0
+#define ROP_PDSPnaoxn   0xA1
+#define ROP_DPSnoa      0xA2
+#define ROP_DPSDxoxn    0xA3
+#define ROP_PDSPonoxn   0xA4
+#define ROP_PDxn        0xA5
+#define ROP_DSPnax      0xA6
+#define ROP_PDSPoaxn    0xA7
+#define ROP_DPSoa       0xA8
+#define ROP_DPSoxn      0xA9
+#define ROP_D           0xAA
+#define ROP_DPSono      0xAB
+#define ROP_SPDSxax     0xAC
+#define ROP_DPSDaoxn    0xAD
+#define ROP_DSPnao      0xAE
+#define ROP_DPno        0xAF
+#define ROP_PDSnoa      0xB0
+#define ROP_PDSPxoxn    0xB1
+#define ROP_SSPxDSxox   0xB2
+#define ROP_SDPanan     0xB3
+#define ROP_PSDnax      0xB4
+#define ROP_DPSDoaxn    0xB5
+#define ROP_DPSDPaoxx   0xB6
+#define ROP_SDPxan      0xB7
+#define ROP_PSDPxax     0xB8
+#define ROP_DSPDaoxn    0xB9
+#define ROP_DPSnao      0xBA
+#define ROP_DSno        0xBB
+#define ROP_SPDSanax    0xBC
+#define ROP_SDxPDxan    0xBD
+#define ROP_DPSxo       0xBE
+#define ROP_DPSano      0xBF
+#define ROP_PSa         0xC0
+#define ROP_SPDSnaoxn   0xC1
+#define ROP_SPDSonoxn   0xC2
+#define ROP_PSxn        0xC3
+#define ROP_SPDnoa      0xC4
+#define ROP_SPDSxoxn    0xC5
+#define ROP_SDPnax      0xC6
+#define ROP_PSDPoaxn    0xC7
+#define ROP_SDPoa       0xC8
+#define ROP_SPDoxn      0xC9
+#define ROP_DPSDxax     0xCA
+#define ROP_SPDSaoxn    0xCB
+#define ROP_S           0xCC
+#define ROP_SDPono      0xCD
+#define ROP_SDPnao      0xCE
+#define ROP_SPno        0xCF
+#define ROP_PSDnoa      0xD0
+#define ROP_PSDPxoxn    0xD1
+#define ROP_PDSnax      0xD2
+#define ROP_SPDSoaxn    0xD3
+#define ROP_SSPxPDxax   0xD4
+#define ROP_DPSanan     0xD5
+#define ROP_PSDPSaoxx   0xD6
+#define ROP_DPSxan      0xD7
+#define ROP_PDSPxax     0xD8
+#define ROP_SDPSaoxn    0xD9
+#define ROP_DPSDanax    0xDA
+#define ROP_SPxDSxan    0xDB
+#define ROP_SPDnao      0xDC
+#define ROP_SDno        0xDD
+#define ROP_SDPxo       0xDE
+#define ROP_SDPano      0xDF
+#define ROP_PDSoa       0xE0
+#define ROP_PDSoxn      0xE1
+#define ROP_DSPDxax     0xE2
+#define ROP_PSDPaoxn    0xE3
+#define ROP_SDPSxax     0xE4
+#define ROP_PDSPaoxn    0xE5
+#define ROP_SDPSanax    0xE6
+#define ROP_SPxPDxan    0xE7
+#define ROP_SSPxDSxax   0xE8
+#define ROP_DSPDSanaxxn 0xE9
+#define ROP_DPSao       0xEA
+#define ROP_DPSxno      0xEB
+#define ROP_SDPao       0xEC
+#define ROP_SDPxno      0xED
+#define ROP_DSo         0xEE
+#define ROP_SDPnoo      0xEF
+#define ROP_P           0xF0
+#define ROP_PDSono      0xF1
+#define ROP_PDSnao      0xF2
+#define ROP_PSno        0xF3
+#define ROP_PSDnao      0xF4
+#define ROP_PDno        0xF5
+#define ROP_PDSxo       0xF6
+#define ROP_PDSano      0xF7
+#define ROP_PDSao       0xF8
+#define ROP_PDSxno      0xF9
+#define ROP_DPo         0xFA
+#define ROP_DPSnoo      0xFB
+#define ROP_PSo         0xFC
+#define ROP_PSDnoo      0xFD
+#define ROP_DPSoo       0xFE
+#define ROP_1           0xFF
+
+#endif // _XFREE86_ROPS_H
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.c b/DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.c
new file mode 100644
index 0000000..7bfd21b
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.c
@@ -0,0 +1,209 @@
+/*
+   Copyright (c) 2003 Andreas Robinson, All rights reserved.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+*/
+
+#include <stdio.h>
+#include <fcntl.h>
+#include <string.h>
+#include <errno.h>
+#include <asm/types.h>
+#include <stdlib.h>
+#include <unistd.h>
+#include <sys/mman.h>
+#include <directfb.h>
+#include <core/coredefs.h>
+#include "uc_probe.h"
+
+/**
+* Match a device string with a device ID.
+*
+* @param s          Device string read from /proc/bus/pci/devices
+* @param devinfo    Output: device information.
+*
+* @returns 1: success, 0: line too short, -1: parse error.
+*/
+
+int uc_parse_vga_device(char* s, struct uc_vga_device* devinfo)
+{
+    int i;
+    int item[17];
+
+    /* Build list of item start positions. */
+
+    item[0] = 0;
+    item[1] = 5;
+    item[2] = 14;
+
+    for (i = 3; i < 18; i++) {
+        item[i] = (i - 3) * 9 + 16;
+    }
+
+    /* Perform some basic sanity checks */
+
+    if (strlen(s) < 142) return 0;
+
+    for (i = 1; i < 17; i++) {  /* Verify tab positions. */
+        if (s[item[i]-1] != 9) return -1;
+    }
+
+    /* Read data. */
+
+    devinfo->devid = strtoul(s + item[1], NULL, 16);
+    devinfo->busid = strtoul(s + item[0], NULL, 16);
+    devinfo->irq = strtoul(s + item[2], NULL, 16);
+    devinfo->fbmem = strtoul(s + item[3], NULL, 16) & ~0xf;
+    devinfo->iomem = strtoul(s + item[4], NULL, 16) & ~0xf;
+    devinfo->fbsize = strtoul(s + item[3 + 7], NULL, 16);
+    devinfo->iosize = strtoul(s + item[4 + 7], NULL, 16);
+
+    /* More sanity checks */
+
+    if ((devinfo->fbmem == 0) || (devinfo->iomem == 0) ||
+        (devinfo->fbsize == 0) || (devinfo->iosize == 0))
+        return 0;
+
+    return 1;
+}
+
+/**
+ * Probe the PCI bus for the first matching device.
+ *
+ * @param vendor    Vendor ID
+ * @param device    Device ID
+ * @param name      Device name, used for error messages.
+ *                  Example: "UniChrome graphics controller"
+ * @param devinfo   Output.
+ *
+ * @returns DFB_OK or DFB_FAILURE
+ */
+
+DFBResult uc_probe_vga_device(u16 vendor, u16 device, char* name,
+                        struct uc_vga_device* devinfo)
+{
+    char fbuf[256];
+    FILE* file;
+    char* s;
+    int r;
+    int n;
+
+    memset(devinfo, 0, sizeof(struct uc_vga_device));
+
+    file = fopen("/proc/bus/pci/devices", "r");
+    if (!file) {
+        D_ERROR("Can not open /proc/bus/pci/devices. "
+            "Will not probe for %s.\n", name);
+        return DFB_FAILURE;
+    }
+
+    n = 0;
+
+    while (1)
+    {
+        errno = 0;
+        s = fgets(fbuf, 256, file);
+        if (s == NULL) {
+            if (errno > 0) {
+                D_ERROR("Error reading /proc/bus/pci/devices. "
+                    "Probing for %s failed.\n", name);
+            }
+            fclose(file);
+            return DFB_FAILURE;
+        }
+        s[255] = 0;
+        n++;
+
+        r = uc_parse_vga_device(s, devinfo);
+
+        if (r == 1) {
+            if (devinfo->devid == ((vendor << 16) | device)) {
+                fclose(file);
+                return DFB_OK;
+            }
+        }
+        else if (r == -1) {
+            D_ERROR("Error parsing /proc/bus/pci/devices on line %d. "
+                "Probing for %s failed.\n", n, name);
+            fclose(file);
+            return DFB_FAILURE;
+        }
+    }
+}
+
+/**
+ * Mmap the IO memory area of a VGA device.
+ *
+ * @param devinfo   result from probing function
+ * @param name      Device name, used for error messges.
+ *
+ * @returns DFB_OK or DFB_FAILURE
+ */
+
+DFBResult uc_mmap_vga_device(struct uc_vga_device* devinfo, char* name)
+{
+    int fd;
+    void* result;
+
+    fd = open("/dev/mem", O_RDWR);
+    if (fd < 0) {
+        D_ERROR("Cannot open /dev/mem: %s.\n", strerror(errno));
+        return DFB_FAILURE;
+    }
+
+    result = mmap(NULL, devinfo->iosize, PROT_READ | PROT_WRITE,
+        MAP_SHARED, fd, devinfo->iomem);
+
+    close(fd);  
+    
+    if (result == MAP_FAILED) {
+        D_ERROR("Cannot mmap %s hardware registers. "
+            "Initialization failed.\n", name);
+        return DFB_FAILURE;
+    }
+
+    devinfo->iomap = result;
+    return DFB_OK;
+}
+
+void uc_munmap_vga_device(struct uc_vga_device* devinfo)
+{
+    if (devinfo->iomap) munmap(devinfo->iomap, devinfo->iosize);
+    devinfo->iomap = NULL;
+}
+
+/* Usage example / test program */
+
+/*
+
+int main()
+{
+    char* name = "CLE266 VGA adapter";
+
+    int r;
+    struct uc_vga_device devinfo;
+
+    r = uc_probe_vga_device(0x1106, 0x3122, name, &devinfo);
+
+    if (r == DFB_OK) {
+        printf("%s found at %02x:%02x.%x. Using IRQ %d.\n",
+            name,
+            devinfo.busid >> 8, (devinfo.busid >> 3) & 0x1f,
+            devinfo.busid & 3, devinfo.irq);
+        printf("FB: %dMB @ 0x%x  ", devinfo.fbsize >> 20, devinfo.fbmem);
+        printf("MMIO: %dKB @ 0x%x\n", devinfo.iosize >> 10, devinfo.iomem);
+
+        r = uc_mmap_vga_device(&devinfo, name);
+        if (r == DFB_OK) {
+            printf("IO area mmapped to 0x%x.\n", (u32) devinfo.iomap);
+        }
+    }
+
+    uc_munmap_vga_device(&devinfo);
+    return 0;
+}
+
+*/
diff --git a/DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.h b/DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.h
new file mode 100644
index 0000000..e2d01e4
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cle266/uc_probe.h
@@ -0,0 +1,34 @@
+/*
+   Copyright (c) 2003 Andreas Robinson, All rights reserved.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+*/
+
+#ifndef __UC_PROBE_H__
+#define __UC_PROBE_H__
+
+struct uc_vga_device 
+{
+    u32 busid;      /* bus<8>:dev<5>:sub<3> */
+    u32 devid;      /* mfr<16>:device<16> */
+    u32 irq;        /* IRQ number */
+
+    u32 fbmem;      /* Framebuffer base address */
+    u32 fbsize;     /* Framebuffer size in bytes */
+    void* fbmap;    /* Mmapped frambuffer address */
+
+    u32 iomem;      /* IO area base address */
+    u32 iosize;     /* IO area size in bytes */
+    void* iomap;    /* Mmapped IO area address */
+};
+
+int uc_parse_vga_device(char* s, struct uc_vga_device* devinfo);
+DFBResult uc_probe_vga_device(u16 vendor, u16 device, char* name,
+                        struct uc_vga_device* devinfo);
+DFBResult uc_mmap_vga_device(struct uc_vga_device* devinfo, char* name);
+void uc_munmap_vga_device(struct uc_vga_device* devinfo);
+
+#endif /* __UC_PROBE_H__ */
diff --git a/DirectFB-1.4.0/gfxdrivers/cx2450x/Makefile.am b/DirectFB-1.4.0/gfxdrivers/cx2450x/Makefile.am
new file mode 100644
index 0000000..2c563a1
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cx2450x/Makefile.am
@@ -0,0 +1,33 @@
+## Makefile.am for DirectFB/src/core/gfxcards/cx2450x
+
+INCLUDES = \
+	-I$(top_srcdir)/include	\
+	-I$(top_builddir)/lib	\
+	-I$(top_srcdir)/lib	\
+	-I$(top_srcdir)/src	\
+	-I$(top_srcdir)/systems
+
+cx2450x_LTLIBRARIES = libdirectfb_cx2450x.la
+
+if BUILD_STATIC
+cx2450x_DATA = $(cx2450x_LTLIBRARIES:.la=.o)
+endif
+
+cx2450xdir = $(MODULEDIR)/gfxdrivers
+
+libdirectfb_cx2450x_la_SOURCES =	\
+	cx2450x.c			\
+	cx2450x.h
+
+libdirectfb_cx2450x_la_LDFLAGS = 	\
+	-export-dynamic			\
+	-avoid-version			\
+	$(DFB_LDFLAGS)
+
+libdirectfb_cx2450x_la_LIBADD = 	\
+	$(top_builddir)/lib/direct/libdirect.la \
+	$(top_builddir)/src/libdirectfb.la
+
+
+include $(top_srcdir)/rules/libobject.make
+	
diff --git a/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-accel.c b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-accel.c
new file mode 100644
index 0000000..8c1e0a5
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-accel.c
@@ -0,0 +1,193 @@
+/* This file is a part of cx2450x.c and will be included directly */
+
+/*******************************************************************************/
+/* fuction block for accessing the GXA registers                               */
+/*******************************************************************************/
+
+static u32 _read_gxa(volatile u8 *base_addr, u32 offset)
+{
+    return *(volatile u32 *)(base_addr + offset);
+}
+
+/*******************************************************************************/
+
+static void _write_gxa(volatile u8 *base_addr, u32 offset, u32 value)
+{
+//    if (offset & 0x0003F800)            /* it's not a register access, so check the queue */
+    while( (*(volatile u32 *)(base_addr + GXA_DEPTH_REG)) & 0x40000000);
+
+    *(volatile u32 *)(base_addr + offset) = value;
+}
+
+/*******************************************************************************/
+/* all the accelleration functions                                             */
+/*******************************************************************************/
+
+bool _cx2450x_draw_line(void *driver_data, void *device_data, DFBRegion *line)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    CX2450XDeviceData *dev = (CX2450XDeviceData *)device_data;
+
+    u32 cmd = GXA_CMD_NOT_TEXT | GXA_SRC_BMP_SEL(2) | GXA_DST_BMP_SEL(2) | dev->d_cmd_opts;
+
+    _write_gxa(drv->gxa_base, GXA_LINE_CONTROL_REG, 0x00000000);
+    _write_gxa(drv->gxa_base, cmd | GXA_PARAM_COUNT(2), GXA_POINT(line->x1, line->y1));
+    _write_gxa(drv->gxa_base, cmd | GXA_PARAM_COUNT(1), GXA_POINT(line->x2, line->y2));
+
+    return true;
+}
+
+/*******************************************************************************/
+
+static bool _cx2450x_draw_rectangle(void *driver_data, void *device_data, DFBRectangle *rect)
+{
+    /* the accelerator can handle multi lines. This means, with the first command, we setup
+       the start and endpoint for the first line to draw. The GXA will automatically setup
+       end point as the start point of the new line. So we only need to setup the new end point. */
+
+    /* Here we do not use the things written above. Drawing 4 lines with their start and end point
+       is faster than just passing next endpoint. Seems the GXA lacks performance, if we draw
+       backward (from right to left anf from bottom to top). */
+
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    CX2450XDeviceData *dev = (CX2450XDeviceData *)device_data;
+
+    u32 cmd = GXA_CMD_NOT_TEXT | GXA_SRC_BMP_SEL(2) | GXA_DST_BMP_SEL(2) | GXA_PARAM_COUNT(2) | dev->d_cmd_opts;
+    u32 xr = rect->x + rect->w;
+    u32 yl = rect->y + rect->h;
+
+    /* draw the horizontal lines */
+    _write_gxa(drv->gxa_base, GXA_LINE_CONTROL_REG, 0x00000404);	/* X is major, skip last pixel */
+    
+    /* upper left to upper right */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(xr, rect->y));		/* endig point */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x, rect->y));	/* start point */
+
+    /* lower left to lower right */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(xr, yl));			/* endig point */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x, yl));		/* start point */
+
+    /* draw the vertical lines */
+    _write_gxa(drv->gxa_base, GXA_LINE_CONTROL_REG, 0x00000004);	/* Y is major, skip last pixel */
+
+    /* upper left to lower left */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x, yl));		/* endig point */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x, rect->y));	/* start point */
+
+    /* upper right to lower right */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(xr, yl));			/* endig point */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(xr, rect->y));		/* start point */
+
+    return true;
+}
+
+/*******************************************************************************/
+
+static bool _cx2450x_fill_rectangle(void *driver_data, void *device_data, DFBRectangle *rect)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    CX2450XDeviceData *dev = (CX2450XDeviceData *)device_data;
+
+    u32 cmd = GXA_CMD_NOT_TEXT | GXA_SRC_BMP_SEL(2) | GXA_DST_BMP_SEL(2) | GXA_PARAM_COUNT(2) | dev->d_cmd_opts;
+    u32 line = 0;
+
+    _write_gxa(drv->gxa_base, GXA_LINE_CONTROL_REG, 0x00000404);        /* X is major, skip last pixel */
+
+    while (line < rect->h)
+    {
+        _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x + rect->w, rect->y + line));      /* endig point */
+        _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x, rect->y + line));                /* start point */
+        line++;
+    }
+
+    return true;
+}
+
+/*******************************************************************************/
+
+static bool _cx2450x_fill_triangle(void *driver_data, void *device_data, DFBTriangle *tri)
+{
+    /* unsupported */
+    return true;
+}
+
+/*******************************************************************************/
+
+static bool _cx2450x_blit(void *driver_data, void *device_data, DFBRectangle *rect, int dx, int dy)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    CX2450XDeviceData *dev = (CX2450XDeviceData *)device_data;
+    u32 cmd = GXA_CMD_BLT | GXA_CMD_NOT_TEXT | GXA_SRC_BMP_SEL(1) | GXA_DST_BMP_SEL(2) | GXA_PARAM_COUNT(3) | dev->b_cmd_opts;
+
+    if (dev->b_soft)
+	return false;
+
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(dx, dy));             /* destination x/y */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->w, rect->h));   /* source width/hight */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(rect->x, rect->y));   /* source x/y */
+
+    return true;
+}
+
+/*******************************************************************************/
+
+static bool _cx2450x_stretchblit(void *driver_data, void *device_data, DFBRectangle *srect, DFBRectangle *drect)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    CX2450XDeviceData *dev = (CX2450XDeviceData *)device_data;
+    u32 cmd = GXA_CMD_STRETCH_BLT | GXA_CMD_BLT | GXA_CMD_NOT_TEXT | GXA_SRC_BMP_SEL(1) | GXA_DST_BMP_SEL(2) | GXA_PARAM_COUNT(7) | dev->b_cmd_opts;
+    u32 ys = 1, xs = 1, sp = 1;
+    u32 hco, vco;
+
+    if ((dev->b_flags & DSBLIT_SRC_COLORKEY) || (dev->b_soft))	/* we can not stretch blit with color keying (source transparency) */
+	return false;
+
+    if (dev->b_cmd_opts & GXA_CMD_NOT_ALPHA)
+    {
+        cmd |= GXA_CMD_ROP;
+	u32 cfgreg = _read_gxa(drv->gxa_base, GXA_CFG_REG);
+	cfgreg &= 0xFFFFCFE0;
+	_write_gxa(drv->gxa_base, GXA_CFG_REG, cfgreg);
+    }
+
+    /* prevent divide by 0 */
+    if (drect->h)
+        ys = ((srect->h << 16) / drect->h) & 0x00FFFFFF;
+    if (drect->w)
+        xs = ((srect->w << 16) / drect->w) & 0x00FFFFFF;
+    if (srect->w)
+        sp = (((drect->w << 20) / srect->w) * 3) & 0x0FFFFFFF;
+
+    if (srect->w <= drect->w)
+	hco = 0;
+    else if (srect->w <= (drect->w << 1))
+	hco = 0x0100;
+    else if (srect->w <= (drect->w << 2))
+	hco = 0x0200;
+    else
+	hco = 0x0300;
+
+    if (srect->h <= drect->h)
+	vco = 0;
+    else if (srect->h <= (drect->h << 1))
+	vco = 0x0100;
+    else if (srect->h <= (drect->h << 2))
+	vco = 0x0200;
+    else
+	vco = 0x0300;
+
+    _write_gxa(drv->gxa_base, GXA_CMD_HFILTER | GXA_SRC_BMP_SEL(1) | GXA_DST_BMP_SEL(2) | GXA_PARAM_COUNT(1), (u32)(drv->coeff_table + hco));
+    _write_gxa(drv->gxa_base, GXA_CMD_VFILTER | GXA_SRC_BMP_SEL(1) | GXA_DST_BMP_SEL(2) | GXA_PARAM_COUNT(1), (u32)(drv->coeff_table + vco));
+
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(drect->x, drect->y)); /* destination x/y */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(drect->w, drect->h)); /* destination width/hight */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(srect->x, srect->y)); /* source x/y */
+    _write_gxa(drv->gxa_base, cmd, GXA_POINT(srect->w, srect->h)); /* source width/hight */
+    _write_gxa(drv->gxa_base, cmd, ys);                            /* Y sclae factor */
+    _write_gxa(drv->gxa_base, cmd, xs);                            /* X sclae factor */
+    _write_gxa(drv->gxa_base, cmd, sp);                            /* destination X patch */
+
+    return true;
+}
+
+/*******************************************************************************/
diff --git a/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-state.c b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-state.c
new file mode 100644
index 0000000..32f940b
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-state.c
@@ -0,0 +1,351 @@
+/* This file is a part of cx2450x.c and will be included directly */
+
+static u32 _make_cx2450x_bmp_reg(DFBSurfacePixelFormat dfbcolorformat, u32 pitch)
+{
+    u32 reg = 0;
+
+    switch (DFB_BITS_PER_PIXEL(dfbcolorformat))
+    {
+        case 32:                                /* 32 bpp */
+            reg = (3 << 16) | (pitch / 4);
+            break;
+        case 16:                                /* 16 bpp */
+            reg = (2 << 16) | (pitch / 2);
+            break;
+        case 8:                                 /* 8 bpp */
+            reg = (1 << 16) |  pitch;
+            break;
+        default:
+            D_INFO("%s() unhandled %d bpp format\n", __FUNCTION__, DFB_BITS_PER_PIXEL(dfbcolorformat));
+            reg = (1 << 16) |  pitch;
+            break;
+    }
+
+    switch (dfbcolorformat)
+    {
+	case DSPF_RGB16:        /* 16 bit   RGB (2 byte, red 5@11, green 6@5, blue 5@0) */
+	    reg |= 0x08 << 16;
+	    break;
+	case DSPF_ARGB1555:     /* 16 bit  ARGB (2 byte, alpha 1@15, red 5@10, green 5@5, blue 5@0) */
+	    reg |= 0x10 << 16;
+	    break;
+        case DSPF_AYUV:         /* 32 bit  AYUV (4 byte, alpha 8@24, Y 8@16, Cb 8@8, Cr 8@0) */
+	    reg |= 0x04 << 16;
+	    reg |= 3 << 21;	/* Y and C in range from 0 to 255 */
+	    break;
+	default:
+            break;
+    }
+																																		
+    return reg;
+}
+
+/*******************************************************************************/
+
+static u32 _make_cx2450x_color(DFBColor color, DFBSurfacePixelFormat format)
+{
+    u32 cx_color = 0;
+
+    switch (format)
+    {
+	case DSPF_RGB32:	/* 32 bit RGB without alpha channel, but DFB in case of no alpha seems to set it to 0xFF */
+	case DSPF_ARGB:		/* 32 bit RGB including alpha channel */
+	    cx_color = (color.a << 24) | (color.r << 16) | (color.g << 8) | color.b;
+	    break;
+	default:
+            D_INFO("%s() unhandled color format %.8X\n", __FUNCTION__, format);
+	    break;
+    }
+
+    return cx_color;
+}
+
+/*******************************************************************************/
+
+static void _cx2450x_check_state(void *driver_data, void *device_data, CardState *state, DFBAccelerationMask accel)
+{
+    switch (state->destination->config.format)
+    {
+        /* supported color formats - the HW knows more, but they does not fit to DFB's formats (espeically YUV) */
+	case DSPF_RGB32:	/* 24 bit   RGB (4 byte, nothing@24, red 8@16, green 8@8, blue 8@0) */
+        case DSPF_ARGB:		/* 32 bit  ARGB (4 byte, alpha 8@24, red 8@16, green 8@8, blue 8@0) */
+            break;
+        default:
+    	    /* all the DFB formats, which are not handled by the HW directly  */
+//	    D_INFO("%s() unhandled destination format 0x%.8X\n", __FUNCTION__, state->destination->config.format);
+            return;
+    }
+
+    if (DFB_DRAWING_FUNCTION(accel))
+    {
+        if (state->drawingflags & ~CX2450X_SUPPORTED_DRAWING_FLAGS)
+	{
+	    D_INFO("%s() [DRAW] unhandled drawing flag(s) 0x%.8X [0x%.8X]\n", __FUNCTION__, state->drawingflags & ~CX2450X_SUPPORTED_DRAWING_FLAGS, CX2450X_SUPPORTED_DRAWING_FLAGS);
+            return;
+	}
+
+        state->accel |= CX2450X_SUPPORTED_DRAWING_FUNCTIONS;
+    }
+    else
+    {
+        if (state->blittingflags & ~CX2450X_SUPPORTED_BLITTING_FLAGS)
+	{
+	    D_INFO("%s() [BLIT] unhandled blitting flag(s) 0x%.8X [0x%.8X]\n", __FUNCTION__, state->blittingflags & ~CX2450X_SUPPORTED_BLITTING_FLAGS, CX2450X_SUPPORTED_BLITTING_FLAGS);
+            return;
+	}
+	
+	if ((state->blittingflags & DSBLIT_SRC_COLORKEY) && (accel == DFXL_STRETCHBLIT))
+	{
+	    D_INFO("%s() [BLIT] GXA does not support stretch blit with source colorkeying\n", __FUNCTION__);
+	    state->accel &= ~DSBLIT_SRC_COLORKEY;
+            return;
+	}
+
+        switch (state->source->config.format)
+        {
+	    case DSPF_A8:	/* Rendered text comes in this alpha only format */
+	    case DSPF_LUT8:	/* Rendered text with blend comes in LUT8 */
+	    case DSPF_RGB16:
+            case DSPF_RGB32:    /* modify alpha to a solid value (0xFF) */
+            case DSPF_ARGB:
+                break;
+            default:
+		D_INFO("%s() [BLIT] unhandled source format 0x%.8X\n", __FUNCTION__, state->source->config.format);
+                return;
+        }
+
+        state->accel |= CX2450X_SUPPORTED_BLITTING_FUNCTIONS;
+    }
+}
+
+/*******************************************************************************/
+
+static void _cx2450x_set_state(void *driver_data, void *device_data, GraphicsDeviceFuncs *funcs, CardState *state, DFBAccelerationMask accel)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    CX2450XDeviceData *dev = (CX2450XDeviceData *)device_data;
+
+    if (state->mod_hw & SMF_DESTINATION)            /* 0x00000100 */
+    {
+	/* setup the destination bitmap - as supposed by the datasheet, we use bitmap context #2 */
+//	D_INFO("%s() set destination to 0x%.8lX\n", __FUNCTION__, state->dst.offset);
+        _write_gxa(drv->gxa_base, GXA_BMP2_TYPE_REG, _make_cx2450x_bmp_reg(state->destination->config.format, state->dst.pitch));
+        _write_gxa(drv->gxa_base, GXA_BMP2_ADDR_REG, drv->smem_start + state->dst.offset);
+        _write_gxa(drv->gxa_base, GXA_CONTENT_ID_REG, 0);
+    }
+
+    switch (accel)
+    {
+	case DFXL_FILLRECTANGLE:				/* 0x00000001 */
+        case DFXL_DRAWRECTANGLE:				/* 0x00000002 */
+	case DFXL_DRAWLINE:					/* 0x00000004 */
+	case DFXL_FILLTRIANGLE:					/* 0x00000008 */
+
+    	    if (state->mod_hw & SMF_COLOR)			/* 0x00000008 */
+	    {
+		/* convert the given destination color and write it to the GXA as forground color */
+		_write_gxa(drv->gxa_base, GXA_FG_COLOR_REG, _make_cx2450x_color(state->color, state->destination->config.format));
+	    }
+	    if (state->mod_hw & SMF_DRAWING_FLAGS)              /* 0x00000001 */
+	    {
+		dev->d_cmd_opts |= GXA_CMD_NOT_ALPHA;
+
+            	if (state->drawingflags & DSDRAW_BLEND)
+		{
+//		    D_INFO("%s() DSDRAW_BLEND\n", __FUNCTION__);
+		    dev->d_cmd_opts &= ~GXA_CMD_NOT_ALPHA;
+		    _write_gxa(drv->gxa_base, GXA_BLEND_CFG_REG, (0x08 << 16) | (0x09 << 12) | (0x08 << 6) | (0x00 << 2));
+		}
+		    
+		if (state->drawingflags & DSDRAW_DST_COLORKEY)
+		    D_INFO("%s() unhandled DSDRAW_DST_COLORKEY\n", __FUNCTION__);
+		if (state->drawingflags & DSDRAW_SRC_PREMULTIPLY)
+		    D_INFO("%s() unhandled DSDRAW_SRC_PREMULTIPLY\n", __FUNCTION__);
+		if (state->drawingflags & DSDRAW_DST_PREMULTIPLY)
+		    D_INFO("%s() unhandled DSDRAW_DST_PREMULTIPLY\n", __FUNCTION__);
+		if (state->drawingflags & DSDRAW_DEMULTIPLY)
+		    D_INFO("%s() unhandled DSDRAW_DEMULTIPLY\n", __FUNCTION__);
+		if (state->drawingflags & DSDRAW_XOR)
+		    D_INFO("%s() unhandled DSDRAW_XOR\n", __FUNCTION__);
+	    }
+	    if (state->source->config.format != state->destination->config.format)
+	    {
+	    
+	    }
+	    break;
+	case DFXL_STRETCHBLIT:					/* 0x00020000 */
+	case DFXL_BLIT:						/* 0x00010000 */
+            if (state->mod_hw & SMF_SOURCE)                     /* 0x00000200 */
+	    {
+		/* use content bitmap #1 as source for blitting operations */
+//		D_INFO("%s() set source to 0x%.8lX (opts: 0x%.8X, pitch: %d)\n", __FUNCTION__, state->src.offset, _make_cx2450x_bmp_reg(state->source->config.format, state->src.pitch), state->src.pitch);
+		_write_gxa(drv->gxa_base, GXA_BMP1_TYPE_REG, _make_cx2450x_bmp_reg(state->source->config.format, state->src.pitch));
+		_write_gxa(drv->gxa_base, GXA_BMP1_ADDR_REG, drv->smem_start + state->src.offset);
+
+    		_write_gxa(drv->gxa_base, GXA_CONTENT_ID_REG, 0);
+
+		if (accel == DFXL_STRETCHBLIT)
+		    memcpy((u8*) drv->coeff_base, scale_coeff_table, 0x0400);
+            }
+
+	    if (state->mod_hw & SMF_BLITTING_FLAGS)             /* 0x00000002 */
+	    {
+		u32 cfgreg = _read_gxa(drv->gxa_base, GXA_CFG_REG);
+		cfgreg &= 0xFF000F00;
+		dev->b_cmd_opts = GXA_CMD_NOT_ALPHA;
+		dev->b_flags = state->blittingflags;
+		dev->b_soft = false;
+
+		if (state->blittingflags & DSBLIT_BLEND_ALPHACHANNEL)
+		{
+	    	    /* use source alpha for blend */
+//		    D_INFO("%s() DSBLIT_BLEND_ALPHACHANNEL\n", __FUNCTION__);
+	    	    dev->b_cmd_opts &= ~GXA_CMD_NOT_ALPHA;
+		    _write_gxa(drv->gxa_base, GXA_BLEND_CFG_REG, (0x08 << 16) | (0x09 << 12) | (0x08 << 6) | (0x00 << 2));
+		}
+
+		if (state->blittingflags & DSBLIT_BLEND_COLORALPHA)
+		{
+		    u32 color = _make_cx2450x_color(state->color, state->destination->config.format);
+		    D_INFO("%s() unsupported DSBLIT_BLEND_COLORALPHA 0x%.8X\n", __FUNCTION__, color);
+		}
+
+		if (state->blittingflags & DSBLIT_COLORIZE)
+		{
+		    /* this currently only works on colorizing monochrome/greyscale sources */
+		    u32 color = _make_cx2450x_color(state->color, state->destination->config.format);
+//		    D_INFO("%s() DSBLIT_SRC_COLORIZE %.8X\n", __FUNCTION__, color);
+
+		    switch (state->source->config.format)
+		    {
+			case DSPF_A8:
+			    break;
+			default:
+			    dev->b_soft = true;
+		    }
+
+	    	    dev->b_cmd_opts &= ~GXA_CMD_NOT_ALPHA;
+
+		    _write_gxa(drv->gxa_base, GXA_CONST_COLOR_REG, color);
+		    _write_gxa(drv->gxa_base, GXA_BLEND_CFG_REG, (0x09 << 16) | (0x08 << 12) | (1 << 10) | (0x01 << 6) | (0x00 << 2));
+
+		    /* enable source transparency */
+		    dev->b_cmd_opts |= GXA_CMD_SRC_TRANSP;
+		    cfgreg |= 0x00001000;
+
+		    /* setup the "chroma" keying registers */
+		    _write_gxa(drv->gxa_base, GXA_KEY_LOWER_REG, 0);
+		    _write_gxa(drv->gxa_base, GXA_KEY_UPPER_REG, 0);
+		}							    
+
+		if (state->blittingflags & DSBLIT_SRC_COLORKEY)
+		{
+//		    D_INFO("%s() DSBLIT_SRC_COLORKEY %.8X\n", __FUNCTION__, state->src_colorkey);
+
+		    /* enable source transparency */
+		    dev->b_cmd_opts |= GXA_CMD_SRC_TRANSP;
+		    cfgreg |= 0x00005000;	/* Source Transparency enable & Source Transparency Alpha ignore */
+
+		    /* setup the "chroma" keying registers */
+		    _write_gxa(drv->gxa_base, GXA_KEY_LOWER_REG, state->src_colorkey);
+		    _write_gxa(drv->gxa_base, GXA_KEY_UPPER_REG, state->src_colorkey);
+		}
+
+		if (state->blittingflags & DSBLIT_DST_COLORKEY)
+		    D_INFO("%s() unhandled DSBLIT_DST_COLORKEY %.8X\n", __FUNCTION__, state->dst_colorkey);
+		if (state->blittingflags & DSBLIT_SRC_PREMULTIPLY)
+		    D_INFO("%s() unhandled DSBLIT_SRC_PREMULTIPLY", __FUNCTION__);
+	        if (state->blittingflags & DSBLIT_DST_PREMULTIPLY)
+		    D_INFO("%s() unhandled DSBLIT_DST_PREMULTIPLY", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_DEMULTIPLY)
+		    D_INFO("%s() unhandled DSBLIT_DEMULTIPLY", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_DEINTERLACE)
+		    D_INFO("%s() unhandled DSBLIT_DEINTERLACE", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_SRC_PREMULTCOLOR)
+		    D_INFO("%s() unhandled DSBLIT_SRC_PREMULTCOLOR", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_XOR)
+		    D_INFO("%s() unhandled DSBLIT_XOR", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_INDEX_TRANSLATION)
+		    D_INFO("%s() unhandled DSBLIT_INDEX_TRANSLATION", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_ROTATE180)
+		    D_INFO("%s() unhandled DSBLIT_ROTATE180", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_COLORKEY_PROTECT)
+		    D_INFO("%s() unhandled DSBLIT_COLORKEY_PROTECT", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_SRC_MASK_ALPHA)
+		    D_INFO("%s() unhandled DSBLIT_SRC_MASK_ALPHA", __FUNCTION__);
+		if (state->blittingflags & DSBLIT_SRC_MASK_COLOR)
+		    D_INFO("%s() unhandled DSBLIT_SRC_MASK_COLOR", __FUNCTION__);
+
+		_write_gxa(drv->gxa_base, GXA_CFG_REG, cfgreg);
+	    }
+
+    	    if (state->mod_hw & SMF_COLOR)			/* 0x00000008 */
+	    {
+		/* for colorize DFB partly setups the hw only once and updates the color value itself */
+
+		if (state->blittingflags & DSBLIT_COLORIZE)
+		{
+		    u32 color = _make_cx2450x_color(state->color, state->destination->config.format);
+		    _write_gxa(drv->gxa_base, GXA_CONST_COLOR_REG, color);
+		}
+
+		if (state->blittingflags & DSBLIT_SRC_COLORKEY)
+		{
+		    _write_gxa(drv->gxa_base, GXA_KEY_LOWER_REG, state->src_colorkey);
+		    _write_gxa(drv->gxa_base, GXA_KEY_UPPER_REG, state->src_colorkey);
+		}
+
+		if (state->blittingflags & ~CX2450X_SUPPORTED_BLITTING_FLAGS)
+		    D_INFO("%s() unhandled color update for blitting flag(s) %.8X\n", __FUNCTION__, state->blittingflags);
+	    }
+
+	    if (state->source->config.format != state->destination->config.format)
+	    {
+		switch (state->source->config.format)
+		{
+		    case DSPF_A8:
+			memcpy((u8*) drv->A8_base, DSPF_A8_to_ARGB_table, 1024);
+			_write_gxa(drv->gxa_base, GXA_CMD_PALETTE | GXA_SRC_BMP_SEL(1) | GXA_PARAM_COUNT(1), drv->A8_table);
+			break;
+		    case DSPF_LUT8:
+		    {
+			/* we have to exchange the palette values (DFB's view: ARGB, GXA's view: BGRA) */
+			if (state->source->palette->num_entries)
+			{
+			    u32 pe = (state->source->palette->num_entries - 1) & 0xFF;
+			    u32 cnt = 0;
+			    u8 pal[256][4];
+			    for (cnt = 0; cnt <= pe; cnt++)
+			    {
+				pal[cnt][0] = state->source->palette->entries[cnt].b;
+				pal[cnt][1] = state->source->palette->entries[cnt].g;
+				pal[cnt][2] = state->source->palette->entries[cnt].r;
+				pal[cnt][3] = state->source->palette->entries[cnt].a;
+			    }
+
+			    memcpy((u8*) drv->var_base, pal, pe * 4);
+			    _write_gxa(drv->gxa_base, GXA_CMD_PALETTE | GXA_SRC_BMP_SEL(1) | GXA_PARAM_COUNT(1), drv->var_table);
+			}
+			else
+			    D_INFO("%s() given LUT8 has no entries!\n", __FUNCTION__);
+			break;
+		    }
+		    case DSPF_RGB16:
+			memcpy((u8*) drv->RGB16_base, DSPF_RGB16_to_ARGB_table, 256);
+			_write_gxa(drv->gxa_base, GXA_CMD_PALETTE | GXA_SRC_BMP_SEL(1) | GXA_PARAM_COUNT(1), drv->RGB16_table);
+			break;
+        	    case DSPF_RGB32:    /* nothing to do */
+        	    case DSPF_ARGB:
+			break;
+		    default:
+			D_INFO("%s() unhandled color space conversion (table missing)\n", __FUNCTION__);
+			break;
+		}
+	    }
+	    break;
+	default:
+	    D_INFO("%s() unhandled acceleration mask 0x%.8X\n", __FUNCTION__, accel);
+    }
+
+    state->mod_hw = 0;
+}
diff --git a/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-tables.h b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-tables.h
new file mode 100644
index 0000000..81036e5
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x-tables.h
@@ -0,0 +1,191 @@
+/*
+ * Conexant / NXP CX2450x accelated driver
+ * up-/down scale coefficence tables and color space conversion tables
+ *
+ * (c) Coolstream International Limited
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the
+ * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ *
+*/
+
+static u8 scale_coeff_table[0x0400] =
+{
+    /* 0x100 coefficients for upscaling or by pass */
+    0x00, 0x00, 0x7C, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x7F, 0x00, 0x02, 0x00, 0x00, 0x00,
+    0x00, 0xF0, 0x7B, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x7B, 0x00, 0x04, 0x00, 0x00, 0x00,
+    0x00, 0xE0, 0x77, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x73, 0x00, 0x06, 0x00, 0x00, 0x00,
+    0x00, 0xE0, 0x6F, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x6B, 0x00, 0xC9, 0x0F, 0x00, 0x00,
+    0x00, 0xE0, 0x67, 0x00, 0xCA, 0x0F, 0x00, 0x00, 0x00, 0xE0, 0x63, 0x00, 0xCB, 0x0F, 0x00, 0x00,
+    0x00, 0xE0, 0x5F, 0x00, 0xCC, 0x0F, 0x00, 0x00, 0x00, 0xE0, 0x5B, 0x00, 0xCD, 0x0F, 0x00, 0x00,
+    0x00, 0xE0, 0x57, 0x00, 0xCE, 0x0F, 0x00, 0x00, 0x00, 0xE0, 0x53, 0x00, 0xCF, 0x0F, 0x00, 0x00,
+    0x00, 0xE0, 0x4F, 0x00, 0xD0, 0x0F, 0x00, 0x00, 0x00, 0xE0, 0x4B, 0x00, 0xD1, 0x0F, 0x00, 0x00,
+    0x00, 0xF0, 0x47, 0x00, 0x92, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x43, 0x00, 0x93, 0x0F, 0x00, 0x00,
+    0x00, 0xF0, 0x3F, 0x00, 0x94, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x3B, 0x00, 0x95, 0x0F, 0x00, 0x00,
+    0x00, 0xF0, 0x37, 0x00, 0x96, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x33, 0x00, 0x97, 0x0F, 0x00, 0x00,
+    0x00, 0xF0, 0x2F, 0x00, 0x98, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x2B, 0x00, 0x99, 0x0F, 0x00, 0x00,
+    0x00, 0xF0, 0x27, 0x00, 0x9A, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x9B, 0x0F, 0x00, 0x00,
+    0x00, 0x00, 0x18, 0x00, 0x9C, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x14, 0x00, 0x9D, 0x0F, 0x00, 0x00,
+    0x00, 0x00, 0x10, 0x00, 0x9E, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x00, 0xDE, 0x0F, 0x00, 0x00,
+    0x00, 0x00, 0x08, 0x00, 0xDF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x1F, 0x00, 0x00, 0x00,
+    /* 0x100 coefficients for small downscaling (scale: 0 < ratio <= 2) */
+    0x00, 0x60, 0x4C, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x60, 0x4C, 0x00, 0x07, 0x00, 0x00, 0x00, 
+    0x00, 0x50, 0x4C, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x50, 0x4C, 0x00, 0x08, 0x00, 0x00, 0x00, 
+    0x00, 0x50, 0x48, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x40, 0x48, 0x00, 0x0A, 0x00, 0x00, 0x00, 
+    0x00, 0x40, 0x48, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x40, 0x48, 0x00, 0x0A, 0x00, 0x00, 0x00, 
+    0x00, 0x30, 0x48, 0x00, 0x0B, 0x00, 0x00, 0x00, 0x00, 0x30, 0x48, 0x00, 0x0B, 0x00, 0x00, 0x00, 
+    0x00, 0x20, 0x44, 0x00, 0x4C, 0x00, 0x00, 0x00, 0x00, 0x20, 0x44, 0x00, 0x4C, 0x00, 0x00, 0x00, 
+    0x00, 0x20, 0x40, 0x00, 0x4D, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40, 0x00, 0x4D, 0x00, 0x00, 0x00, 
+    0x00, 0x20, 0x3C, 0x00, 0x4E, 0x00, 0x00, 0x00, 0x00, 0x20, 0x3C, 0x00, 0x4E, 0x00, 0x00, 0x00, 
+    0x00, 0x10, 0x38, 0x00, 0x8F, 0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x00, 0x8F, 0x00, 0x00, 0x00, 
+    0x00, 0x10, 0x34, 0x00, 0x90, 0x00, 0x00, 0x00, 0x00, 0x10, 0x34, 0x00, 0x90, 0x00, 0x00, 0x00, 
+    0x00, 0x10, 0x30, 0x00, 0x91, 0x00, 0x00, 0x00, 0x00, 0x10, 0x30, 0x00, 0x91, 0x00, 0x00, 0x00, 
+    0x00, 0x00, 0x2C, 0x00, 0xD2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2C, 0x00, 0xD2, 0x00, 0x00, 0x00, 
+    0x00, 0x00, 0x28, 0x00, 0x12, 0x01, 0x00, 0x00, 0x00, 0x00, 0x28, 0x00, 0x12, 0x01, 0x00, 0x00, 
+    0x00, 0x00, 0x28, 0x00, 0x12, 0x01, 0x00, 0x00, 0x00, 0x00, 0x24, 0x00, 0x52, 0x01, 0x00, 0x00, 
+    0x00, 0x00, 0x20, 0x00, 0x53, 0x01, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x53, 0x01, 0x00, 0x00, 
+    0x00, 0x00, 0x1C, 0x00, 0x93, 0x01, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x93, 0x01, 0x00, 0x00,
+    /* 0x100 coefficients for large downscaling (scale: 2 < ratio <= 4) */
+    0x40, 0x70, 0x40, 0x00, 0x47, 0x00, 0x00, 0x00, 0x40, 0x70, 0x40, 0x00, 0x47, 0x00, 0x00, 0x00,
+    0x40, 0x70, 0x3C, 0x00, 0x48, 0x00, 0x00, 0x00, 0x00, 0x70, 0x3C, 0x00, 0x49, 0x00, 0x00, 0x00,
+    0x00, 0x70, 0x3C, 0x00, 0x49, 0x00, 0x00, 0x00, 0x00, 0x70, 0x3C, 0x00, 0x49, 0x00, 0x00, 0x00,
+    0x00, 0x60, 0x3C, 0x00, 0x4A, 0x00, 0x00, 0x00, 0x00, 0x60, 0x3C, 0x00, 0x4A, 0x00, 0x00, 0x00,
+    0x00, 0x50, 0x3C, 0x00, 0x8A, 0x00, 0x00, 0x00, 0x00, 0x40, 0x3C, 0x00, 0x8B, 0x00, 0x00, 0x00,
+    0x00, 0x40, 0x3C, 0x00, 0x8B, 0x00, 0x00, 0x00, 0x00, 0x40, 0x38, 0x00, 0x8C, 0x00, 0x00, 0x00,
+    0x00, 0x40, 0x38, 0x00, 0x8C, 0x00, 0x00, 0x00, 0x00, 0x30, 0x38, 0x00, 0x8D, 0x00, 0x00, 0x00,
+    0x00, 0x30, 0x34, 0x00, 0xCD, 0x00, 0x00, 0x00, 0x00, 0x30, 0x34, 0x00, 0xCD, 0x00, 0x00, 0x00,
+    0x00, 0x30, 0x34, 0x00, 0xCD, 0x00, 0x00, 0x00, 0x00, 0x30, 0x34, 0x00, 0xCD, 0x00, 0x00, 0x00,
+    0x00, 0x20, 0x34, 0x00, 0xCE, 0x00, 0x00, 0x00, 0x00, 0x20, 0x30, 0x00, 0x0E, 0x01, 0x00, 0x00,
+    0x00, 0x20, 0x30, 0x00, 0x0E, 0x01, 0x00, 0x00, 0x00, 0x20, 0x2C, 0x00, 0x0F, 0x01, 0x00, 0x00,
+    0x00, 0x20, 0x2C, 0x00, 0x0F, 0x01, 0x00, 0x00, 0x00, 0x20, 0x28, 0x00, 0x4F, 0x01, 0x00, 0x00,
+    0x00, 0x10, 0x28, 0x00, 0x8F, 0x01, 0x00, 0x00, 0x00, 0x10, 0x28, 0x00, 0x8F, 0x01, 0x00, 0x00,
+    0x00, 0x10, 0x24, 0x00, 0xCF, 0x01, 0x00, 0x00, 0x00, 0x10, 0x24, 0x00, 0xCF, 0x01, 0x00, 0x00,
+    0x00, 0x10, 0x24, 0x00, 0xCF, 0x01, 0x00, 0x00, 0x00, 0x10, 0x20, 0x00, 0xCF, 0x11, 0x00, 0x00,
+    0x00, 0x10, 0x1C, 0x00, 0xD0, 0x11, 0x00, 0x00, 0x00, 0x10, 0x1C, 0x00, 0xD0, 0x11, 0x00, 0x00,
+    /* 0x100 coefficients xlarge downscaling (scale: 4 < ratio <= 8) */
+    0x40, 0x80, 0x38, 0x00, 0x48, 0x00, 0x00, 0x00, 0x40, 0x80, 0x38, 0x00, 0x48, 0x00, 0x00, 0x00,
+    0x40, 0x70, 0x38, 0x00, 0x49, 0x00, 0x00, 0x00, 0x40, 0x70, 0x38, 0x00, 0x49, 0x00, 0x00, 0x00,
+    0x40, 0x60, 0x38, 0x00, 0x89, 0x00, 0x00, 0x00, 0x40, 0x60, 0x38, 0x00, 0x89, 0x00, 0x00, 0x00,
+    0x40, 0x60, 0x38, 0x00, 0x89, 0x00, 0x00, 0x00, 0x00, 0x60, 0x38, 0x00, 0x8A, 0x00, 0x00, 0x00,
+    0x00, 0x50, 0x38, 0x00, 0x8B, 0x00, 0x00, 0x00, 0x00, 0x50, 0x38, 0x00, 0x8B, 0x00, 0x00, 0x00,
+    0x00, 0x50, 0x38, 0x00, 0x8B, 0x00, 0x00, 0x00, 0x00, 0x50, 0x34, 0x00, 0xCB, 0x00, 0x00, 0x00,
+    0x00, 0x50, 0x34, 0x00, 0xCB, 0x00, 0x00, 0x00, 0x00, 0x40, 0x34, 0x00, 0xCC, 0x00, 0x00, 0x00,
+    0x00, 0x40, 0x34, 0x00, 0xCC, 0x00, 0x00, 0x00, 0x00, 0x40, 0x34, 0x00, 0xCC, 0x00, 0x00, 0x00,
+    0x00, 0x30, 0x30, 0x00, 0x0D, 0x01, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x0D, 0x01, 0x00, 0x00,
+    0x00, 0x30, 0x30, 0x00, 0x0D, 0x01, 0x00, 0x00, 0x00, 0x30, 0x2C, 0x00, 0x4D, 0x01, 0x00, 0x00,
+    0x00, 0x30, 0x2C, 0x00, 0x4D, 0x01, 0x00, 0x00, 0x00, 0x20, 0x2C, 0x00, 0x4E, 0x01, 0x00, 0x00,
+    0x00, 0x20, 0x2C, 0x00, 0x4E, 0x01, 0x00, 0x00, 0x00, 0x20, 0x2C, 0x00, 0x4E, 0x01, 0x00, 0x00,
+    0x00, 0x20, 0x28, 0x00, 0x8E, 0x01, 0x00, 0x00, 0x00, 0x20, 0x24, 0x00, 0x8E, 0x11, 0x00, 0x00,
+    0x00, 0x20, 0x24, 0x00, 0x8E, 0x11, 0x00, 0x00, 0x00, 0x20, 0x24, 0x00, 0x8E, 0x11, 0x00, 0x00,
+    0x00, 0x10, 0x24, 0x00, 0xCE, 0x11, 0x00, 0x00, 0x00, 0x10, 0x24, 0x00, 0xCE, 0x11, 0x00, 0x00,
+    0x00, 0x10, 0x20, 0x00, 0x0E, 0x12, 0x00, 0x00, 0x00, 0x10, 0x20, 0x00, 0x0E, 0x12, 0x00, 0x00
+};
+
+/*******************************************************************************/
+/* various palettes for color format conversion. Note laette colors are BGRA   */
+
+/* a color lookup table to let the GXA convert DFB's DSPF_A8 "alphagrey" into greyscale ARGB */
+static u8 DSPF_A8_to_ARGB_table[256][4] =
+{
+    {0x00, 0x00, 0x00, 0x00}, {0x01, 0x01, 0x01, 0x01}, {0x02, 0x02, 0x02, 0x02}, {0x03, 0x03, 0x03, 0x03}, 
+    {0x04, 0x04, 0x04, 0x04}, {0x05, 0x05, 0x05, 0x05}, {0x06, 0x06, 0x06, 0x06}, {0x07, 0x07, 0x07, 0x07},
+    {0x08, 0x08, 0x08, 0x08}, {0x09, 0x09, 0x09, 0x09}, {0x0A, 0x0A, 0x0A, 0x0A}, {0x0B, 0x0B, 0x0B, 0x0B}, 
+    {0x0C, 0x0C, 0x0C, 0x0C}, {0x0D, 0x0D, 0x0D, 0x0D}, {0x0E, 0x0E, 0x0E, 0x0E}, {0x0F, 0x0F, 0x0F, 0x0F},
+    {0x10, 0x10, 0x10, 0x10}, {0x11, 0x11, 0x11, 0x11}, {0x12, 0x12, 0x12, 0x12}, {0x13, 0x13, 0x13, 0x13}, 
+    {0x14, 0x14, 0x14, 0x14}, {0x15, 0x15, 0x15, 0x15}, {0x16, 0x16, 0x16, 0x16}, {0x17, 0x17, 0x17, 0x17},
+    {0x18, 0x18, 0x18, 0x18}, {0x19, 0x19, 0x19, 0x19}, {0x1A, 0x1A, 0x1A, 0x1A}, {0x1B, 0x1B, 0x1B, 0x1B}, 
+    {0x1C, 0x1C, 0x1C, 0x1C}, {0x1D, 0x1D, 0x1D, 0x1D}, {0x1E, 0x1E, 0x1E, 0x1E}, {0x1F, 0x1F, 0x1F, 0x1F},
+    {0x20, 0x20, 0x20, 0x20}, {0x21, 0x21, 0x21, 0x21}, {0x22, 0x22, 0x22, 0x22}, {0x23, 0x23, 0x23, 0x23}, 
+    {0x24, 0x24, 0x24, 0x24}, {0x25, 0x25, 0x25, 0x25}, {0x26, 0x26, 0x26, 0x26}, {0x27, 0x27, 0x27, 0x27},
+    {0x28, 0x28, 0x28, 0x28}, {0x29, 0x29, 0x29, 0x29}, {0x2A, 0x2A, 0x2A, 0x2A}, {0x2B, 0x2B, 0x2B, 0x2B}, 
+    {0x2C, 0x2C, 0x2C, 0x2C}, {0x2D, 0x2D, 0x2D, 0x2D}, {0x2E, 0x2E, 0x2E, 0x2E}, {0x2F, 0x2F, 0x2F, 0x2F},
+    {0x30, 0x30, 0x30, 0x30}, {0x31, 0x31, 0x31, 0x31}, {0x32, 0x32, 0x32, 0x32}, {0x33, 0x33, 0x33, 0x33}, 
+    {0x34, 0x34, 0x34, 0x34}, {0x35, 0x35, 0x35, 0x35}, {0x36, 0x36, 0x36, 0x36}, {0x37, 0x37, 0x37, 0x37},
+    {0x38, 0x38, 0x38, 0x38}, {0x39, 0x39, 0x39, 0x39}, {0x3A, 0x3A, 0x3A, 0x3A}, {0x3B, 0x3B, 0x3B, 0x3B}, 
+    {0x3C, 0x3C, 0x3C, 0x3C}, {0x3D, 0x3D, 0x3D, 0x3D}, {0x3E, 0x3E, 0x3E, 0x3E}, {0x3F, 0x3F, 0x3F, 0x3F},
+    {0x40, 0x40, 0x40, 0x40}, {0x41, 0x41, 0x41, 0x41}, {0x42, 0x42, 0x42, 0x42}, {0x43, 0x43, 0x43, 0x43}, 
+    {0x44, 0x44, 0x44, 0x44}, {0x45, 0x45, 0x45, 0x45}, {0x46, 0x46, 0x46, 0x46}, {0x47, 0x47, 0x47, 0x47},
+    {0x48, 0x48, 0x48, 0x48}, {0x49, 0x49, 0x49, 0x49}, {0x4A, 0x4A, 0x4A, 0x4A}, {0x4B, 0x4B, 0x4B, 0x4B}, 
+    {0x4C, 0x4C, 0x4C, 0x4C}, {0x4D, 0x4D, 0x4D, 0x4D}, {0x4E, 0x4E, 0x4E, 0x4E}, {0x4F, 0x4F, 0x4F, 0x4F},
+    {0x50, 0x50, 0x50, 0x50}, {0x51, 0x51, 0x51, 0x51}, {0x52, 0x52, 0x52, 0x52}, {0x53, 0x53, 0x53, 0x53}, 
+    {0x54, 0x54, 0x54, 0x54}, {0x55, 0x55, 0x55, 0x55}, {0x56, 0x56, 0x56, 0x56}, {0x57, 0x57, 0x57, 0x57},
+    {0x58, 0x58, 0x58, 0x58}, {0x59, 0x59, 0x59, 0x59}, {0x5A, 0x5A, 0x5A, 0x5A}, {0x5B, 0x5B, 0x5B, 0x5B}, 
+    {0x5C, 0x5C, 0x5C, 0x5C}, {0x5D, 0x5D, 0x5D, 0x5D}, {0x5E, 0x5E, 0x5E, 0x5E}, {0x5F, 0x5F, 0x5F, 0x5F},
+    {0x60, 0x60, 0x60, 0x60}, {0x61, 0x61, 0x61, 0x61}, {0x62, 0x62, 0x62, 0x62}, {0x63, 0x63, 0x63, 0x63}, 
+    {0x64, 0x64, 0x64, 0x64}, {0x65, 0x65, 0x65, 0x65}, {0x66, 0x66, 0x66, 0x66}, {0x67, 0x67, 0x67, 0x67},
+    {0x68, 0x68, 0x68, 0x68}, {0x69, 0x69, 0x69, 0x69}, {0x6A, 0x6A, 0x6A, 0x6A}, {0x6B, 0x6B, 0x6B, 0x6B}, 
+    {0x6C, 0x6C, 0x6C, 0x6C}, {0x6D, 0x6D, 0x6D, 0x6D}, {0x6E, 0x6E, 0x6E, 0x6E}, {0x6F, 0x6F, 0x6F, 0x6F},
+    {0x70, 0x70, 0x70, 0x70}, {0x71, 0x71, 0x71, 0x71}, {0x72, 0x72, 0x72, 0x72}, {0x73, 0x73, 0x73, 0x73}, 
+    {0x74, 0x74, 0x74, 0x74}, {0x75, 0x75, 0x75, 0x75}, {0x76, 0x76, 0x76, 0x76}, {0x77, 0x77, 0x77, 0x77},
+    {0x78, 0x78, 0x78, 0x78}, {0x79, 0x79, 0x79, 0x79}, {0x7A, 0x7A, 0x7A, 0x7A}, {0x7B, 0x7B, 0x7B, 0x7B}, 
+    {0x7C, 0x7C, 0x7C, 0x7C}, {0x7D, 0x7D, 0x7D, 0x7D}, {0x7E, 0x7E, 0x7E, 0x7E}, {0x7F, 0x7F, 0x7F, 0x7F},
+    {0x80, 0x80, 0x80, 0x80}, {0x81, 0x81, 0x81, 0x81}, {0x82, 0x82, 0x82, 0x82}, {0x83, 0x83, 0x83, 0x83}, 
+    {0x84, 0x84, 0x84, 0x84}, {0x85, 0x85, 0x85, 0x85}, {0x86, 0x86, 0x86, 0x86}, {0x87, 0x87, 0x87, 0x87},
+    {0x88, 0x88, 0x88, 0x88}, {0x89, 0x89, 0x89, 0x89}, {0x8A, 0x8A, 0x8A, 0x8A}, {0x8B, 0x8B, 0x8B, 0x8B}, 
+    {0x8C, 0x8C, 0x8C, 0x8C}, {0x8D, 0x8D, 0x8D, 0x8D}, {0x8E, 0x8E, 0x8E, 0x8E}, {0x8F, 0x8F, 0x8F, 0x8F},
+    {0x90, 0x90, 0x90, 0x90}, {0x91, 0x91, 0x91, 0x91}, {0x92, 0x92, 0x92, 0x92}, {0x93, 0x93, 0x93, 0x93}, 
+    {0x94, 0x94, 0x94, 0x94}, {0x95, 0x95, 0x95, 0x95}, {0x96, 0x96, 0x96, 0x96}, {0x97, 0x97, 0x97, 0x97},
+    {0x98, 0x98, 0x98, 0x98}, {0x99, 0x99, 0x99, 0x99}, {0x9A, 0x9A, 0x9A, 0x9A}, {0x9B, 0x9B, 0x9B, 0x9B}, 
+    {0x9C, 0x9C, 0x9C, 0x9C}, {0x9D, 0x9D, 0x9D, 0x9D}, {0x9E, 0x9E, 0x9E, 0x9E}, {0x9F, 0x9F, 0x9F, 0x9F},
+    {0xA0, 0xA0, 0xA0, 0xA0}, {0xA1, 0xA1, 0xA1, 0xA1}, {0xA2, 0xA2, 0xA2, 0xA2}, {0xA3, 0xA3, 0xA3, 0xA3}, 
+    {0xA4, 0xA4, 0xA4, 0xA4}, {0xA5, 0xA5, 0xA5, 0xA5}, {0xA6, 0xA6, 0xA6, 0xA6}, {0xA7, 0xA7, 0xA7, 0xA7},
+    {0xA8, 0xA8, 0xA8, 0xA8}, {0xA9, 0xA9, 0xA9, 0xA9}, {0xAA, 0xAA, 0xAA, 0xAA}, {0xAB, 0xAB, 0xAB, 0xAB}, 
+    {0xAC, 0xAC, 0xAC, 0xAC}, {0xAD, 0xAD, 0xAD, 0xAD}, {0xAE, 0xAE, 0xAE, 0xAE}, {0xAF, 0xAF, 0xAF, 0xAF},
+    {0xB0, 0xB0, 0xB0, 0xB0}, {0xB1, 0xB1, 0xB1, 0xB1}, {0xB2, 0xB2, 0xB2, 0xB2}, {0xB3, 0xB3, 0xB3, 0xB3}, 
+    {0xB4, 0xB4, 0xB4, 0xB4}, {0xB5, 0xB5, 0xB5, 0xB5}, {0xB6, 0xB6, 0xB6, 0xB6}, {0xB7, 0xB7, 0xB7, 0xB7},
+    {0xB8, 0xB8, 0xB8, 0xB8}, {0xB9, 0xB9, 0xB9, 0xB9}, {0xBA, 0xBA, 0xBA, 0xBA}, {0xBB, 0xBB, 0xBB, 0xBB}, 
+    {0xBC, 0xBC, 0xBC, 0xBC}, {0xBD, 0xBD, 0xBD, 0xBD}, {0xBE, 0xBE, 0xBE, 0xBE}, {0xBF, 0xBF, 0xBF, 0xBF},
+    {0xC0, 0xC0, 0xC0, 0xC0}, {0xC1, 0xC1, 0xC1, 0xC1}, {0xC2, 0xC2, 0xC2, 0xC2}, {0xC3, 0xC3, 0xC3, 0xC3}, 
+    {0xC4, 0xC4, 0xC4, 0xC4}, {0xC5, 0xC5, 0xC5, 0xC5}, {0xC6, 0xC6, 0xC6, 0xC6}, {0xC7, 0xC7, 0xC7, 0xC7},
+    {0xC8, 0xC8, 0xC8, 0xC8}, {0xC9, 0xC9, 0xC9, 0xC9}, {0xCA, 0xCA, 0xCA, 0xCA}, {0xCB, 0xCB, 0xCB, 0xCB}, 
+    {0xCC, 0xCC, 0xCC, 0xCC}, {0xCD, 0xCD, 0xCD, 0xCD}, {0xCE, 0xCE, 0xCE, 0xCE}, {0xCF, 0xCF, 0xCF, 0xCF},
+    {0xD0, 0xD0, 0xD0, 0xD0}, {0xD1, 0xD1, 0xD1, 0xD1}, {0xD2, 0xD2, 0xD2, 0xD2}, {0xD3, 0xD3, 0xD3, 0xD3}, 
+    {0xD4, 0xD4, 0xD4, 0xD4}, {0xD5, 0xD5, 0xD5, 0xD5}, {0xD6, 0xD6, 0xD6, 0xD6}, {0xD7, 0xD7, 0xD7, 0xD7},
+    {0xD8, 0xD8, 0xD8, 0xD8}, {0xD9, 0xD9, 0xD9, 0xD9}, {0xDA, 0xDA, 0xDA, 0xDA}, {0xDB, 0xDB, 0xDB, 0xDB}, 
+    {0xDC, 0xDC, 0xDC, 0xDC}, {0xDD, 0xDD, 0xDD, 0xDD}, {0xDE, 0xDE, 0xDE, 0xDE}, {0xDF, 0xDF, 0xDF, 0xDF},
+    {0xE0, 0xE0, 0xE0, 0xE0}, {0xE1, 0xE1, 0xE1, 0xE1}, {0xE2, 0xE2, 0xE2, 0xE2}, {0xE3, 0xE3, 0xE3, 0xE3}, 
+    {0xE4, 0xE4, 0xE4, 0xE4}, {0xE5, 0xE5, 0xE5, 0xE5}, {0xE6, 0xE6, 0xE6, 0xE6}, {0xE7, 0xE7, 0xE7, 0xE7},
+    {0xE8, 0xE8, 0xE8, 0xE8}, {0xE9, 0xE9, 0xE9, 0xE9}, {0xEA, 0xEA, 0xEA, 0xEA}, {0xEB, 0xEB, 0xEB, 0xEB}, 
+    {0xEC, 0xEC, 0xEC, 0xEC}, {0xED, 0xED, 0xED, 0xED}, {0xEE, 0xEE, 0xEE, 0xEE}, {0xEF, 0xEF, 0xEF, 0xEF},
+    {0xF0, 0xF0, 0xF0, 0xF0}, {0xF1, 0xF1, 0xF1, 0xF1}, {0xF2, 0xF2, 0xF2, 0xF2}, {0xF3, 0xF3, 0xF3, 0xF3}, 
+    {0xF4, 0xF4, 0xF4, 0xF4}, {0xF5, 0xF5, 0xF5, 0xF5}, {0xF6, 0xF6, 0xF6, 0xF6}, {0xF7, 0xF7, 0xF7, 0xF7},
+    {0xF8, 0xF8, 0xF8, 0xF8}, {0xF9, 0xF9, 0xF9, 0xF9}, {0xFA, 0xFA, 0xFA, 0xFA}, {0xFB, 0xFB, 0xFB, 0xFB}, 
+    {0xFC, 0xFC, 0xFC, 0xFC}, {0xFD, 0xFD, 0xFD, 0xFD}, {0xFE, 0xFE, 0xFE, 0xFE}, {0xFF, 0xFF, 0xFF, 0xFF}
+};
+
+/*******************************************************************************/
+
+/* a color lookup table to let the GXA convert DFB's DSPF_RGB16 (0/5/6/5 bits ARGB) into ARGB (8/8/8/8 bits ARGB) */
+static u8 DSPF_RGB16_to_ARGB_table[64][4] =
+{
+    {0x00, 0x00, 0x00, 0xFF}, {0x08, 0x04, 0x08, 0xFF}, {0x10, 0x08, 0x10, 0xFF}, {0x19, 0x0C, 0x19, 0xFF}, 
+    {0x21, 0x10, 0x21, 0xFF}, {0x29, 0x14, 0x29, 0xFF}, {0x31, 0x18, 0x31, 0xFF}, {0x3A, 0x1C, 0x3A, 0xFF}, 
+    {0x42, 0x20, 0x42, 0xFF}, {0x4A, 0x24, 0x4A, 0xFF}, {0x52, 0x28, 0x52, 0xFF}, {0x5A, 0x2D, 0x5A, 0xFF}, 
+    {0x63, 0x31, 0x63, 0xFF}, {0x6B, 0x35, 0x6B, 0xFF}, {0x73, 0x39, 0x73, 0xFF}, {0x7B, 0x3D, 0x7B, 0xFF}, 
+    {0x84, 0x41, 0x84, 0xFF}, {0x8C, 0x45, 0x8C, 0xFF}, {0x94, 0x49, 0x94, 0xFF}, {0x9C, 0x4D, 0x9C, 0xFF}, 
+    {0xA5, 0x51, 0xA5, 0xFF}, {0xAD, 0x55, 0xAD, 0xFF}, {0xB5, 0x59, 0xB5, 0xFF}, {0xBD, 0x5D, 0xBD, 0xFF}, 
+    {0xC5, 0x61, 0xC5, 0xFF}, {0xCE, 0x65, 0xCE, 0xFF}, {0xD6, 0x69, 0xD6, 0xFF}, {0xDE, 0x6D, 0xDE, 0xFF}, 
+    {0xE6, 0x71, 0xE6, 0xFF}, {0xEF, 0x75, 0xEF, 0xFF}, {0xF7, 0x79, 0xF7, 0xFF}, {0xFF, 0x7D, 0xFF, 0xFF}, 
+    {0x00, 0x82, 0x00, 0xFF}, {0x08, 0x86, 0x08, 0xFF}, {0x10, 0x8A, 0x10, 0xFF}, {0x19, 0x8E, 0x19, 0xFF}, 
+    {0x21, 0x92, 0x21, 0xFF}, {0x29, 0x96, 0x29, 0xFF}, {0x31, 0x9A, 0x31, 0xFF}, {0x3A, 0x9E, 0x3A, 0xFF}, 
+    {0x42, 0xA2, 0x42, 0xFF}, {0x4A, 0xA6, 0x4A, 0xFF}, {0x52, 0xAA, 0x52, 0xFF}, {0x5A, 0xAE, 0x5A, 0xFF}, 
+    {0x63, 0xB2, 0x63, 0xFF}, {0x6B, 0xB6, 0x6B, 0xFF}, {0x73, 0xBA, 0x73, 0xFF}, {0x7B, 0xBE, 0x7B, 0xFF}, 
+    {0x84, 0xC2, 0x84, 0xFF}, {0x8C, 0xC6, 0x8C, 0xFF}, {0x94, 0xCA, 0x94, 0xFF}, {0x9C, 0xCE, 0x9C, 0xFF}, 
+    {0xA5, 0xD2, 0xA5, 0xFF}, {0xAD, 0xD7, 0xAD, 0xFF}, {0xB5, 0xDB, 0xB5, 0xFF}, {0xBD, 0xDF, 0xBD, 0xFF}, 
+    {0xC5, 0xE3, 0xC5, 0xFF}, {0xCE, 0xE7, 0xCE, 0xFF}, {0xD6, 0xEB, 0xD6, 0xFF}, {0xDE, 0xEF, 0xDE, 0xFF}, 
+    {0xE6, 0xF3, 0xE6, 0xFF}, {0xEF, 0xF7, 0xEF, 0xFF}, {0xF7, 0xFB, 0xF7, 0xFF}, {0xFF, 0xFF, 0xFF, 0xFF}
+};
+
+/*******************************************************************************/
diff --git a/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.c b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.c
new file mode 100644
index 0000000..5347aa7
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.c
@@ -0,0 +1,224 @@
+/*
+ * Conexant / NXP CX2450x accelerated driver
+ *
+ * (c) Coolstream International Limited
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the
+ * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ *
+ */
+
+#include <config.h>
+
+#include <unistd.h>
+#include <stdio.h>
+#include <fcntl.h>
+#include <sys/ioctl.h>
+#include <sys/mman.h>
+#include <string.h>
+
+#include <fbdev/fbdev.h>
+
+#include <directfb.h>
+
+#include <direct/mem.h>
+#include <direct/messages.h>
+
+#include <core/gfxcard.h>
+#include <core/graphics_driver.h>
+#include <core/state.h>
+#include <core/surface.h>
+#include <core/palette.h>
+
+#include <fbdev/fbdev.h>
+
+#include "cx2450x.h"
+#include "cx2450x-tables.h"
+
+DFB_GRAPHICS_DRIVER(cx2450x);
+
+#define CX2450X_SUPPORTED_DRAWING_FUNCTIONS	(DFXL_DRAWLINE | DFXL_FILLRECTANGLE | DFXL_DRAWRECTANGLE)
+#define CX2450X_SUPPORTED_DRAWING_FLAGS		(DSDRAW_BLEND)
+
+#define CX2450X_SUPPORTED_BLITTING_FUNCTIONS	(DFXL_BLIT | DFXL_STRETCHBLIT)
+#define CX2450X_SUPPORTED_BLITTING_FLAGS	(DSBLIT_BLEND_ALPHACHANNEL | DSBLIT_SRC_COLORKEY | DSBLIT_COLORIZE | DSBLIT_BLEND_COLORALPHA)
+
+static void _cx2450x_check_state(void *driver_data, void *device_data, CardState *state, DFBAccelerationMask accel);
+static void _cx2450x_set_state(void *driver_data, void *device_data, GraphicsDeviceFuncs *funcs, CardState *state, DFBAccelerationMask accel);
+
+static u32 _read_gxa(volatile u8 *base_addr, u32 offset);
+static void _write_gxa(volatile u8 *base_addr, u32 offset, u32 value);
+
+bool _cx2450x_draw_line(void *driver_data, void *device_data, DFBRegion *line);
+static bool _cx2450x_draw_rectangle(void *driver_data, void *device_data, DFBRectangle *rect);
+static bool _cx2450x_fill_rectangle(void *driver_data, void *device_data, DFBRectangle *rect);
+static bool _cx2450x_fill_triangle(void *driver_data, void *device_data, DFBTriangle *tri);
+static bool _cx2450x_blit(void *driver_data, void *device_data, DFBRectangle *rect, int dx, int dy);
+static bool _cx2450x_stretchblit( void *driver_data, void *device_data, DFBRectangle *srect, DFBRectangle *drect);
+
+
+#include "cx2450x-state.c"	/* contains set/check state functions */
+#include "cx2450x-accel.c"	/* contains the acceleration functions */
+
+/*******************************************************************************/
+
+static int driver_probe(CoreGraphicsDevice *device)
+{
+    int x;
+
+    x = dfb_gfxcard_get_accelerator(device);
+
+    if (x == FB_ACCEL_CX2450X)
+	return 1;
+    return 0;
+}
+
+/*******************************************************************************/
+
+static void driver_get_info(CoreGraphicsDevice *device, GraphicsDriverInfo *info)
+{
+    (void)device;
+
+    snprintf(info->name,   DFB_GRAPHICS_DRIVER_INFO_NAME_LENGTH,   "CX2450X GFX Driver");
+    snprintf(info->vendor, DFB_GRAPHICS_DRIVER_INFO_VENDOR_LENGTH, "Coolstream International Limited");
+
+    info->version.major = 0;
+    info->version.minor = 1;
+
+    info->driver_data_size = sizeof(CX2450XDriverData);
+    info->device_data_size = sizeof(CX2450XDeviceData);
+}
+
+/*******************************************************************************/
+
+static DFBResult driver_init_driver(CoreGraphicsDevice *device, GraphicsDeviceFuncs *funcs, void *driver_data, void *device_data, CoreDFB *core)
+{
+
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+    FBDev *dfb_fbdev;
+
+    drv->gxa_base = (void*) -1;
+
+    dfb_fbdev = dfb_system_data();
+    if (!dfb_fbdev)
+    	return DFB_IO;
+
+    drv->smem_start  = dfb_fbdev->shared->fix.smem_start;
+    drv->smem_len    = dfb_fbdev->shared->fix.smem_len - 0x00040000;	/* reserve 256 KB for private data (conversion tables) */
+    drv->priv_start  = drv->smem_start + drv->smem_len;
+    drv->priv_len    = 0x040000;
+    drv->coeff_table = drv->priv_start;
+    drv->A8_table    = drv->priv_start + 0x10000;
+    drv->RGB16_table = drv->priv_start + 0x20000;
+    drv->var_table   = drv->priv_start + 0x30000;
+
+    drv->devmem_fd = open("/dev/mem", O_RDWR | O_SYNC);
+    if (drv->devmem_fd < 0)
+	return DFB_IO;
+
+    drv->gxa_base = mmap(NULL, 0x00040000, PROT_READ | PROT_WRITE, MAP_SHARED, drv->devmem_fd, 0xE0600000);
+    if (drv->gxa_base == (void*) -1)
+	return DFB_IO;
+
+    drv->coeff_base = mmap(NULL, 0x00010000, PROT_READ | PROT_WRITE, MAP_SHARED, dfb_fbdev->fd, drv->smem_len);
+    if (drv->coeff_base == (void*) -1)
+	return DFB_IO;
+
+    drv->A8_base = mmap(NULL, 0x00010000, PROT_READ | PROT_WRITE, MAP_SHARED, dfb_fbdev->fd, drv->smem_len + 0x10000);
+    if (drv->A8_base == (void*) -1)
+	return DFB_IO;
+
+    drv->RGB16_base = mmap(NULL, 0x00010000, PROT_READ | PROT_WRITE, MAP_SHARED, dfb_fbdev->fd, drv->smem_len + 0x20000);
+    if (drv->RGB16_base == (void*) -1)
+	return DFB_IO;
+
+    drv->var_base = mmap(NULL, 0x00010000, PROT_READ | PROT_WRITE, MAP_SHARED, dfb_fbdev->fd, drv->smem_len + 0x30000);
+    if (drv->var_base == (void*) -1)
+	return DFB_IO;
+
+    /* base functions */
+    funcs->EngineSync = NULL;
+    funcs->CheckState = _cx2450x_check_state;
+    funcs->SetState   = _cx2450x_set_state;
+
+    /* drawing functions */
+    funcs->DrawLine      = _cx2450x_draw_line;
+    funcs->DrawRectangle = _cx2450x_draw_rectangle;
+    funcs->FillRectangle = _cx2450x_fill_rectangle;
+    funcs->FillTriangle  = _cx2450x_fill_triangle;
+
+    /* blitting functions */
+    funcs->Blit        = _cx2450x_blit;
+    funcs->StretchBlit = _cx2450x_stretchblit;
+
+    return DFB_OK;
+}
+
+/*******************************************************************************/
+
+static DFBResult driver_init_device(CoreGraphicsDevice *device, GraphicsDeviceInfo *device_info, void *driver_data, void *device_data)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+
+    snprintf(device_info->name,   DFB_GRAPHICS_DEVICE_INFO_NAME_LENGTH,   "CX2450x");
+    snprintf(device_info->vendor, DFB_GRAPHICS_DEVICE_INFO_VENDOR_LENGTH, "NXP");
+
+    device_info->caps.flags    = 0;										/* CardCapabilitiesFlags */
+    device_info->caps.accel    = CX2450X_SUPPORTED_DRAWING_FUNCTIONS | CX2450X_SUPPORTED_BLITTING_FUNCTIONS;	/* DFBAccelerationMask */
+    device_info->caps.blitting = CX2450X_SUPPORTED_BLITTING_FLAGS;						/* DFBSurfaceBlittingFlags */
+    device_info->caps.drawing  = CX2450X_SUPPORTED_DRAWING_FLAGS;						/* DFBSurfaceDrawingFlags */
+    device_info->caps.clip     = DFXL_NONE;									/* DFBAccelerationMask */
+
+    device_info->limits.surface_byteoffset_alignment        = 128;	// ??? /* unsigned int */
+    device_info->limits.surface_pixelpitch_alignment        = 32;	// ??? /* unsigned int */
+
+    device_info->limits.surface_bytepitch_alignment         = 4;	/* unsigned int */
+
+    _write_gxa(drv->gxa_base, GXA_CONTENT_ID_REG, 0);
+
+    return DFB_OK;
+}
+
+/*******************************************************************************/
+
+static void driver_close_device(CoreGraphicsDevice *device, void *driver_data,	void *device_data)
+{
+    /* nothing to do fur us */
+}
+
+/*******************************************************************************/
+
+static void driver_close_driver(CoreGraphicsDevice *device, void *driver_data)
+{
+    CX2450XDriverData *drv = (CX2450XDriverData *)driver_data;
+
+    if (drv->gxa_base != (void*) -1)
+	munmap((void*) drv->gxa_base, 0x00040000);
+
+    if (drv->coeff_base != (void*) -1)
+	munmap((void*) drv->coeff_base, 0x00010000);
+
+    if (drv->A8_base != (void*) -1)
+	munmap((void*) drv->A8_base, 0x00010000);
+
+    if (drv->RGB16_base != (void*) -1)
+	munmap((void*) drv->RGB16_base, 0x00010000);
+
+    if (drv->var_base != (void*) -1)
+	munmap((void*) drv->var_base, 0x00010000);
+
+    if (drv->devmem_fd > -1)
+	close(drv->devmem_fd);
+}
diff --git a/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.h b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.h
new file mode 100644
index 0000000..7928fae
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/cx2450x/cx2450x.h
@@ -0,0 +1,97 @@
+/*
+ * Conexant / NXP CX2450x accelated driver
+ *
+ * (c) Coolstream International Limited
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the
+ * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+ * Boston, MA 02111-1307, USA.
+ *
+ */
+
+#ifndef __CX2450X_H__
+#define __CX2450X_H__
+
+#include <direct/types.h>
+
+/* GXA register definitions (as offset) */
+#define GXA_FG_COLOR_REG	0x0020
+#define GXA_BG_COLOR_REG	0x0024
+#define GXA_LINE_PATT_REG	0x0028
+#define	GXA_CFG_REG		0x0030
+#define GXA_BLT_CONTROL_REG	0x0034
+#define GXA_LINE_CONTROL_REG	0x0038
+#define GXA_BLEND_CFG_REG	0x003C
+#define	GXA_BMP1_TYPE_REG	0x0048
+#define	GXA_BMP1_ADDR_REG	0x004C
+#define	GXA_BMP2_TYPE_REG	0x0050
+#define	GXA_BMP2_ADDR_REG	0x0054
+#define GXA_DEPTH_REG		0x00F4
+#define	GXA_CFG2_REG		0x00FC
+#define GXA_SC_NORM_REG		0x0120
+#define GXA_CSC_SET0_REG	0x0124
+#define GXA_CSC_SET1_REG	0x0128
+#define GXA_CSC_SET2_REG	0x012C
+#define	GXA_CONST_COLOR_REG	0x0134
+#define	GXA_KEY_UPPER_REG	0x0138
+#define	GXA_KEY_LOWER_REG	0x013C
+#define GXA_CONTENT_ID_REG	0x0144
+
+/* GXA commands at bit 17:11 */
+#define GXA_CMD_QMARK		0x00001000
+#define	GXA_CMD_PALETTE		0x00001800
+#define GXA_CMD_VFILTER		0x00002000
+#define GXA_CMD_HFILTER		0x00002800
+#define GXA_CMD_BLT		0x00010800	/* perform blitting if set, or line draw if not set */
+#define GXA_CMD_NOT_ALPHA	0x00011000	/* no alpha blending if set */
+#define GXA_CMD_SRC_TRANSP	0x00012000	/* use source transparency if set */
+#define GXA_CMD_ROP		0x00014000	/* special Raster Operations if set (type of ROP must be setup manually), or simply copy if not set */
+#define GXA_CMD_NOT_TEXT	0x00018000	/* no special text blit algorythm if set (only valid for patterns) */
+#define GXA_CMD_STRETCH_BLT	0x00030000	/* stretch blit if enabled */
+
+/* various bitfield definitions for GXA addressing (if it's not a register R/W) */
+#define GXA_SRC_BMP_SEL(x)	(x << 8)	/* Source bitmap selector from 0 to 7 (for blitting cmds) */
+#define GXA_DST_BMP_SEL(x)	(x << 5)	/* destination bitmap selector from 0 to 7 (for blitting and drawing cmds) */
+#define GXA_PARAM_COUNT(x)	(x << 2)	/* command parameter from 0 to 7 */
+
+/* encode pixel data into register values */
+#define GXA_POINT(x, y)		(((y) << 16) | (x))
+
+typedef struct 
+{
+    unsigned long	 smem_start;		/* physical start address of the framebuffer */
+    unsigned int	 smem_len;		/* length of the framebuffer */
+    int			 devmem_fd;		/* the filedescriptor for the opened /dev/mem */
+    volatile u8		*gxa_base;		/* the mmap'd GXA register address space */
+    volatile u8		*coeff_base;		/* the mmap'd view of the private used space */
+    volatile u8		*A8_base;
+    volatile u8		*RGB16_base;
+    volatile u8		*var_base;
+    u32	 		 priv_start;		/* the start address of private used framebuffer space (not seen by DFB) */
+    u32			 priv_len;		/* the size of private used space */
+    u32			 coeff_table;
+    u32			 A8_table;
+    u32			 RGB16_table;
+    u32			 var_table;
+} CX2450XDriverData;
+
+typedef struct
+{
+    u32		 		d_cmd_opts;	/* additional command options for draw */
+    u32		 		b_cmd_opts;	/* additional command options for blit */
+    DFBSurfaceBlittingFlags	b_flags;	/* local copy of blitting flags from state->mod_hw to make workarounds for DFB-bugs */
+    bool			b_soft;
+} CX2450XDeviceData;
+
+#endif /* __CX2450X_H__ */
diff --git a/DirectFB-1.4.0/gfxdrivers/unichrome/Readme.txt b/DirectFB-1.4.0/gfxdrivers/unichrome/Readme.txt
new file mode 100644
index 0000000..e74fc37
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/unichrome/Readme.txt
@@ -0,0 +1,101 @@
+Unichrome driver readme
+-----------------------
+
+Recommended VESA framebuffer settings (use them on the kernel command line):
+
+vga=789 video=vesa:ywrap,vram:32
+
+vga=789 sets 800x600 pixels, 32 bits per pixel.
+vesa:ywrap is makes it possible to flip the primary surface.
+vram:32 forces the VESA framebuffer to use 32Mb video RAM.
+Adjust 32 to match your BIOS settings, eg 64 or 128.
+
+For best performance, the viafb framebuffer driver should be used.
+There are a number of variants of this: the best for use with DirectFB
+is kept in the linux-viafb directory in the DirectFB CVS repository.
+
+Reporting bugs
+--------------
+
+If you want to report any problem, please make an effort to figure
+out what is going on. Please also provide a small code example that
+reliably replicates your problem and only relies on DirectFB.
+
+A single .c file + makefile is preferred, so that it can be built and
+tested easily.
+
+Just stating that "this or that doesn't work" is a way of giving the
+developer a load of work, beyond fixing the actual problem.
+
+Unimplemented features (TODOs)
+------------------------------
+
+* Colorkeyed stretch blits.
+* Support for interlaced surfaces.
+* Second video overlay (for picture-in-picture video)
+* HQV video blitter support.
+* System->Video RAM blits. (AGPGART support)
+
+Special features
+----------------
+
+* The video overlay layer can be placed beneath the primary layer,
+  which can have an alpha channel.
+  
+  To enable this, set the level of the overlay to -1 (using SetLevel)
+  and enable the DLOP_ALPHACHANNEL option on the primary.  Then use
+  either AiRGB as the primary pixel format (see also 'known bugs and
+  quirks' below).
+  
+* The FIELD_PARITY option is supported for the video overlay but this
+  requires that the DirectFB version of the viafb framebuffer driver
+  is used.
+
+Limitations (of the hardware)
+-----------------------------
+
+* These drawing and blitting flags are not supported:
+  DSDRAW_DST_PREMULTIPLY, DSDRAW_DEMULTIPLY
+  DSBLIT_SRC_PREMULTIPLY, DSBLIT_DST_PREMULTIPLY, DSBLIT_DEMULTIPLY
+
+* You can not combine source and destination color keying when
+  blitting opaque surfaces. Both functions work, just not at the
+  same time.
+  
+* The hardware does not support 24-bit (3 bytes/pixel) surfaces. 
+
+* The blitter does not support YUV->RGB pixel-format conversion.
+  Video surfaces does the conversion automatically.
+
+* Hardware accelerated blending is not available on AiRGB surfaces.
+
+Known bugs and quirks
+---------------------
+
+* In underlay mode (see 'special features', above), the video
+  is fully visible where the primary layer's alpha is 255, and
+  invisible (= graphics visible) where the alpha is 0.
+
+  This requires the special pixel format AiRGB.  Accelerated blitting
+  to AiRGB surfaces is supported but blending is not.  If blending is
+  required, use a convential RGB surface first and blit the composed
+  image to the AiRGB layer surface.
+
+* Do not use the CPU to write into VRAM surfaces, unless where
+  absolutely needed (ie system -> video blits). CPU accesses
+  into VRAM run at 1/4 speed.
+
+* Colorkeyed stretched blits are not supported => will be software
+  rendered => will be very slow, if the source surface is in VRAM.
+
+* Blitting outside the screen is buggy (e.g with negative surface
+  coordinates). The result is clipped, but does not look right.
+
+* There are different hardware variants of the Unichrome chips.  Since
+  the revision number can only be read by superuser processes, a utility
+  'find_revision.sh' is provided.  The value it reports should be used
+  in /etc/directfbrc in a line of the form 'unichrome-revision=xx'.
+  
+  Symptoms of an incorrect revision number are corrupt images on the
+  video overlay layer or incorrect colors when using YUY2 or YV12
+  pixel formats.
diff --git a/DirectFB-1.4.0/gfxdrivers/unichrome/find_revision.sh b/DirectFB-1.4.0/gfxdrivers/unichrome/find_revision.sh
new file mode 100755
index 0000000..7a54d1e
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/unichrome/find_revision.sh
@@ -0,0 +1,26 @@
+#!/bin/sh
+
+# The CLE266 revision number can be found at offset 0xf6 from the host
+# bridge's PCI configuration space.  However, it can only be read by
+# a superuser process.
+#
+# This script prints the revision number which can then be set in
+# DirectFB's configuration file /etc/directfbrc.
+
+if [ `id -u` -ne 0 ]; then
+	echo Only root can read the necessary bytes to determine the
+	echo revision number.
+	exit 1
+fi
+
+set `od -j246 -N1 -Ax -td1 /proc/bus/pci/00/00.0`
+unichrome_revision=$2
+
+if [ "$unichrome_revision" = "" ]; then
+	echo Failed to read CLE266 revision number.
+	exit 1
+fi
+
+echo Your CLE266 revision number is $unichrome_revision.
+echo To use this value, add the following line to /etc/directfbrc:
+echo "   " unichrome-revision=$unichrome_revision
diff --git a/DirectFB-1.4.0/gfxdrivers/unichrome/ucio.c b/DirectFB-1.4.0/gfxdrivers/unichrome/ucio.c
new file mode 100644
index 0000000..6850480
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/unichrome/ucio.c
@@ -0,0 +1,424 @@
+/*
+   Copyright (c) 2003, 2004 Andreas Robinson, All rights reserved.
+   Kernel v2.6 code by André Kriehn.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+*/
+
+/* Standalone Unichrome IO-registers mmap driver.
+ * Tested on Linux 2.4.20 and 2.6.0-test3.
+ * 
+ * Compilation:
+ *
+ * make -f ucio.mk v24-devfs
+ * make -f ucio.mk v24
+ * make -f ucio.mk v26-devfs
+ * make -f ucio.mk v26
+ *
+ * Explanation
+ *
+ * v24-devfs compiles for a 2.4 kernel, relying on devfs.
+ * v24 compiles for a 2.4 kernel, without relying on devfs.
+ * v26-devfs compiles for a 2.6 kernel, relying on devfs.
+ * v26 compiles for a 2.6 kernel, without relying on devfs.
+ *
+ * If in doubt use v24 or v26, since devfs is not a standard
+ * kernel feature.
+ *
+ * If you select v24 or v26, you must create a device node in
+ * your /dev directory, by executing the following  command:
+ * (If you have devfs and select v24 or v26, you should
+ * not do this.)
+ *
+ * mknod -m 666 /dev/ucio c 245 0
+ * (You need to have root privileges)
+ *
+ * IMPORTANT: If you forget to do this, DirectFB programs will
+ * run, but won't be accelerated, even if you install the module
+ * properly.
+ *
+ * The non-devfs options allocates a major device number, 245.
+ * This number is for experimental use only, and can possibly conflict
+ * with something else if you have other experimental drivers installed.
+ * If you need to change it, edit VIADEV_MAJOR below and adjust your
+ * mknod command if you use it.
+ */
+
+#include <linux/init.h>
+#include <linux/module.h>
+#include <linux/major.h>
+#include <linux/pci.h>
+#include <linux/devfs_fs_kernel.h>
+#include <linux/version.h>
+#include <linux/wait.h>
+#include <asm/uaccess.h> /* copy_from_user() */
+
+#include "uc_probe.h"
+
+// Test
+#define FBIO_WAITFORVSYNC       _IOW('F', 0x20, u_int32_t)
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+#include <linux/vermagic.h>
+#endif
+
+
+// Module configuration ------------------------------------------------------
+
+#define VIADEV_MAJOR 245
+
+// VIA register declarations -------------------------------------------------
+
+/* defines for VIA 3D registers */
+#define VIA_REG_INTERRUPT       0x200
+#define VIA_REG_STATUS          0x400
+
+/* VIA_REG_INTERRUPT */
+#define VIA_IRQ_GLOBAL          (1 << 31)
+#define VIA_IRQ_VBI_ENABLE      (1 << 19)
+#define VIA_IRQ_VBI_PENDING     (1 << 3)
+
+/* VIA_REG_STATUS(0x400): Engine Status */
+#define VIA_CMD_RGTR_BUSY       0x00000080  /* Command Regulator is busy */
+#define VIA_2D_ENG_BUSY         0x00000001  /* 2D Engine is busy */
+#define VIA_3D_ENG_BUSY         0x00000002  /* 3D Engine is busy */
+#define VIA_VR_QUEUE_BUSY       0x00020000  /* Virtual Queue is busy */
+
+#define VIA_OUT(hwregs, reg, val) *(volatile u32 *)((hwregs) + (reg)) = (val)
+#define VIA_IN(hwregs, reg)       *(volatile u32 *)((hwregs) + (reg))
+
+#define MAXLOOP 0xffffff
+
+// Private declarations ------------------------------------------------------
+
+#define MODULE_NAME "ucio"
+#define MY_ASSERT(test, msg, exitcode) if (!test) { printk(msg); return exitcode; }
+
+struct via_devinfo
+{
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,0)
+#ifndef UC_STATIC_DEVNUM
+    devfs_handle_t devhnd;
+#endif
+#endif
+    u16 pciid;                  // PCI id
+    char* name;                 // Device name
+    struct pci_dev* pcidev;     // PCI device (see linux/pci.h)
+    u32 io_base_phy;            // Physical IO register address
+    u8* iobase;                 // Kernel-mapped IO register address
+    u32 size;                   // IO memory size in bytes
+
+    int busy;
+
+    int irq_num;                // Vertical blanking IRQ number
+    int irq_cnt;                // Vertical blanking IRQ counter
+
+    wait_queue_head_t wq;
+};
+
+// ----------------------------------------------------------------------------
+
+/// Global device info
+static struct via_devinfo di;
+
+/// Get chipset revision.
+
+static int via_get_revision(void)
+{
+    u8 rev;
+    struct pci_dev* dev;
+    dev = pci_find_slot(0,0);
+    if (dev == NULL) return -1;
+
+    pci_read_config_byte(dev, 0xf6, &rev);
+    return rev;
+}
+
+/// Probe for Unichrome device
+
+static int via_probe(void)
+{
+    int i;
+    u16 id;
+
+    for (i = 0, id = 0xffff; id > 0; i++) {
+        id = uc_via_devices[i].id;
+        di.pcidev = pci_find_device(PCI_VENDOR_ID_VIA, id, NULL);
+        if (di.pcidev) break;
+    }
+    di.pciid = id;
+    di.name = uc_via_devices[i].name;
+    return id;
+}
+
+static void via_enable_mmio(void)
+{
+    // in/out only works when the Unichrome VGA is the primary device.
+    // Refer to the XFree86 VIA driver for info on how to set it up
+    // when used as secondary driver.
+
+    //outb(inb(0x3c3) | 0x01, 0x3c3);
+    //outb(inb(0x3cc) | 0x01, 0x3c2);
+
+    // Unlock Extended IO Space
+
+    outb(0x10, 0x3c4);
+    outb(0x01, 0x3c5);
+
+    // Enable MMIO
+
+    outb(0x1a, 0x3c4);
+    //outb(inb(0x3c5) | 0x68, 0x3c5);
+}
+
+static int via_wait_idle(void)
+{
+    int loop = 0;
+
+    while (!(VIA_IN(di.iobase, VIA_REG_STATUS) 
+        & VIA_VR_QUEUE_BUSY) && 
+        (loop++ < MAXLOOP));
+
+    while ((VIA_IN(di.iobase, VIA_REG_STATUS) &
+      (VIA_CMD_RGTR_BUSY | VIA_2D_ENG_BUSY | VIA_3D_ENG_BUSY)) &&
+      (loop++ < MAXLOOP));
+
+    return loop >= MAXLOOP;
+}
+
+void via_vga_irqhandler(int irq, void *dev_id, struct pt_regs *regs)
+{
+    struct via_devinfo* vdi = (struct via_devinfo*) dev_id;
+    u32 status = VIA_IN(di.iobase, VIA_REG_INTERRUPT);
+
+    if (status & VIA_IRQ_VBI_PENDING) {
+        VIA_OUT(di.iobase, VIA_REG_INTERRUPT, status | VIA_IRQ_VBI_PENDING);
+
+        vdi->irq_cnt++;
+        wake_up_interruptible(&di.wq);
+    }
+}
+
+static int install_irq_handler(int irq_num)
+{
+    int retval;
+
+    retval = request_irq(irq_num, via_vga_irqhandler,
+    SA_SHIRQ | SA_INTERRUPT, MODULE_NAME, (void *) &di);
+
+    if (retval == -EINVAL) {
+        printk(MODULE_NAME ": No IRQ handler installed, "
+            "IRQ number %d is not valid.\n", irq_num);
+    }
+    else if (retval == -EBUSY) {
+        printk(MODULE_NAME ": No IRQ handler installed, "
+            "IRQ %d is busy. Check BIOS.\n", irq_num);
+    }
+    else if (retval < 0) {
+        printk(MODULE_NAME ": No IRQ handler installed. "
+            "Tried IRQ number %d.\n", irq_num);
+    }
+
+    di.irq_cnt = 0;
+    if (retval >= 0) {
+        di.irq_num = irq_num;
+
+        // Enable vertical sync IRQ.
+        // BUG WARNING: May conflict with other VIA drivers using vsync IRQ.
+        // TODO: Contact VIA to get the same functionality into viafb.
+
+        VIA_OUT(di.iobase, VIA_REG_INTERRUPT,
+            VIA_IN(di.iobase, VIA_REG_INTERRUPT) |
+                VIA_IRQ_GLOBAL | VIA_IRQ_VBI_ENABLE | VIA_IRQ_VBI_PENDING);
+
+        outb(0x11, 0x3d4);
+        outb(inb(0x3d5) | 0x30, 0x3d5);
+
+        printk("IRQ(0x200) = %x\n", VIA_IN(di.iobase, VIA_REG_INTERRUPT));
+    }
+
+    return retval;
+}
+
+// Module and device file I/O functions --------------------------------------
+
+static int viadev_open(struct inode *inode, struct file *filp)
+{
+    return 0; 
+}
+        
+static int viadev_release(struct inode *inode, struct file *filp)
+{
+    return 0;
+}
+
+/* BUG warning: This function is probably not thread/process-safe.
+ * However, the kernel uses spinlocks in the wq, so maybe it is...? */
+
+static int viadev_ioctl(struct inode *inode, struct file *filp,
+                        unsigned int cmd, unsigned long arg)
+{
+    switch(cmd)
+    {
+    case FBIO_WAITFORVSYNC:
+        interruptible_sleep_on(&di.wq);
+        return 0;
+    default:
+        return -ENOTTY;
+    }
+}
+
+static int viadev_mmap(struct file* filp, struct vm_area_struct* vma)
+{
+    unsigned long off = vma->vm_pgoff << PAGE_SHIFT;
+    unsigned long phy = di.io_base_phy + off;
+    unsigned long vsize = vma->vm_end - vma->vm_start;
+    unsigned long psize = di.size - off;
+
+    if (vsize > psize) return -EINVAL;
+
+    vma->vm_pgoff = phy >> PAGE_SHIFT;
+
+    if (boot_cpu_data.x86 > 3)
+        pgprot_val(vma->vm_page_prot) |= _PAGE_PCD;
+
+    vma->vm_flags |= VM_IO | VM_RESERVED | VM_DONTEXPAND;
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+    if (io_remap_page_range(vma,vma->vm_start, phy, vsize, vma->vm_page_prot))
+       return -EAGAIN;
+#else
+    if (io_remap_page_range(vma->vm_start, phy, vsize, vma->vm_page_prot))
+       return -EAGAIN;
+#endif
+
+    return 0;
+}
+
+static struct file_operations viadev_fops = {
+    .owner = THIS_MODULE,
+    .ioctl = viadev_ioctl,
+    .mmap = viadev_mmap,
+    .open = viadev_open,
+    .release = viadev_release,
+};
+
+static int __init viadev_init(void)
+{
+    // Find the device
+
+    via_probe();
+    MY_ASSERT(di.pcidev,
+        MODULE_NAME ": No VIA Unichrome graphics device found.\n", -ENODEV);
+    MY_ASSERT(!di.pcidev->driver,
+        MODULE_NAME ": Another driver already controls the Unichrome graphics device.\n", -EBUSY);
+
+    // Map physical IO memory address into kernel space.
+
+    di.io_base_phy = pci_resource_start(di.pcidev, 1);
+    di.size = pci_resource_len(di.pcidev, 1);
+    MY_ASSERT(request_mem_region(di.io_base_phy, di.size, MODULE_NAME),
+        MODULE_NAME ": Memory mapping failed (1).\n", -EBUSY);
+
+    di.iobase = ioremap(di.io_base_phy, di.size);
+    MY_ASSERT(di.iobase, MODULE_NAME ": Memory mapping failed (2).\n", -EBUSY);
+
+    init_waitqueue_head(&di.wq);
+
+    // Try to install a vertical blanking interrupt handler.
+    // Failure is not fatal.
+    install_irq_handler(di.pcidev->irq);
+
+    // TODO: Register PCI device driver. Or not. We don't really have to.
+
+    // Register a character device.
+
+#if UC_STATIC_DEVNUM
+    int result;
+    result = register_chrdev(VIADEV_MAJOR, MODULE_NAME, &viadev_fops);
+    MY_ASSERT(!result, MODULE_NAME " Unable to register driver\n", result);
+#else
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+    int result;
+    result = register_chrdev(VIADEV_MAJOR, MODULE_NAME, &viadev_fops);
+    MY_ASSERT(!result, MODULE_NAME " Unable to register driver\n", result);
+    devfs_mk_cdev(MKDEV(VIADEV_MAJOR, 0), S_IFCHR | S_IRUSR | S_IWUSR, MODULE_NAME);
+#else
+    di.devhnd = devfs_register(NULL, MODULE_NAME, DEVFS_FL_AUTO_DEVNUM,
+        0, 0, S_IFCHR | S_IRUGO | S_IWUGO, &viadev_fops, &di);
+    MY_ASSERT(di.devhnd, MODULE_NAME ": Could not register a /dev entry.\n", -EAGAIN);
+#endif
+
+#endif // UC_STATIC_DEVNUM
+
+    printk(MODULE_NAME " installed. VIA %s rev %d detected. ",
+        di.name, via_get_revision());
+
+    if (di.irq_num != 0)
+        printk("Using IRQ %d.\n", di.irq_num);
+    else
+        printk("\n");
+
+    via_enable_mmio();
+    
+    return 0;
+}
+
+static void __exit viadev_exit(void)
+{
+    if (di.irq_num != 0) {
+
+        // Disable vertical sync IRQ.
+        // BUG WARNING: May conflict with other VIA drivers using vsync IRQ.
+
+        VIA_OUT(di.iobase, VIA_REG_INTERRUPT,
+            (VIA_IN(di.iobase, VIA_REG_INTERRUPT) & ~VIA_IRQ_VBI_ENABLE)
+            | VIA_IRQ_VBI_PENDING);
+
+        outb(0x11, 0x3d4);
+        outb(inb(0x3d5) & ~0x30, 0x3d5);
+
+        free_irq(di.irq_num, (void *) &di);
+        printk(MODULE_NAME ": %d interrupt requests serviced.\n", di.irq_cnt);
+    }
+#if UC_STATIC_DEVNUM
+    unregister_chrdev(VIADEV_MAJOR, MODULE_NAME);
+#else
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+    unregister_chrdev(VIADEV_MAJOR, MODULE_NAME);
+    devfs_remove(MODULE_NAME);
+#else
+    devfs_unregister(di.devhnd);
+#endif
+
+#endif // UC_STATIC_DEVNUM
+
+    via_wait_idle();
+    iounmap(di.iobase);
+    release_mem_region(di.io_base_phy, di.size);
+
+    printk(MODULE_NAME " removed.\n");
+}
+
+module_init(viadev_init);
+module_exit(viadev_exit);
+
+#if LINUX_VERSION_CODE > KERNEL_VERSION(2,5,0)
+
+MODULE_INFO(vermagic, VERMAGIC_STRING);
+
+static const char __module_depends[]
+__attribute_used__
+__attribute__((section(".modinfo"))) =
+"depends=";
+
+#endif
+
+MODULE_AUTHOR("Andreas Robinson");
+MODULE_DESCRIPTION("VIA UniChrome Driver");
+MODULE_LICENSE("GPL");
diff --git a/DirectFB-1.4.0/gfxdrivers/unichrome/ucio.mk b/DirectFB-1.4.0/gfxdrivers/unichrome/ucio.mk
new file mode 100644
index 0000000..1101fd1
--- /dev/null
+++ b/DirectFB-1.4.0/gfxdrivers/unichrome/ucio.mk
@@ -0,0 +1,46 @@
+# The makefile for the Unichrome IO module.
+# Build-command: make -f ucio.mk
+
+.SILENT:
+
+all:
+	echo Usage:
+	echo     make -f ucio.mk v24-devfs
+	echo     make -f ucio.mk v24
+	echo     make -f ucio.mk v26-devfs
+	echo     make -f ucio.mk v26
+	echo
+	echo v24: Compile for a 2.4 kernel.
+	echo v26: Compile for a 2.6 kernel.
+	echo
+	echo -devfs suffix: Module will use devfs.
+	echo   You will need to manually create a /dev device entry
+	echo   if you do not use it.
+	echo
+	echo See ucio.c for more details.
+	echo
+	echo You need to have kernel header files matching the version you
+	echo are trying to compile to, in /usr/src/linux/include.
+	echo
+	echo ... the kernel driver has not been built.
+
+v24-devfs:
+	echo Compiling v2.4 kernel module with devfs support.
+	gcc -D__KERNEL__  -DMODULE -O2 -Wall -I/usr/src/linux/include -c ucio.c
+
+v24:
+	echo Compiling v2.4 kernel module not depending on devfs.
+	gcc -D__KERNEL__  -DMODULE -DUC_STATIC_DEVNUM -O2 -Wall -I/usr/src/linux/include -c ucio.c
+
+v26-devfs:
+	echo Compiling v2.6 kernel module with devfs support.
+	gcc -Wall -Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -pipe -mpreferred-stack-boundary=2 -march=i486 -falign-functions=0 -falign-jumps=0 -falign-loops=0 -D__KERNEL__  -DMODULE -DKBUILD_MODNAME=ucio -DKBUILD_BASENAME=ucio -I/usr/src/linux/include -c ucio.c -o ucio.o
+	ld -m elf_i386 -r -o ucio.ko ucio.o
+
+v26:
+	echo Compiling v2.6 kernel module.
+	gcc -Wall -Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -pipe -mpreferred-stack-boundary=2 -march=i486 -falign-functions=0 -falign-jumps=0 -falign-loops=0 -DUC_STATIC_DEVNUM -D__KERNEL__  -DMODULE -DKBUILD_MODNAME=ucio -DKBUILD_BASENAME=ucio -I/usr/src/linux/include -c ucio.c -o ucio.o
+	ld -m elf_i386 -r -o ucio.ko ucio.o
+
+clean:
+	rm -f ucio.o ucio.ko
diff --git a/DirectFB-1.4.0/hd1_config b/DirectFB-1.4.0/hd1_config
new file mode 100755
index 0000000..c98e4b1
--- /dev/null
+++ b/DirectFB-1.4.0/hd1_config
@@ -0,0 +1,24 @@
+#!/bin/sh
+
+PREFIX=/hd1
+CCPATH=
+HOST=arm-cx2450x-linux-gnueabi
+
+export PKG_CONFIG_PATH=$PREFIX/lib/pkgconfig
+export CC=$CCPATH$HOST-gcc
+export AR=$CCPATH$HOST-ar
+export NM=$CCPATH$HOST-nm
+export RANLIB=$CCPATH$HOST-ranlib
+export OBJDUMP=$CCPATH$HOST-objdump
+export STRIP=$CCPATH$HOST-strip
+
+export CFLAGS="-I"$PREFIX"/include"
+export LDFLAGS="-L"$PREFIX"/lib"
+
+./configure --prefix=/$PREFIX --build=i686-pc-linux-gnu --host=$HOST \
+            --with-inputdrivers=linuxinput --with-gfxdrivers=cx2450x --disable-video4linux \
+            --disable-video4linux2 --enable-zlib --disable-x11 --disable-osx --disable-vnc \
+            --enable-debug --disable-network --disable-devmem --disable-sysfs --enable-fbdev \
+	    --enable-jpeg --with-tests
+
+#--with-smooth-scaling 
diff --git a/DirectFB-1.4.0/include/directfb.h b/DirectFB-1.4.0/include/directfb.h
index 16860ab..5b42a8f 100644
--- a/DirectFB-1.4.0/include/directfb.h
+++ b/DirectFB-1.4.0/include/directfb.h
@@ -5428,6 +5428,19 @@ DEFINE_INTERFACE(   IDirectFBWindow,
           IDirectFBWindow               *thiz,
           int                            rotation
      );
+
+
+   /** Association **/
+
+     /*
+      * Change the window association.
+      *
+      * If <b>window_id</b> is 0, the window will be dissociated.
+      */
+     DFBResult (*SetAssociation) (
+          IDirectFBWindow               *thiz,
+          DFBWindowID                    window_id
+     );
 )
 
 
diff --git a/DirectFB-1.4.0/inputdrivers/gunze/dfb-calib.c b/DirectFB-1.4.0/inputdrivers/gunze/dfb-calib.c
new file mode 100644
index 0000000..b17b478
--- /dev/null
+++ b/DirectFB-1.4.0/inputdrivers/gunze/dfb-calib.c
@@ -0,0 +1,469 @@
+/*
+   (c) Copyright 2001-2009  The world wide DirectFB Open Source Community (directfb.org)
+   (c) Copyright 2000-2004  Convergence (integrated media) GmbH
+
+   All rights reserved.
+
+   Written by Denis Oliver Kropp <dok@directfb.org>,
+              Andreas Hundt <andi@fischlustig.de>,
+              Sven Neumann <neo@directfb.org>,
+              Ville SyrjÃ¤lÃ¤ <syrjala@sci.fi> and
+              Claudio Ciccani <klan@users.sf.net>.
+
+   This file is subject to the terms and conditions of the MIT License:
+
+   Permission is hereby granted, free of charge, to any person
+   obtaining a copy of this software and associated documentation
+   files (the "Software"), to deal in the Software without restriction,
+   including without limitation the rights to use, copy, modify, merge,
+   publish, distribute, sublicense, and/or sell copies of the Software,
+   and to permit persons to whom the Software is furnished to do so,
+   subject to the following conditions:
+
+   The above copyright notice and this permission notice shall be
+   included in all copies or substantial portions of the Software.
+
+   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
+   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+*/
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <unistd.h>
+
+#include <errno.h>
+#include <fcntl.h>
+#include <termios.h>
+
+#include <math.h>
+#include <directfb.h>
+
+static IDirectFB *dfb = NULL;
+static IDirectFBSurface *primary = NULL;
+static IDirectFBEventBuffer *buffer = NULL;
+static IDirectFBInputDevice *mouse = NULL;
+static IDirectFBFont *gara_reg_12 = NULL;
+
+static int screen_width  = 0;
+static int screen_height = 0;
+
+#define DFBCHECK(x...)                                       \
+{                                                            \
+   DFBResult err = x;                                        \
+                                                             \
+   if (err != DFB_OK)                                        \
+   {                                                         \
+      fprintf( stderr, "%s <%d>:\n\t", __FILE__, __LINE__ ); \
+      DirectFBErrorFatal( #x, err );                         \
+   }                                                         \
+}
+
+
+#define BUFFER_SIZE         64          /* size of reception buffer */
+#define GUNZE_MAXPHYSCOORD  1023
+#define GUNZE_MAXCOORD      (64*1024-1) /* oversampled, synthetic value */
+#define FLAG_TAPPING        1
+#define FLAG_WAS_UP         2
+#define BAUDRATE            B9600
+static const char *default_options[] =
+{
+	"BaudRate", "9600",
+	"StopBits", "1",
+	"DataBits", "8",
+	"Parity", "None",
+	"Vmin", "1",
+	"Vtime", "10",
+	"FlowControl", "None",
+	NULL
+};
+
+typedef struct 
+{
+    char	*gunDevice;	/* device file name */
+    int		flags;		/* various flags */
+    int		gunType;        /* TYPE_SERIAL, etc */
+    int		gunBaud;	/* 9600 or 19200 */
+    int		gunDlen;	/* data length (3 or 11) */
+    int		gunAvgX;	/* previous X position */
+    int		gunAvgY;	/* previous Y position */
+    int		gunSmooth;	/* how smooth the motion is */
+    int		gunTapping;	/* move-and-tap (or press-only) */
+    int		gunPrevButton;	/* previous button state */
+    int		gunBytes;	/* number of bytes read */
+    unsigned char gunData[16];	/* data read on the device */
+    struct timeval *gunTv;      /* release time */
+    char	*gunConfig;     /* filename for configuration */
+    int     fd;
+} GunzeDevice, *GunzeDevicePtr;
+
+enum devicetypeitems {
+    TYPE_UNKNOWN = 0,
+    TYPE_SERIAL = 1,
+    TYPE_PS2,
+    TYPE_USB
+};
+
+#define GUNZE_SERIAL_DLEN 11
+#define GUNZE_PS2_DLEN     3
+
+#define GUNZE_SECTION_NAME    "GunzeTS"
+#define GUNZE_DEFAULT_CFGFILE "/etc/gunzets.calib"
+
+
+#define SYSCALL(call) while(((call) == -1) && (errno == EINTR))
+struct axis_coord {
+    int x;
+    int y;
+} coords;
+
+static void GetCalibData(GunzeDevicePtr priv)
+{
+    unsigned char *pkt = priv->gunData;
+    int len, loop;
+    int x, y;
+    coords.x = 0;
+    coords.y = 0;
+    unsigned char buffer[BUFFER_SIZE];
+
+    while ((len = read( priv->fd, buffer, BUFFER_SIZE)) >= 0 || errno == EINTR)
+    {
+        if (len <= 0) 
+        {
+            fprintf(stderr,"error reading Gunze touch screen device %d %d\n",errno,priv->fd);
+            perror(NULL);
+            return;
+        }
+
+        for(loop=0; loop<len; loop++) 
+        {
+            // if first byte, ensure that the packet is syncronized
+            if (priv->gunBytes == 0) 
+            {
+                int error  = 0;
+                if (priv->gunDlen == GUNZE_SERIAL_DLEN) 
+                {
+                    // First byte is 'R' (0x52) or 'T' (0x54)
+                    if ((buffer[loop] != 'R') && (buffer[loop] != 'T'))
+                        error = 1;
+                }
+                else // PS/2 
+                {
+                    if ( !(buffer[loop] & 0x80) || (len > loop+1 && !(buffer[loop+1] & 0x80)) || (len > loop+2 && (buffer[loop+2]  & 0x80)))
+                        error = 1;
+                }
+                if (error) 
+                {
+                    fprintf(stderr,"GunzeReadInput: bad first byte 0x%x %c\n",buffer[loop],buffer[loop]);
+                    continue;
+                }
+            }
+
+            pkt[priv->gunBytes++] = buffer[loop];
+
+            // Hack: sometimes a serial packet gets corrupted. If so, drop it
+            if (buffer[loop] == 0x0d && priv->gunBytes != priv->gunDlen && priv->gunDlen == GUNZE_SERIAL_DLEN) 
+            {
+                pkt[priv->gunBytes-1] = '\0';
+                fprintf(stderr,"Bad packet \"%s\", dropping it\n", pkt);
+                priv->gunBytes = 0; // for next time
+                continue;
+            }
+
+            // if whole packet collected, decode it
+            if (priv->gunBytes == priv->gunDlen)
+            {
+                priv->gunBytes = 0; // for next time
+                if (priv->gunDlen == GUNZE_SERIAL_DLEN) 
+                {
+                    x = atoi((char *)pkt+1);
+                    y = atoi((char *)pkt+6);
+                }
+
+                if (x>1023 || x<0 || y>1023 || y<0) 
+                {
+                    fprintf(stderr,"Bad packet \"%s\" -> %i,%i\n", pkt, x, y);
+                    priv->gunBytes = 0; // for next time 
+                    continue;
+                }
+
+                if (pkt[0] == 'R')
+                {
+                    printf ("Returning %c %d %d\n",pkt[0],x,y);
+                    coords.x = x;
+                    coords.y = y;
+                    return;
+                }
+                printf ("Continuing %c %d %d\n",pkt[0],x,y);
+
+                priv->gunAvgX = x;
+                priv->gunAvgY = y;
+            }
+        }
+    }
+}
+
+
+static int GunzeOpen(GunzeDevicePtr priv)
+{
+    struct termios  newtio,termios_tty;
+    int err;
+
+    // Is it a serial port or something else? 
+    priv->gunType = TYPE_SERIAL;
+    priv->gunDlen = GUNZE_SERIAL_DLEN;
+
+    SYSCALL(priv->fd = open(priv->gunDevice, O_RDWR | O_NOCTTY));
+    if (priv->fd == -1) 
+    {
+        fprintf(stderr,"Error opening device %s\n",priv->gunDevice);
+        return -1;
+    }
+
+    SYSCALL(err = tcgetattr(priv->fd, &newtio));
+
+    if (err == -1) {
+        fprintf(stderr,"Gunze touch screen tcgetattr\n");
+        return -1;
+    }
+
+    memset(&newtio,0, sizeof(newtio)); /* clear struct for new port settings */
+
+/*
+    BAUDRATE: Set bps rate. You could also use cfsetispeed and cfsetospeed.
+    CRTSCTS : output hardware flow control (only used if the cable has
+            all necessary lines. See sect. 7 of Serial-HOWTO)
+    CS8     : 8n1 (8bit,no parity,1 stopbit)
+    CLOCAL  : local connection, no modem contol
+    CREAD   : enable receiving characters
+*/
+    newtio.c_cflag = BAUDRATE | CRTSCTS | CS8 | CLOCAL | CREAD;
+/*
+    IGNPAR  : ignore bytes with parity errors
+    ICRNL   : map CR to NL (otherwise a CR input on the other computer will not terminate input)
+    otherwise make device raw (no other input processing)
+*/
+    newtio.c_iflag = IGNPAR | ICRNL;
+//  Raw output
+    newtio.c_oflag = 0;
+/*
+    ICANON  : enable canonical input
+    disable all echo functionality, and don't send signals to calling program
+*/
+    newtio.c_lflag = ICANON;
+
+/*
+    initialize all control characters 
+    default values can be found in /usr/include/termios.h, and are given
+    in the comments, but we don't need them here
+*/
+    newtio.c_cc[VINTR]    = 0;     /* Ctrl-c */ 
+    newtio.c_cc[VQUIT]    = 0;     /* Ctrl-\ */
+    newtio.c_cc[VERASE]   = 0;     /* del */
+    newtio.c_cc[VKILL]    = 0;     /* @ */
+    newtio.c_cc[VEOF]     = 4;     /* Ctrl-d */
+    newtio.c_cc[VTIME]    = 0;     /* inter-character timer unused */
+    newtio.c_cc[VMIN]     = 1;     /* blocking read until 1 character arrives */
+    newtio.c_cc[VSWTC]    = 0;     /* '\0' */
+    newtio.c_cc[VSTART]   = 0;     /* Ctrl-q */ 
+    newtio.c_cc[VSTOP]    = 0;     /* Ctrl-s */
+    newtio.c_cc[VSUSP]    = 0;     /* Ctrl-z */
+    newtio.c_cc[VEOL]     = 0;     /* '\0' */
+    newtio.c_cc[VREPRINT] = 0;     /* Ctrl-r */
+    newtio.c_cc[VDISCARD] = 0;     /* Ctrl-u */
+    newtio.c_cc[VWERASE]  = 0;     /* Ctrl-w */
+    newtio.c_cc[VLNEXT]   = 0;     /* Ctrl-v */
+    newtio.c_cc[VEOL2]    = 0;     /* '\0' */
+
+    //now clean the modem line and activate the settings for the port
+
+    tcflush(priv->fd, TCIFLUSH);
+    err = tcsetattr(priv->fd, TCSANOW, &newtio);
+    if (err == -1) {
+        fprintf(stderr,"Gunze touch screen tcsetattr TCSANOW\n");
+        return -1;
+    }
+
+/*
+    DBG(2, fprintf(stderr,"%s opened as fd %d\n", priv->gunDevice, priv->fd));
+    DBG(1, fprintf(stderr,"initializing Gunze touch screen\n"));
+*/
+    // Hmm... close it, so it doens't say anything before we're ready
+    // FIX ME
+
+    // Clear any pending input
+    tcflush(priv->fd, TCIFLUSH);
+    // FIX ME: is there something to write-and-read here?
+
+    return 0;
+}
+
+static GunzeDevicePtr GunzeAllocate(void)
+{
+    GunzeDevicePtr priv = (GunzeDevicePtr)malloc(sizeof(GunzeDevice));
+
+    priv->gunDevice = "/dev/ttyS0";         /* device file name */
+    priv->gunConfig = GUNZE_DEFAULT_CFGFILE;
+    priv->gunDlen = 0;            /* unknown */
+    priv->gunType = TYPE_SERIAL;
+    priv->gunBaud = 9600;
+    priv->gunTapping = 0;         /* default */
+    priv->gunSmooth = 9;          /* quite smooth */
+    priv->gunAvgX = -1;           /* previous (avg) X position */
+    priv->gunAvgY = -1;           /* previous (avg) Y position */
+    priv->gunPrevButton = 0;      /* previous buttons state */
+    priv->flags = FLAG_WAS_UP;    /* first event is button-down */
+    priv->gunBytes = 0;           /* number of bytes read */
+    priv->fd = -1;
+
+    return priv;
+}
+
+//-----------------------------------------------------------------------------------------------
+void SetupFonts(void)
+{
+    DFBFontDescription font_dsc;
+    font_dsc.flags = DFDESC_HEIGHT;
+    font_dsc.height=25;
+    DFBCHECK(dfb->CreateFont(dfb,"/usr/local/gnatfb/GARA.TTF",&font_dsc,&gara_reg_12));
+}
+
+//-----------------------------------------------------------------------------------------------
+void ReleaseFonts(void)
+{
+    DFBCHECK(gara_reg_12->Release(gara_reg_12));
+}
+
+void DrawRects(char *input)
+{
+    int wid = screen_width; //[winfo screenwidth .]
+    int hei = screen_height; //[winfo screenheight .]
+
+    int x = screen_width/8;//[expr $wid/8]
+    int y = screen_height/8;//[expr $hei/8]
+    int LX = wid-x;//[expr $wid - $x]
+    int LY = hei-y;//[expr $hei - $y]
+    int hx = screen_width/2;//[expr $wid/2]
+    int hy = screen_height/2;//[expr $hei/2]
+    int cwid = 2*x;//[expr 2*$x]
+    int chei = 2*y;//[expr 2*$y]
+
+    DFBCHECK(primary->Clear(primary,55,18,5,0));
+    DFBCHECK(primary->Flip(primary,NULL,DSFLIP_NONE));
+    DFBCHECK(primary->Clear(primary,55,18,5,0));
+    DFBCHECK(primary->SetFont(primary,gara_reg_12));
+
+    DFBCHECK(primary->SetColor(primary,0xFF,0xEF,0xB5,0));
+    //Bottom Rectangle
+    DFBCHECK(primary->DrawRectangle(primary,50,hei-chei,cwid,chei));
+    // Top Rectangle
+    DFBCHECK(primary->DrawRectangle(primary,wid-cwid-50,0,cwid,chei));
+
+    // Draw Two Cross Hairs
+    DFBCHECK(primary->DrawLine(primary,50,hei-chei+50,150,hei-chei+50));
+    DFBCHECK(primary->DrawLine(primary,100,hei-chei,100,hei-chei+100));
+
+    DFBCHECK(primary->DrawLine(primary,wid-(cwid/2), 0 ,wid-(cwid/2), 100));
+    DFBCHECK(primary->DrawLine(primary,wid-(cwid/2)-50, 50 ,wid-(cwid/2)+50, 50));
+    DFBCHECK(primary->DrawString(primary,input,-1,screen_width/2,screen_height/2,DSTF_CENTER));
+    DFBCHECK(primary->Flip(primary,NULL,DSFLIP_NONE));
+    sleep(1);
+}
+
+//-----------------------------------------------------------------------------------------------
+int main(int argc, char *argv[])
+{
+    int quit = 0;
+
+    DFBSurfaceDescription dsc;
+    DFBCHECK (DirectFBInit (&argc, &argv));
+    DFBCHECK (DirectFBCreate (&dfb));
+
+    DFBCHECK (dfb->SetCooperativeLevel (dfb,DFSCL_EXCLUSIVE));// DFSCL_FULLSCREEN));
+    DFBCHECK (dfb->SetVideoMode(dfb,1024,768,16));
+    dsc.flags = DSDESC_CAPS | DSDESC_WIDTH | DSDESC_HEIGHT;
+    dsc.caps = DSCAPS_PRIMARY | DSCAPS_FLIPPING;
+    dsc.width = 1024;
+    dsc.height = 768;
+
+    // Surface Creation
+    DFBCHECK (dfb->CreateSurface(dfb, &dsc, &primary));
+    DFBCHECK (primary->GetSize(primary, &screen_width, &screen_height));
+    DFBCHECK (primary->SetBlittingFlags(primary,DSBLIT_BLEND_ALPHACHANNEL));
+
+    // Event Handlers
+    DFBCHECK(dfb->CreateInputEventBuffer(dfb,DICAPS_ALL,DFB_FALSE,&buffer));
+    //Cursor
+
+    SetupFonts();
+
+    GunzeDevice *priv = GunzeAllocate();
+    if(GunzeOpen(priv) != 0){
+        fprintf(stderr,"Error Opening device!\n");
+        return -1;
+    }
+
+    //The offset variables account for window manager borders etc
+
+    //DFBCHECK(primary->DrawLine(primary,wid-cwid-50, 0 ,wid-cwid+50, 50));
+    DrawRects("Touch Left Cross");
+
+    GetCalibData(priv);
+    int x1 = coords.x;
+    int y1 = coords.y;
+    DrawRects("Touch Right Cross");
+
+    GetCalibData(priv);
+    int x2 = coords.x;
+    int y2 = coords.y;
+
+    DrawRects("Done");
+    char tmp[100];
+    memset(tmp,0,100);
+    sprintf(tmp,"X1:%d Y1:%d X2:%d Y2:%d",x1,y1,x2,y2);
+    DFBCHECK(primary->DrawString(primary,tmp,-1,screen_width/2,(screen_height/2)-150,DSTF_CENTER));
+    DFBCHECK(primary->Flip(primary,NULL,DSFLIP_NONE));
+    memset(tmp,0,100);
+    sprintf(tmp,"# Calibration coordinates for Gunze Device\n%d %d %d %d",x1,y1,x2,y2);
+    int fd = 0;
+    SYSCALL(fd = open(priv->gunConfig, O_RDWR | O_TRUNC | O_CREAT));
+    SYSCALL(write(fd,tmp,strlen(tmp)));
+    close(fd);
+
+    DFBInputEvent event;
+
+    while(!quit)
+    {
+        buffer->WaitForEvent(buffer);
+        while ( buffer->GetEvent(buffer, DFB_EVENT(&event)) == DFB_OK)
+        {
+            if(event.type == DIET_KEYPRESS)
+            {
+                if(event.key_id == DIKI_ESCAPE || event.key_id == DIKI_Q)
+                {
+                    printf("Q||ESC KEY pressed event\n");
+                    fflush(NULL);
+
+                    quit = 1;
+                }
+            }
+        }
+    }
+
+    close(priv->fd);
+    free(priv);
+
+    ReleaseFonts();
+    if(mouse != NULL)
+        mouse->Release(mouse);
+
+    buffer->Release(buffer);
+    primary->Release(primary);
+    dfb->Release(dfb);
+    return 0;
+}
diff --git a/DirectFB-1.4.0/inputdrivers/penmount/Makefile.am b/DirectFB-1.4.0/inputdrivers/penmount/Makefile.am
old mode 100755
new mode 100644
diff --git a/DirectFB-1.4.0/inputdrivers/penmount/penmount.c b/DirectFB-1.4.0/inputdrivers/penmount/penmount.c
old mode 100755
new mode 100644
diff --git a/DirectFB-1.4.0/interfaces/IDirectFBFont/default_font.png b/DirectFB-1.4.0/interfaces/IDirectFBFont/default_font.png
new file mode 100644
index 0000000..e28d66a
Binary files /dev/null and b/DirectFB-1.4.0/interfaces/IDirectFBFont/default_font.png differ
diff --git a/DirectFB-1.4.0/mkchlog b/DirectFB-1.4.0/mkchlog
new file mode 100644
index 0000000..8f74dd9
--- /dev/null
+++ b/DirectFB-1.4.0/mkchlog
@@ -0,0 +1,80 @@
+#!/usr/bin/perl
+
+# Generate a ChangeLog file from a CVS log.
+# Written by Robert Krawitz <rlk@alum.mit.edu>
+# This code is in the public domain and may be used
+# for any purpose.
+
+%logmsgs = ();			# Index by date, time, and author
+$skipme = 0;
+
+$names{"dok"} = 'Denis Oliver Kropp <dok@directfb.org>';
+$names{"andi"} = 'Andreas Hundt <andi@fischlustig.de>';
+$names{"neo"} = 'Sven Neumann <sven@gimp.org>';
+$names{"mitch"} = 'Michael Natterer <mitch@convergence.de>';
+$names{"holger"} = 'Holger Waechtler <holger@convergence.de>';
+$names{"count"} = 'Andreas Kotes <count@convergence.de>';
+$names{"mm"} = 'Martin Mueller <mm@convergence.de>';
+$names{"syrjala"} = 'Ville Syrjala <syrjala@sci.fi>';
+$names{"andros"} = 'Andreas Robinson <andro134+student.liu.se>';
+$names{"klan"} = 'Claudio Ciccani <klan@users.sf.net>';
+$names{"obi"} = 'Andreas Oberritter <obi@tuxbox.org>';
+$names{"adaplas"} = 'Antonino Daplas <adaplas@users.sourceforge.net>';
+
+while (<>) {
+    if (/^Working file: /) {
+	chomp;
+	($ignore, $ignore, $currentfile) = split;
+	while (<>) {
+	    if (/^----------------------------$/) {
+		last;
+	    }
+	}
+	next;
+    } elsif (/^----------------------------$/) {
+	next;
+    } elsif (/^revision /) {
+	($ignore, $revision) = split;
+	@junk = split(/\./, $revision);
+    } elsif (/^date: /) {
+	($ignore, $date, $time, $ignore, $author, $ignore, $ignore,
+	 $ignore, $plus, $minus, $ignore, $ignore, $ignore, $commitid) = split;
+	$time =~ s/:[0-9][0-9];$//;
+	$author =~ s/;$//;
+	$datetimeauthor = "$date $time $author $commitid";
+	$body = "";
+	$firstline = 1;
+	while (<>) {
+	    if (/^----------------------------$/) {
+		last;
+	    } elsif (/^=============================================================================$/) {
+		last;
+	    } elsif ($firstline && /^branches:[ \t]+[0-9]+(\.[0-9]+)+;$/) {
+		next;
+	    } else {
+		$body .= $_;
+		$firstline = 0;
+	    }
+	}
+	if ($skipme == 0) {
+	    if ($logmsgs{$datetimeauthor}) {
+		$stuff = $logmsgs{$datetimeauthor};
+		$stuff =~ s/\n/\n\t$currentfile ($revision) ($plus $minus)\n/;
+		$logmsgs{$datetimeauthor} = $stuff;
+	    } else {
+		$logmsgs{$datetimeauthor} = "Files:\t$currentfile ($revision) ($plus $minus)\n\n$body"
+		}
+	}
+    }				# Other junk we ignore
+}
+
+@chlog = reverse sort keys %logmsgs;
+foreach $_ (@chlog) {
+    ($date, $time, $author) = split;
+    $date =~ s,/,-,g;
+    $msg = $logmsgs{$_};
+    print "$date   $author\t$time\t$names{$author}\n\n";
+    $msg =~ s/^/\t/g;
+    $msg =~ s/\n/\n\t/g;
+    print "$msg\n";
+}
diff --git a/DirectFB-1.4.0/patches/README.radeonfb-r300fix b/DirectFB-1.4.0/patches/README.radeonfb-r300fix
new file mode 100644
index 0000000..e7f7290
--- /dev/null
+++ b/DirectFB-1.4.0/patches/README.radeonfb-r300fix
@@ -0,0 +1,2 @@
+Apply the patch if own a Radeon 9500 or newer and
+you want to make it work with Linux Framebuffer.
diff --git a/DirectFB-1.4.0/patches/agpgart-noroot-2.6.10.patch.bz2 b/DirectFB-1.4.0/patches/agpgart-noroot-2.6.10.patch.bz2
new file mode 100644
index 0000000..92229eb
Binary files /dev/null and b/DirectFB-1.4.0/patches/agpgart-noroot-2.6.10.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/matroxfb-full-memory-linux-2.6.6.patch.bz2 b/DirectFB-1.4.0/patches/matroxfb-full-memory-linux-2.6.6.patch.bz2
new file mode 100644
index 0000000..7ef82e2
Binary files /dev/null and b/DirectFB-1.4.0/patches/matroxfb-full-memory-linux-2.6.6.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/matroxfb-g400-clock-2.6.6.patch.bz2 b/DirectFB-1.4.0/patches/matroxfb-g400-clock-2.6.6.patch.bz2
new file mode 100644
index 0000000..8e66c7c
Binary files /dev/null and b/DirectFB-1.4.0/patches/matroxfb-g400-clock-2.6.6.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.17.patch.bz2 b/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.17.patch.bz2
new file mode 100644
index 0000000..b104bb1
Binary files /dev/null and b/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.17.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.18.patch.bz2 b/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.18.patch.bz2
new file mode 100644
index 0000000..aca5f01
Binary files /dev/null and b/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.18.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.22.patch.bz2 b/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.22.patch.bz2
new file mode 100644
index 0000000..057daf9
Binary files /dev/null and b/DirectFB-1.4.0/patches/radeonfb-r300fix-2.6.22.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/rivafb-nv2030fix-2.6.10.patch.bz2 b/DirectFB-1.4.0/patches/rivafb-nv2030fix-2.6.10.patch.bz2
new file mode 100644
index 0000000..17ab12f
Binary files /dev/null and b/DirectFB-1.4.0/patches/rivafb-nv2030fix-2.6.10.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/rivafb-nv2030fix-2.6.9.patch.bz2 b/DirectFB-1.4.0/patches/rivafb-nv2030fix-2.6.9.patch.bz2
new file mode 100644
index 0000000..14abe36
Binary files /dev/null and b/DirectFB-1.4.0/patches/rivafb-nv2030fix-2.6.9.patch.bz2 differ
diff --git a/DirectFB-1.4.0/patches/rivafb-nv20fix-2.4.28.patch.bz2 b/DirectFB-1.4.0/patches/rivafb-nv20fix-2.4.28.patch.bz2
new file mode 100644
index 0000000..b693515
Binary files /dev/null and b/DirectFB-1.4.0/patches/rivafb-nv20fix-2.4.28.patch.bz2 differ
diff --git a/DirectFB-1.4.0/proxy/dispatcher/idirectfbfoo_dispatcher.c b/DirectFB-1.4.0/proxy/dispatcher/idirectfbfoo_dispatcher.c
new file mode 100644
index 0000000..3d33636
--- /dev/null
+++ b/DirectFB-1.4.0/proxy/dispatcher/idirectfbfoo_dispatcher.c
@@ -0,0 +1,178 @@
+/*
+   (c) Copyright 2001-2009  The world wide DirectFB Open Source Community (directfb.org)
+   (c) Copyright 2000-2004  Convergence (integrated media) GmbH
+
+   All rights reserved.
+
+   Written by Denis Oliver Kropp <dok@directfb.org>,
+              Andreas Hundt <andi@fischlustig.de>,
+              Sven Neumann <neo@directfb.org>,
+              Ville SyrjÃ¤lÃ¤ <syrjala@sci.fi> and
+              Claudio Ciccani <klan@users.sf.net>.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with this library; if not, write to the
+   Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+   Boston, MA 02111-1307, USA.
+*/
+
+#include <config.h>
+
+#include <directfb.h>
+
+#include <direct/interface.h>
+#include <direct/mem.h>
+#include <direct/memcpy.h>
+#include <direct/messages.h>
+#include <direct/util.h>
+
+#include <voodoo/interface.h>
+#include <voodoo/manager.h>
+
+#include "idirectfbfoo_dispatcher.h"
+
+
+static DFBResult Probe();
+static DFBResult Construct( IDirectFBFoo     *thiz,
+                            IDirectFBFoo     *real,
+                            VoodooManager    *manager,
+                            VoodooInstanceID  super,
+                            void             *arg,
+                            VoodooInstanceID *ret_instance );
+
+#include <direct/interface_implementation.h>
+
+DIRECT_INTERFACE_IMPLEMENTATION( IDirectFBFoo, Dispatcher )
+
+
+/**************************************************************************************************/
+
+static void
+IDirectFBFoo_Dispatcher_Destruct( IDirectFBFoo *thiz )
+{
+     D_DEBUG( "%s (%p)\n", __FUNCTION__, thiz );
+
+     DIRECT_DEALLOCATE_INTERFACE( thiz );
+}
+
+/**************************************************************************************************/
+
+static DFBResult
+IDirectFBFoo_Dispatcher_AddRef( IDirectFBFoo *thiz )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Dispatcher)
+
+     data->ref++;
+
+     return DFB_OK;
+}
+
+static DFBResult
+IDirectFBFoo_Dispatcher_Release( IDirectFBFoo *thiz )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Dispatcher)
+
+     if (--data->ref == 0)
+          IDirectFBFoo_Dispatcher_Destruct( thiz );
+
+     return DFB_OK;
+}
+
+static DFBResult
+IDirectFBFoo_Dispatcher_Bar( IDirectFBFoo *thiz )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Dispatcher)
+
+     D_UNIMPLEMENTED();
+
+     return DFB_UNIMPLEMENTED;
+}
+
+/**************************************************************************************************/
+
+static DirectResult
+Dispatch_Bar( IDirectFBFoo *thiz, IDirectFBFoo *real,
+              VoodooManager *manager, VoodooRequestMessage *msg )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Dispatcher)
+
+     D_UNIMPLEMENTED();
+
+     return DFB_UNIMPLEMENTED;
+}
+
+static DirectResult
+Dispatch( void *dispatcher, void *real, VoodooManager *manager, VoodooRequestMessage *msg )
+{
+     D_DEBUG( "IDirectFBFoo/Dispatcher: "
+              "Handling request for instance %u with method %u...\n", msg->instance, msg->method );
+
+     switch (msg->method) {
+          case IDIRECTFBFOO_METHOD_ID_Bar:
+               return Dispatch_Bar( dispatcher, real, manager, msg );
+     }
+
+     return DFB_NOSUCHMETHOD;
+}
+
+/**************************************************************************************************/
+
+static DFBResult
+Probe()
+{
+     /* This implementation has to be loaded explicitly. */
+     return DFB_UNSUPPORTED;
+}
+
+static DFBResult
+Construct( IDirectFBFoo     *thiz,     /* Dispatcher interface */
+           IDirectFBFoo     *real,     /* Real interface implementation */
+           VoodooManager    *manager,  /* Manager of the Voodoo framework */
+           VoodooInstanceID  super,    /* Instance ID of the super interface */
+           void             *arg,      /* Optional arguments to constructor */
+           VoodooInstanceID *ret_instance )
+{
+     DFBResult        ret;
+     VoodooInstanceID instance;
+
+     DIRECT_ALLOCATE_INTERFACE_DATA(thiz, IDirectFBFoo_Dispatcher)
+
+     D_ASSERT( real != NULL );
+     D_ASSERT( manager != NULL );
+     D_ASSERT( super != VOODOO_INSTANCE_NONE );
+     D_ASSERT( ret_instance != NULL );
+
+     /* Register the dispatcher, getting a new instance ID that refers to it. */
+     ret = voodoo_manager_register_local( manager, false, thiz, real, Dispatch, &instance );
+     if (ret) {
+          DIRECT_DEALLOCATE_INTERFACE( thiz );
+          return ret;
+     }
+
+     /* Return the new instance. */
+     *ret_instance = instance;
+
+     /* Initialize interface data. */
+     data->ref   = 1;
+     data->real  = real;
+     data->self  = instance;
+     data->super = super;
+
+     /* Initialize interface methods. */
+     thiz->AddRef  = IDirectFBFoo_Dispatcher_AddRef;
+     thiz->Release = IDirectFBFoo_Dispatcher_Release;
+     thiz->Bar     = IDirectFBFoo_Dispatcher_Bar;
+
+     return DFB_OK;
+}
+
diff --git a/DirectFB-1.4.0/proxy/dispatcher/idirectfbfoo_dispatcher.h b/DirectFB-1.4.0/proxy/dispatcher/idirectfbfoo_dispatcher.h
new file mode 100644
index 0000000..4f9e062
--- /dev/null
+++ b/DirectFB-1.4.0/proxy/dispatcher/idirectfbfoo_dispatcher.h
@@ -0,0 +1,48 @@
+/*
+   (c) Copyright 2001-2009  The world wide DirectFB Open Source Community (directfb.org)
+   (c) Copyright 2000-2004  Convergence (integrated media) GmbH
+
+   All rights reserved.
+
+   Written by Denis Oliver Kropp <dok@directfb.org>,
+              Andreas Hundt <andi@fischlustig.de>,
+              Sven Neumann <neo@directfb.org>,
+              Ville SyrjÃ¤lÃ¤ <syrjala@sci.fi> and
+              Claudio Ciccani <klan@users.sf.net>.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with this library; if not, write to the
+   Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+   Boston, MA 02111-1307, USA.
+*/
+
+#ifndef __IDIRECTFBFOO_DISPATCHER_H__
+#define __IDIRECTFBFOO_DISPATCHER_H__
+
+#define IDIRECTFBFOO_METHOD_ID_AddRef                     1
+#define IDIRECTFBFOO_METHOD_ID_Release                    2
+#define IDIRECTFBFOO_METHOD_ID_Bar                        3
+
+/*
+ * private data struct of IDirectFBFoo_Dispatcher
+ */
+typedef struct {
+     int                  ref;      /* reference counter */
+
+     IDirectFBFoo        *real;
+
+     VoodooInstanceID     self;
+     VoodooInstanceID     super;
+} IDirectFBFoo_Dispatcher_data;
+
+#endif
diff --git a/DirectFB-1.4.0/proxy/requestor/idirectfbfoo_requestor.c b/DirectFB-1.4.0/proxy/requestor/idirectfbfoo_requestor.c
new file mode 100644
index 0000000..b33816b
--- /dev/null
+++ b/DirectFB-1.4.0/proxy/requestor/idirectfbfoo_requestor.c
@@ -0,0 +1,129 @@
+/*
+   (c) Copyright 2001-2009  The world wide DirectFB Open Source Community (directfb.org)
+   (c) Copyright 2000-2004  Convergence (integrated media) GmbH
+
+   All rights reserved.
+
+   Written by Denis Oliver Kropp <dok@directfb.org>,
+              Andreas Hundt <andi@fischlustig.de>,
+              Sven Neumann <neo@directfb.org>,
+              Ville SyrjÃ¤lÃ¤ <syrjala@sci.fi> and
+              Claudio Ciccani <klan@users.sf.net>.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with this library; if not, write to the
+   Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+   Boston, MA 02111-1307, USA.
+*/
+
+#include <config.h>
+
+#include <directfb.h>
+
+#include <direct/interface.h>
+#include <direct/mem.h>
+#include <direct/memcpy.h>
+#include <direct/messages.h>
+#include <direct/util.h>
+
+#include <voodoo/client.h>
+#include <voodoo/interface.h>
+#include <voodoo/manager.h>
+
+#include <idirectfbfoo_dispatcher.h>
+
+#include "idirectfbfoo_requestor.h"
+
+
+static DFBResult Probe();
+static DFBResult Construct( IDirectFBFoo     *thiz,
+                            VoodooManager    *manager,
+                            VoodooInstanceID  instance,
+                            void             *arg );
+
+#include <direct/interface_implementation.h>
+
+DIRECT_INTERFACE_IMPLEMENTATION( IDirectFBFoo, Requestor )
+
+
+/**************************************************************************************************/
+
+static void
+IDirectFBFoo_Requestor_Destruct( IDirectFBFoo *thiz )
+{
+     D_DEBUG( "%s (%p)\n", __FUNCTION__, thiz );
+
+     DIRECT_DEALLOCATE_INTERFACE( thiz );
+}
+
+/**************************************************************************************************/
+
+static DFBResult
+IDirectFBFoo_Requestor_AddRef( IDirectFBFoo *thiz )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Requestor)
+
+     data->ref++;
+
+     return DFB_OK;
+}
+
+static DFBResult
+IDirectFBFoo_Requestor_Release( IDirectFBFoo *thiz )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Requestor)
+
+     if (--data->ref == 0)
+          IDirectFBFoo_Requestor_Destruct( thiz );
+
+     return DFB_OK;
+}
+
+static DFBResult
+IDirectFBFoo_Requestor_Bar( IDirectFBFoo *thiz )
+{
+     DIRECT_INTERFACE_GET_DATA(IDirectFBFoo_Requestor)
+
+     D_UNIMPLEMENTED();
+
+     return DFB_UNIMPLEMENTED;
+}
+
+/**************************************************************************************************/
+
+static DFBResult
+Probe()
+{
+     /* This implementation has to be loaded explicitly. */
+     return DFB_UNSUPPORTED;
+}
+
+static DFBResult
+Construct( IDirectFBFoo     *thiz,
+           VoodooManager    *manager,
+           VoodooInstanceID  instance,
+           void             *arg )
+{
+     DIRECT_ALLOCATE_INTERFACE_DATA(thiz, IDirectFBFoo_Requestor)
+
+     data->ref      = 1;
+     data->manager  = manager;
+     data->instance = instance;
+
+     thiz->AddRef  = IDirectFBFoo_Requestor_AddRef;
+     thiz->Release = IDirectFBFoo_Requestor_Release;
+     thiz->Bar     = IDirectFBFoo_Requestor_Bar;
+
+     return DFB_OK;
+}
+
diff --git a/DirectFB-1.4.0/proxy/requestor/idirectfbfoo_requestor.h b/DirectFB-1.4.0/proxy/requestor/idirectfbfoo_requestor.h
new file mode 100644
index 0000000..1b125bb
--- /dev/null
+++ b/DirectFB-1.4.0/proxy/requestor/idirectfbfoo_requestor.h
@@ -0,0 +1,45 @@
+/*
+   (c) Copyright 2001-2009  The world wide DirectFB Open Source Community (directfb.org)
+   (c) Copyright 2000-2004  Convergence (integrated media) GmbH
+
+   All rights reserved.
+
+   Written by Denis Oliver Kropp <dok@directfb.org>,
+              Andreas Hundt <andi@fischlustig.de>,
+              Sven Neumann <neo@directfb.org>,
+              Ville SyrjÃ¤lÃ¤ <syrjala@sci.fi> and
+              Claudio Ciccani <klan@users.sf.net>.
+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2 of the License, or (at your option) any later version.
+
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public
+   License along with this library; if not, write to the
+   Free Software Foundation, Inc., 59 Temple Place - Suite 330,
+   Boston, MA 02111-1307, USA.
+*/
+
+#ifndef __IDIRECTFBFOO_REQUESTOR_H__
+#define __IDIRECTFBFOO_REQUESTOR_H__
+
+#include <voodoo/manager.h>
+
+/*
+ * private data struct of IDirectFBFoo_Requestor
+ */
+typedef struct {
+     int                  ref;      /* reference counter */
+
+     VoodooManager       *manager;
+     VoodooInstanceID     instance;
+} IDirectFBFoo_Requestor_data;
+
+#endif
+
diff --git a/DirectFB-1.4.0/rules/nmfile.make b/DirectFB-1.4.0/rules/nmfile.make
index bd435de..442122b 100644
--- a/DirectFB-1.4.0/rules/nmfile.make
+++ b/DirectFB-1.4.0/rules/nmfile.make
@@ -3,9 +3,9 @@ if ENABLE_TRACE
 
 LIBTONM = $(LTLIBRARIES:.la=-$(LT_RELEASE).so.$(LT_BINARY))
 
-install-data-local:
+install-data-local: install-libLTLIBRARIES
 	mkdir -p -- "$(DESTDIR)$(libdir)"
-	nm -n ".libs/$(LIBTONM)" > "$(DESTDIR)$(libdir)/nm-n.$(LIBTONM)"
+	nm -n "$(DESTDIR)$(libdir)/$(LIBTONM)" > "$(DESTDIR)$(libdir)/nm-n.$(LIBTONM)"
 
 endif
 endif
diff --git a/DirectFB-1.4.0/src/core/gfxcard.c b/DirectFB-1.4.0/src/core/gfxcard.c
index c7b101c..94c29ce 100644
--- a/DirectFB-1.4.0/src/core/gfxcard.c
+++ b/DirectFB-1.4.0/src/core/gfxcard.c
@@ -590,6 +590,11 @@ dfb_gfxcard_state_check( CardState *state, DFBAccelerationMask accel )
           return false;
      }
 
+     /* Destination buffer may have been destroyed (suspended). i.e by a vt-switching */
+     if (dst->num_buffers == 0 ) {
+          return false;
+     }
+
      /* Source may have been destroyed. */
      if (DFB_BLITTING_FUNCTION( accel )) {
           if (!src) {
diff --git a/DirectFB-1.4.0/src/core/layer_context.c b/DirectFB-1.4.0/src/core/layer_context.c
index b0ce813..fc313de 100644
--- a/DirectFB-1.4.0/src/core/layer_context.c
+++ b/DirectFB-1.4.0/src/core/layer_context.c
@@ -296,10 +296,7 @@ dfb_layer_context_activate( CoreLayerContext *context )
 
      /* Iterate through all regions. */
      fusion_vector_foreach (region, index, context->regions) {
-          /* Activate each region. */
-          if (dfb_layer_region_activate( region ))
-               D_WARN( "could not activate region!" );
-
+          /* first reallocate.. */
           if (region->surface) {
                D_ASSERT( region->surface_lock.buffer == NULL );
 
@@ -307,6 +304,10 @@ dfb_layer_context_activate( CoreLayerContext *context )
                if (ret)
                     D_DERROR( ret, "Core/Layers: Reallocation of layer surface failed!\n" );
           }
+
+          /* ..then activate each region. */
+          if (dfb_layer_region_activate( region ))
+               D_WARN( "could not activate region!" );
      }
 
      context->active = true;
diff --git a/DirectFB-1.4.0/src/core/surface.c b/DirectFB-1.4.0/src/core/surface.c
index 382735c..87c10fd 100644
--- a/DirectFB-1.4.0/src/core/surface.c
+++ b/DirectFB-1.4.0/src/core/surface.c
@@ -373,6 +373,9 @@ dfb_surface_flip( CoreSurface *surface, bool swap )
 
      D_MAGIC_ASSERT( surface, CoreSurface );
 
+     if (surface->num_buffers == 0)
+          return DFB_SUSPENDED;
+     
      FUSION_SKIRMISH_ASSERT( &surface->lock );
 
      back  = (surface->flips + CSBR_BACK)  % surface->num_buffers;
@@ -557,6 +560,9 @@ dfb_surface_lock_buffer( CoreSurface            *surface,
 
      D_MAGIC_ASSERT( surface, CoreSurface );
 
+     if (surface->num_buffers == 0)
+          return DFB_SUSPENDED;
+
      if (fusion_skirmish_prevail( &surface->lock ))
           return DFB_FUSION;
 
@@ -603,6 +609,9 @@ dfb_surface_read_buffer( CoreSurface            *surface,
      D_ASSERT( pitch > 0 );
      DFB_RECTANGLE_ASSERT_IF( rect );
 
+     if (surface->num_buffers == 0)
+          return DFB_SUSPENDED;
+
      if (fusion_skirmish_prevail( &surface->lock ))
           return DFB_FUSION;
 
@@ -631,6 +640,9 @@ dfb_surface_write_buffer( CoreSurface            *surface,
      D_ASSERT( pitch > 0 );
      DFB_RECTANGLE_ASSERT_IF( rect );
 
+     if (surface->num_buffers == 0)
+          return DFB_SUSPENDED;
+
      if (fusion_skirmish_prevail( &surface->lock ))
           return DFB_FUSION;
 
@@ -657,6 +669,9 @@ dfb_surface_dump_buffer( CoreSurface           *surface,
      D_ASSERT( path != NULL );
      D_ASSERT( prefix != NULL );
 
+     if (surface->num_buffers == 0)
+          return DFB_SUSPENDED;
+
      if (fusion_skirmish_prevail( &surface->lock ))
           return DFB_FUSION;
 
diff --git a/DirectFB-1.4.0/src/core/windows.c b/DirectFB-1.4.0/src/core/windows.c
index 19b10ed..2d95d3f 100644
--- a/DirectFB-1.4.0/src/core/windows.c
+++ b/DirectFB-1.4.0/src/core/windows.c
@@ -442,11 +442,11 @@ dfb_window_create( CoreWindowStack             *stack,
      /* Create the window object. */
      window = dfb_core_create_window( layer->core );
 
-     window->id        = ++stack->id_pool;
-     window->caps      = caps;
-     window->stack     = stack;
-     window->config    = config;
-     window->parent_id = (desc->flags & DWDESC_PARENT) ? desc->parent_id : 0;
+     window->id                 = ++stack->id_pool;
+     window->caps               = caps;
+     window->stack              = stack;
+     window->config             = config;
+     window->config.association = (desc->flags & DWDESC_PARENT) ? desc->parent_id : 0;
 
      /* Set toplevel window ID (new sub window feature) */
      window->toplevel_id = toplevel_id;
diff --git a/DirectFB-1.4.0/src/core/windows.h b/DirectFB-1.4.0/src/core/windows.h
index f88e1c7..a09cd88 100644
--- a/DirectFB-1.4.0/src/core/windows.h
+++ b/DirectFB-1.4.0/src/core/windows.h
@@ -53,6 +53,7 @@ typedef enum {
 
      CWCF_OPTIONS       = 0x00000010,
      CWCF_EVENTS        = 0x00000020,
+     CWCF_ASSOCIATION   = 0x00000040,
 
      CWCF_COLOR_KEY     = 0x00000100,
      CWCF_OPAQUE        = 0x00000200,
@@ -64,7 +65,7 @@ typedef enum {
 
      CWCF_ROTATION      = 0x00040000,
 
-     CWCF_ALL           = 0x0007133F
+     CWCF_ALL           = 0x0007137F
 } CoreWindowConfigFlags;
 
 struct __DFB_CoreWindowConfig {
@@ -84,6 +85,8 @@ struct __DFB_CoreWindowConfig {
      DFBWindowGeometry        dst_geometry;   /* advanced destination geometry */
 
      int                      rotation;
+
+     DFBWindowID              association;
 };
 
 
diff --git a/DirectFB-1.4.0/src/core/windows_internal.h b/DirectFB-1.4.0/src/core/windows_internal.h
index 73c5634..3e63cc1 100644
--- a/DirectFB-1.4.0/src/core/windows_internal.h
+++ b/DirectFB-1.4.0/src/core/windows_internal.h
@@ -101,8 +101,6 @@ struct __DFB_CoreWindow {
      DirectLink             *bound_windows;  /* list of bound windows */
      CoreWindow             *boundto;        /* window to which this window is bound (window binding) */
 
-     DFBWindowID             parent_id;      /* window id of parent window (window association) */
-
      DFBWindowID             toplevel_id;    /* in case of a sub window toplevel_id != 0 */
      CoreWindow             *toplevel;       /* for top level windows this will be NULL */
      FusionVector            subwindows;     /* list of sub windows (only valid for top level windows) */
diff --git a/DirectFB-1.4.0/src/gfx/generic/generic.c b/DirectFB-1.4.0/src/gfx/generic/generic.c
index f13205f..072aec6 100644
--- a/DirectFB-1.4.0/src/gfx/generic/generic.c
+++ b/DirectFB-1.4.0/src/gfx/generic/generic.c
@@ -6856,6 +6856,10 @@ bool gAcquire( CardState *state, DFBAccelerationMask accel )
      if (!destination)
           return false;
 
+     /* Destination buffer may have been destroyed (suspended), i.e. by vt-switching */
+     if (destination->num_buffers == 0)
+          return false;
+
      /* Source may have been destroyed. */
      if (DFB_BLITTING_FUNCTION( accel ) && !source)
           return false;
diff --git a/DirectFB-1.4.0/src/gfx/generic/stretch_up_down_16_indexed.h b/DirectFB-1.4.0/src/gfx/generic/stretch_up_down_16_indexed.h
new file mode 100644
index 0000000..853ebcb
--- /dev/null
+++ b/DirectFB-1.4.0/src/gfx/generic/stretch_up_down_16_indexed.h
@@ -0,0 +1,82 @@
+#define SOURCE_LOOKUP(x) (((const u16*)colors)[x])
+#define SOURCE_TYPE      u8
+
+
+#define POINT_0               hfraq
+#define LINE_0                vfraq
+#define MINUS_1               0
+#define POINT_TO_RATIO(p,ps)  ( (((((p)) & 0x3ffff) ? : 0x40000) << SHIFT_L6) / (ps) )
+#define LINE_TO_RATIO(l,ls)   ( (((((l)) & 0x3ffff) ? : 0x40000) << SHIFT_L5) / (ls) )
+
+#define POINT_L(p,ps)  ( (((p)-1) >> 18) - 1 )
+#define POINT_R(p,ps)  ( (((p)-1) >> 18) )
+
+#define LINE_T(l,ls)  ( (((l)-1) >> 18) - 1 )
+#define LINE_B(l,ls)  ( (((l)-1) >> 18) )
+
+static void FUNC_NAME(down)( void       *dst,
+                             int         dpitch,
+                             const void *src,
+                             int         spitch,
+                             int         width,
+                             int         height,
+                             int         dst_width,
+                             int         dst_height,
+                             DFBRegion  *clip,
+                             const void *colors )
+{
+#include "stretch_hvx_16.h"
+}
+
+#undef POINT_0
+#undef LINE_0
+#undef MINUS_1
+#undef POINT_TO_RATIO
+#undef LINE_TO_RATIO
+#undef POINT_L
+#undef POINT_R
+#undef LINE_T
+#undef LINE_B
+
+/**********************************************************************************************************************/
+
+#define POINT_0               0
+#define LINE_0                0
+#define MINUS_1               1
+#define POINT_TO_RATIO(p,ps)  ( ((p) & 0x3ffff) >> (18-SHIFT_L6) )
+#define LINE_TO_RATIO(l,ls)   ( ((l) & 0x3ffff) >> (18-SHIFT_L5) )
+
+#define POINT_L(p,ps)  ( (((p)) >> 18) )
+#define POINT_R(p,ps)  ( (((p)) >> 18) + 1 )
+
+#define LINE_T(l,ls)  ( (((l)) >> 18) )
+#define LINE_B(l,ls)  ( (((l)) >> 18) + 1 )
+
+static void FUNC_NAME(up)( void       *dst,
+                           int         dpitch,
+                           const void *src,
+                           int         spitch,
+                           int         width,
+                           int         height,
+                           int         dst_width,
+                           int         dst_height,
+                           DFBRegion  *clip,
+                           const void *colors )
+{
+#include "stretch_hvx_16.h"
+}
+
+#undef POINT_0
+#undef LINE_0
+#undef MINUS_1
+#undef POINT_TO_RATIO
+#undef LINE_TO_RATIO
+#undef POINT_L
+#undef POINT_R
+#undef LINE_T
+#undef LINE_B
+
+
+#undef SOURCE_LOOKUP
+#undef SOURCE_TYPE
+
diff --git a/DirectFB-1.4.0/src/idirectfb.c b/DirectFB-1.4.0/src/idirectfb.c
index 9493280..b1c1552 100644
--- a/DirectFB-1.4.0/src/idirectfb.c
+++ b/DirectFB-1.4.0/src/idirectfb.c
@@ -161,7 +161,7 @@ static bool input_filter_local( DFBEvent *evt,
 static bool input_filter_global( DFBEvent *evt,
                                  void     *ctx );
 
-static void drop_window( IDirectFB_data *data );
+static void drop_window( IDirectFB_data *data, bool enable_cursor );
 
 /**********************************************************************************************************************/
 
@@ -179,7 +179,7 @@ IDirectFB_Destruct( IDirectFB *thiz )
 
      D_DEBUG_AT( IDFB, "%s( %p )\n", __FUNCTION__, thiz );
 
-     drop_window( data );
+     drop_window( data, false );
 
      if (data->primary.context)
           dfb_layer_context_unref( data->primary.context );
@@ -271,7 +271,7 @@ IDirectFB_SetCooperativeLevel( IDirectFB           *thiz,
                          return ret;
                     }
 
-                    drop_window( data );
+                    drop_window( data, true );
 
                     data->primary.context = context;
                }
@@ -649,7 +649,7 @@ IDirectFB_CreateSurface( IDirectFB                    *thiz,
                          if (ret)
                               return ret;
 
-                         drop_window( data );
+                         drop_window( data, true );
 
                          data->primary.window = window;
 
@@ -1943,7 +1943,7 @@ input_filter_global( DFBEvent *evt,
 }
 
 static void
-drop_window( IDirectFB_data *data )
+drop_window( IDirectFB_data *data, bool enable_cursor )
 {
      if (!data->primary.window)
           return;
@@ -1954,6 +1954,6 @@ drop_window( IDirectFB_data *data )
      data->primary.window  = NULL;
      data->primary.focused = false;
 
-     dfb_windowstack_cursor_enable( data->core, data->stack, true );
+     dfb_windowstack_cursor_enable( data->core, data->stack, enable_cursor );
 }
 
diff --git a/DirectFB-1.4.0/src/windows/idirectfbwindow.c b/DirectFB-1.4.0/src/windows/idirectfbwindow.c
index 56042f8..752e614 100644
--- a/DirectFB-1.4.0/src/windows/idirectfbwindow.c
+++ b/DirectFB-1.4.0/src/windows/idirectfbwindow.c
@@ -1206,7 +1206,25 @@ IDirectFBWindow_SetRotation(IDirectFBWindow *thiz,
      DIRECT_INTERFACE_GET_DATA(IDirectFBWindow)
 
      return dfb_window_set_rotation( data->window, rotation % 360 );     
- }
+}
+
+static DFBResult
+IDirectFBWindow_SetAssociation( IDirectFBWindow *thiz,
+                                DFBWindowID      window_id )
+{
+     CoreWindowConfig config;
+
+     DIRECT_INTERFACE_GET_DATA(IDirectFBWindow)
+
+     D_DEBUG_AT( IDirectFB_Window, "%s()\n", __FUNCTION__ );
+
+     if (data->destroyed)
+          return DFB_DESTROYED;
+
+     config.association = window_id;
+
+     return dfb_window_set_config( data->window, &config, CWCF_ASSOCIATION );
+}
 
 DFBResult
 IDirectFBWindow_Construct( IDirectFBWindow *thiz,
@@ -1277,6 +1295,7 @@ IDirectFBWindow_Construct( IDirectFBWindow *thiz,
      thiz->SetSrcGeometry = IDirectFBWindow_SetSrcGeometry;
      thiz->SetDstGeometry = IDirectFBWindow_SetDstGeometry;
      thiz->SetRotation = IDirectFBWindow_SetRotation;
+     thiz->SetAssociation = IDirectFBWindow_SetAssociation;
 
      return DFB_OK;
 }
diff --git a/DirectFB-1.4.0/systems/fbdev/fb.h b/DirectFB-1.4.0/systems/fbdev/fb.h
index 6cc1399..4475f2a 100644
--- a/DirectFB-1.4.0/systems/fbdev/fb.h
+++ b/DirectFB-1.4.0/systems/fbdev/fb.h
@@ -132,6 +132,8 @@
 #define FB_ACCEL_PROSAVAGE_DDR  0x8d	/* S3 ProSavage DDR             */
 #define FB_ACCEL_PROSAVAGE_DDRK 0x8e	/* S3 ProSavage DDR-K           */
 
+#define FB_ACCEL_CX2450X        0x90    /* Conexant CX2450X             */
+
 struct fb_fix_screeninfo {
 	char id[16];			/* identification string eg "TT Builtin" */
 	unsigned long smem_start;	/* Start of frame buffer mem */
diff --git a/DirectFB-1.4.0/systems/fbdev/fbdev.c b/DirectFB-1.4.0/systems/fbdev/fbdev.c
index d6c93a5..153824a 100644
--- a/DirectFB-1.4.0/systems/fbdev/fbdev.c
+++ b/DirectFB-1.4.0/systems/fbdev/fbdev.c
@@ -832,6 +832,11 @@ system_get_accelerator( void )
 	  return FB_ACCEL_EP9X;
 #endif
 
+#ifdef FB_ACCEL_CX2450X
+     if (!strcmp( dfb_fbdev->shared->fix.id, "CX2450X" ))
+          return FB_ACCEL_CX2450X;
+#endif
+
      if (dfb_config->accelerator)
           return dfb_config->accelerator;
 
diff --git a/DirectFB-1.4.0/tests/Makefile.am b/DirectFB-1.4.0/tests/Makefile.am
index ce41711..9ab7bba 100644
--- a/DirectFB-1.4.0/tests/Makefile.am
+++ b/DirectFB-1.4.0/tests/Makefile.am
@@ -9,7 +9,7 @@ INCLUDES = \
 	-DLINUX_2_6
 
 
-noinst_PROGRAMS = \
+bin_PROGRAMS = \
 	dfbtest_blit	\
 	dfbtest_reinit	\
 	dfbtest_scale	\
diff --git a/DirectFB-1.4.0/tests/dfbtest_window.c b/DirectFB-1.4.0/tests/dfbtest_window.c
index e11e521..d77f5e0 100644
--- a/DirectFB-1.4.0/tests/dfbtest_window.c
+++ b/DirectFB-1.4.0/tests/dfbtest_window.c
@@ -541,7 +541,8 @@ parse_command_line( int argc, char *argv[] )
                if (!parse_id( argv[n], &m_desc_top.parent_id ))
                     return false;
 
-               m_desc_top.flags |= DWDESC_PARENT;
+//               m_desc_top.flags   |= DWDESC_PARENT;
+               m_desc_top.options |= DWOP_FOLLOW_BOUNDS;
 
                continue;
           }
@@ -627,7 +628,8 @@ parse_command_line( int argc, char *argv[] )
                if (!parse_id( argv[n], &m_desc_sub.parent_id ))
                     return false;
 
-               m_desc_sub.flags |= DWDESC_PARENT;
+//               m_desc_sub.flags   |= DWDESC_PARENT;
+               m_desc_sub.options |= DWOP_FOLLOW_BOUNDS;
 
                continue;
           }
@@ -705,9 +707,9 @@ Test_CreateWindow( IDirectFBDisplayLayer *layer, void *arg )
      /*
       * Create a new top level window
       */
-     SHOW_TEST( "CreateWindow( %d,%d - %dx%d %s )...",
+     SHOW_TEST( "CreateWindow( %d,%d - %dx%d %s, options 0x%08x )...",
                 m_desc_top.posx, m_desc_top.posy, m_desc_top.width, m_desc_top.height,
-                dfb_pixelformat_name( m_desc_top.pixelformat ) );
+                dfb_pixelformat_name( m_desc_top.pixelformat ), m_desc_top.options );
 
      _T( layer->CreateWindow( layer, &m_desc_top, &window ) );
 
@@ -746,6 +748,15 @@ Test_CreateWindow( IDirectFBDisplayLayer *layer, void *arg )
      _T( window->GetID( window, &window_id ) );
 
      /*
+      * Set association of new window
+      */
+     if (m_desc_top.parent_id) {
+          SHOW_INFO( "  - SetAssociation( %u )...", m_desc_top.parent_id );
+
+          _T( window->SetAssociation( window, m_desc_top.parent_id ) );
+     }
+
+     /*
       * Set top level window ID (user hasn't specified one)
       */
      m_toplevel_id = window_id;
@@ -777,9 +788,9 @@ Test_CreateSubWindow( IDirectFBDisplayLayer *layer, void *arg )
      /*
       * Create a new sub window with 75% width/height and positioned at 20,20 within top level window
       */
-     SHOW_TEST( "CreateWindow( %d,%d - %dx%d %s + toplevel ID %u )...",
+     SHOW_TEST( "CreateWindow( %d,%d - %dx%d %s + toplevel ID %u, options 0x%08x )...",
                 m_desc_sub.posx, m_desc_sub.posy, m_desc_sub.width, m_desc_sub.height,
-                dfb_pixelformat_name( m_desc_sub.pixelformat ), m_desc_sub.toplevel_id );
+                dfb_pixelformat_name( m_desc_sub.pixelformat ), m_desc_sub.toplevel_id, m_desc_top.options );
 
      _T( layer->CreateWindow( layer, &m_desc_sub, &window ) );
 
@@ -814,6 +825,15 @@ Test_CreateSubWindow( IDirectFBDisplayLayer *layer, void *arg )
      _T( window->GetID( window, &window_id ) );
 
      /*
+      * Set association of new window
+      */
+     if (m_desc_sub.parent_id) {
+          SHOW_INFO( "  - SetAssociation( %u )...", m_desc_sub.parent_id );
+
+          _T( window->SetAssociation( window, m_desc_sub.parent_id ) );
+     }
+
+     /*
       * Set top level window ID (user hasn't specified one)
       */
      m_subwindow_id = window_id;
diff --git a/DirectFB-1.4.0/tools/dfbsummon.c b/DirectFB-1.4.0/tools/dfbsummon.c
new file mode 100644
index 0000000..9c697f6
--- /dev/null
+++ b/DirectFB-1.4.0/tools/dfbsummon.c
@@ -0,0 +1,241 @@
+/*
+   (c) Copyright 2001-2009  The world wide DirectFB Open Source Community (directfb.org)
+   (c) Copyright 2000-2004  Convergence (integrated media) GmbH
+
+   All rights reserved.
+
+   Written by Denis Oliver Kropp <dok@directfb.org>,
+              Andreas Hundt <andi@fischlustig.de>,
+              Sven Neumann <neo@directfb.org>,
+              Ville SyrjÃ¤lÃ¤ <syrjala@sci.fi> and
+              Claudio Ciccani <klan@users.sf.net>.
+
+   This file is subject to the terms and conditions of the MIT License:
+
+   Permission is hereby granted, free of charge, to any person
+   obtaining a copy of this software and associated documentation
+   files (the "Software"), to deal in the Software without restriction,
+   including without limitation the rights to use, copy, modify, merge,
+   publish, distribute, sublicense, and/or sell copies of the Software,
+   and to permit persons to whom the Software is furnished to do so,
+   subject to the following conditions:
+
+   The above copyright notice and this permission notice shall be
+   included in all copies or substantial portions of the Software.
+
+   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
+   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+*/
+
+#include <config.h>
+
+#include <time.h>
+#include <stdio.h>
+#include <stdlib.h>
+#include <unistd.h>
+#include <string.h>
+
+#include <directfb.h>
+
+#include <core/gfxcard.h>
+#include <core/surface.h>
+#include <core/surfacemanager.h>
+
+#include <direct/util.h>
+
+/******************************************************************************/
+
+static IDirectFB            *dfb     = NULL;
+static IDirectFBSurface     *primary = NULL;
+static IDirectFBEventBuffer *events  = NULL;
+
+static int screen_width, screen_height;
+static unsigned int video_total, screen_total;
+
+/******************************************************************************/
+
+static void init_application( int *argc, char **argv[] );
+static void exit_application( int status );
+
+static void update_display();
+
+/******************************************************************************/
+
+int
+main( int argc, char *argv[] )
+{
+     /* Initialize application. */
+     init_application( &argc, &argv );
+
+     /* Main loop. */
+     while (1) {
+          DFBInputEvent event;
+
+          update_display();
+
+          events->WaitForEventWithTimeout( events, 0, 100 );
+
+          /* Check for new events. */
+          while (events->GetEvent( events, DFB_EVENT(&event) ) == DFB_OK) {
+
+               /* Handle key press events. */
+               if (event.type == DIET_KEYPRESS) {
+                    switch (event.key_symbol) {
+                         case DIKS_ESCAPE:
+                         case DIKS_POWER:
+                         case DIKS_BACK:
+                         case DIKS_SMALL_Q:
+                         case DIKS_CAPITAL_Q:
+                              exit_application( 0 );
+                              break;
+
+                         default:
+                              break;
+                    }
+               }
+          }
+     }
+
+     /* Shouldn't reach this. */
+     return 0;
+}
+
+/******************************************************************************/
+
+static void
+init_application( int *argc, char **argv[] )
+{
+     DFBResult                    ret;
+     DFBSurfaceDescription        desc;
+     DFBGraphicsDeviceDescription dev_desc;
+
+     /* Initialize DirectFB including command line parsing. */
+     ret = DirectFBInit( argc, argv );
+     if (ret) {
+          DirectFBError( "DirectFBInit() failed", ret );
+          exit_application( 1 );
+     }
+
+     /* Create the super interface. */
+     ret = DirectFBCreate( &dfb );
+     if (ret) {
+          DirectFBError( "DirectFBCreate() failed", ret );
+          exit_application( 2 );
+     }
+
+     dfb->GetDeviceDescription( dfb, &dev_desc );
+
+     video_total = dev_desc.video_memory ? : 1;
+
+     /* Request fullscreen mode. */
+     //dfb->SetCooperativeLevel( dfb, DFSCL_FULLSCREEN );
+
+     /* Fill the surface description. */
+     desc.flags = DSDESC_CAPS;
+     desc.caps  = DSCAPS_PRIMARY | DSCAPS_DOUBLE;
+
+     /* Create the primary surface. */
+     ret = dfb->CreateSurface( dfb, &desc, &primary );
+     if (ret) {
+          DirectFBError( "IDirectFB::CreateSurface() failed", ret );
+          exit_application( 3 );
+     }
+
+     /* Create an event buffer with key capable devices attached. */
+     ret = dfb->CreateInputEventBuffer( dfb, DICAPS_KEYS, DFB_FALSE, &events );
+     if (ret) {
+          DirectFBError( "IDirectFB::CreateEventBuffer() failed", ret );
+          exit_application( 4 );
+     }
+}
+
+static void
+exit_application( int status )
+{
+     /* Release the event buffer. */
+     if (events)
+          events->Release( events );
+
+     /* Release the primary surface. */
+     if (primary)
+          primary->Release( primary );
+
+     /* Release the super interface. */
+     if (dfb)
+          dfb->Release( dfb );
+
+     /* Terminate application. */
+     exit( status );
+}
+
+static DFBEnumerationResult
+chunk_callback( SurfaceBuffer *buffer,
+                int            offset,
+                int            length,
+                int            tolerations,
+                void          *ctx )
+{
+     u8           r = 0, g = 0, b = 0;
+     unsigned int screen_length, screen_offset;
+
+     if (buffer) {
+          switch (buffer->policy) {
+               case CSP_VIDEOLOW:
+                    g = 0x80;
+                    break;
+               case CSP_VIDEOHIGH:
+                    g = 0xa0;
+                    break;
+               case CSP_VIDEOONLY:
+                    b = 0xa0;
+                    break;
+               default:
+                    break;
+          }
+
+          r = tolerations*2/3;
+     }
+
+     primary->SetColor( primary, r, g, b, 0xff );
+
+     screen_length = (unsigned int)( (long long)length *
+                                     (long long)screen_total /
+                                     (long long)video_total );
+     screen_offset = (unsigned int)( (long long)offset *
+                                     (long long)screen_total /
+                                     (long long)video_total );
+
+     while (screen_length > 0) {
+          int x = screen_offset % screen_width;
+          int y = screen_offset / screen_width;
+
+          int w = MIN( screen_length, screen_width - x );
+
+          primary->FillRectangle( primary, x, y, w, 1 );
+
+          screen_length -= w;
+          screen_offset += w;
+     }
+
+     return DFENUM_OK;
+}
+
+static void
+update_display( void )
+{
+     primary->GetSize( primary, &screen_width, &screen_height );
+
+     screen_total = screen_width * screen_height;
+
+     primary->Clear( primary, 0x30, 0x30, 0x30, 0x80 );
+
+     dfb_surfacemanager_enumerate_chunks( dfb_gfxcard_surface_manager(),
+                                          chunk_callback, NULL );
+
+     primary->Flip( primary, NULL, 0 );
+}
diff --git a/DirectFB-1.4.0/wm/default/default.c b/DirectFB-1.4.0/wm/default/default.c
index 0452a2c..4b639d6 100644
--- a/DirectFB-1.4.0/wm/default/default.c
+++ b/DirectFB-1.4.0/wm/default/default.c
@@ -3379,7 +3379,7 @@ wm_preconfigure_window( CoreWindowStack *stack,
                CoreWindow      *window,
                void            *window_data )
 {
-     if (window->parent_id)
+     if (window->config.association)
           return DFB_UNIMPLEMENTED;
 
      return DFB_OK;
diff --git a/DirectFB-1.4.0/wm/unique/FLOW b/DirectFB-1.4.0/wm/unique/FLOW
new file mode 100644
index 0000000..f9c8611
--- /dev/null
+++ b/DirectFB-1.4.0/wm/unique/FLOW
@@ -0,0 +1,15 @@
+
+
+Input event handling
+---------------------
+
+                                   UniqueCursor
+                                        |
+                                        |
+CoreInputDevice  )---  UniquePointer  )-')-.
+                                           |
+                                   UniqueInputSwitch  -->  UniqueInputChannel  )---  UniqueWindow  -->  CoreWindow
+                                           |
+CoreInputDevice  )-.-  UniqueKeyboard  )---'
+                   |
+CoreInputDevice  )-'
diff --git a/DirectFB-1.4.0/wm/unique/IDEAS b/DirectFB-1.4.0/wm/unique/IDEAS
new file mode 100644
index 0000000..17c099f
--- /dev/null
+++ b/DirectFB-1.4.0/wm/unique/IDEAS
@@ -0,0 +1,71 @@
+UniqueContext object
+- core stack functionality
+- manage parts like dnd, input event and cursor handling
+  without knowing any detail about the different parts
+- reactor for unique context events
+
+UniqueWindow object
+- core window functionality
+- decorations (window borders, overlays)
+- properties (title, type, icon)
+- constraints (min/max size, resize step)
+- options (keep position, size, stacking)
+- state (iconified, maximized, minimized, shaded)
+- window groups and relationships
+- has an UniqueInputChannel for input events
+- reactor for unique window events
+
+
+UniqueDevice
+- listents to input events
+- dispatches events to one or more UniqueInputSwitch
++ currently there's one instance for each these device classes
+  - pointer     motion and button events, cursor acceleration
+  - wheel       wheel events
+  - keyboard    key events
+
+
+UniqueInputSwitch
+- bundles devices into a logical group, listening to them
+- dispatches events to the selected UniqueInputChannel
+- each device class has its own channel selection
+- automatic channel selection by pre-processing events (focus follows mouse etc.)
+- fixed channel selection (grabbing) for whole device or selected events
+- implicit grabbing for keyboard and pointer
+
+
+UniqueInputChannel
+- each UniqueWindow has one channel to receive input events
+- window decorations can have additional channels
+- StReT regions can be assigned a channel for each device class
+- automatic channel selection is based on these assignments
+- reactor for dispatching input events received from UniqueInputSwitch
+
+
+UniqueCursor part
+- switches or updates shapes
+- manages the StReT region
+- listens to pointer devices to update the cursor position
+
+UniqueCursorShape object
+- one global fallback shape
+- optionally one shape per window
+- builtin cursor animation
+
+
+UniqueDND part
+- dnd context manager
+
+UniqueDNDContext object
+- created by application starting the drag
+
+
+UniqueDecoration object
+- created for each decoration added to a window
+- manages stret region(s) attached to the frame
++ there can be several uses of this object
+  - border
+  - shadow
+  - glass ?
+  - flames :->
+
diff --git a/DirectFB-1.4.0/wm/unique/STRET b/DirectFB-1.4.0/wm/unique/STRET
new file mode 100644
index 0000000..8638bf5
--- /dev/null
+++ b/DirectFB-1.4.0/wm/unique/STRET
@@ -0,0 +1,34 @@
+=  Container region
+\  Container region level
++  Specific region
+
+
+= Root
+   \ Desktop
+      + Icons
+      + Fullscreen Apps redirected
+    
+   \ User
+      = Frame
+         \ Background
+         \ Content
+            + Normal
+               + Opaque
+         \ Foreground
+            + Decoration
+
+  \ System
+     + Exposé
+     + Dock/Panel
+     + Glass
+     + Clipboard Manager
+     + Virtual Keyboard
+     + Input Methods
+
+  \ Cursor
+     + Drag'n'Drop
+     + Shape
+
+  \ Screen
+     + Saver
+     + Lock
